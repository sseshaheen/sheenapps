{
  "info": {
    "_postman_id": "claude-worker-api-v1",
    "name": "SheenApps Claude Worker API (with Integration Status System)",
    "description": "\nüöÄ NEW FEATURES v3.6 - Website Migration Tool API:\n- üîÑ **AI-Powered Migration**: Complete website migration from any platform to modern frameworks\n- üìä **Multi-Phase Process**: ANALYZE ‚Üí PLAN ‚Üí TRANSFORM ‚Üí VERIFY ‚Üí DEPLOY with progress tracking\n- ‚ö° **Real-time Updates**: SSE streaming for live migration progress and phase transitions\n- üéØ **Intelligent Analysis**: AI analyzes source website structure, content, and functionality\n- üõ°Ô∏è **Production Ready**: Built-in verification, rollback capabilities, and error handling\n- üìà **Enterprise Features**: Bulk operations, organization configs, and admin management\n- üí∞ **AI Time Integration**: Integrated billing with user balance validation and tracking\n- üåê **Framework Agnostic**: Supports Next.js, React, Vue, and other modern frameworks\n- üì± **Complete API**: 25+ endpoints covering core operations, analytics, and administration\n\nüöÄ PREVIOUS FEATURES v3.5 - Intelligent Advisor Matching System:\n- üéØ **Smart Matching**: Startup-optimized algorithm with automatic scaling (50+ advisors ‚Üí complex algorithm)\n- üë• **Admin Controls**: Manual assignments, preference rules, and override capabilities\n- üìä **Real-time Dashboard**: Pool status, workload analysis, and performance metrics\n- üîÑ **Complete Workflow**: Match requests ‚Üí client/advisor decisions ‚Üí finalized assignments\n- ‚ö° **High Performance**: <500ms response time with race-safe assignment using FOR UPDATE SKIP LOCKED\n- üõ°Ô∏è **Production Ready**: State machine enforcement, RLS security, DEFERRABLE constraints\n- üåê **Localized**: Full i18n support with x-sheen-locale header (en|ar|fr|es|de)\n- üìà **Analytics**: Success rates, response times, availability trends, intervention tracking\n- üéõÔ∏è **Flexible Configuration**: Environment variables for thresholds and algorithm tuning\n- üîß **27 API Endpoints**: Complete coverage from basic matching to advanced admin operations\n\nüîÑ v3.3 API Update (Sep 7, 2025): Trust & Safety Risk Assessment & Admin JWT Refresh\n\nAPI collection for Claude Worker microservice - generates code with Claude AI, builds and deploys to Cloudflare Pages.\n\nüöÄ NEW FEATURES v3.4 - Integration Status System:\n- ‚ö° **Unified Status API**: Single endpoint for GitHub, Vercel, Sanity, Supabase integration status\n- üîÑ **Real-time Updates**: Server-Sent Events with perfect event replay and reconnection\n- üéØ **Quick Actions**: Idempotent integration actions (push, deploy, sync, connect) with rate limiting\n- üìä **Performance Optimized**: <500ms response time with parallel execution and Redis caching\n- üõ°Ô∏è **Circuit Breakers**: Graceful degradation with stale data fallback during API failures\n- üíæ **ETag Caching**: Bandwidth optimization with HTTP caching headers\n- üîê **Role-based Actions**: Permission filtering based on user roles (owner/admin/editor/viewer)\n- üì± **Production Ready**: Expert-reviewed PostgreSQL schema with operational monitoring\n\nüöÄ NEW FEATURES v3.3 - Trust & Safety Enhancements:\n- üõ°Ô∏è **Risk Assessment V2**: Detailed risk_factors breakdown with weighted scoring\n- üîÑ **JWT Refresh Endpoint**: /v1/admin/auth/refresh with 2-minute grace period\n- üìä **SLA Metrics**: Support ticket response/resolution time tracking\n- üéØ **Risk Recommendations**: Automated suggestions based on risk levels\n- üìà **Enhanced Metrics**: Comprehensive risk factor analysis per user\n\nüöÄ FEATURES v3.2 - Admin Panel Pagination Standardization:\n- üìä **Complete Pagination**: All admin endpoints now include `total` field for proper pagination controls\n- üéØ **Consistent Format**: Standardized pagination object across all admin endpoints\n- üìã **Updated Endpoints**: Users, advisor applications, support tickets, trust & safety, pricing catalogs\n- üí´ **Frontend Ready**: Enables proper pagination controls without client-side workarounds\n\nüöÄ PREVIOUS FEATURES v3.1 - Multi-Provider Payment System:\n- üí≥ **5 Payment Providers**: Stripe, Fawry, Paymob, STC Pay, PayTabs\n- üåç **Regional Coverage**: Egypt (EGP), Saudi Arabia (SAR), Global (USD/EUR/GBP)\n- üí± **Currency Support**: USD, EUR, GBP, EGP, SAR with automatic provider routing\n- üéØ **Payment Methods**: Cards, mobile wallets, cash vouchers, bank transfers\n- üì± **Checkout Types**: Redirect (cards) + Voucher (cash) with QR codes\n- üëë **Admin Dashboard**: Provider health monitoring, circuit breakers, SLO tracking\n- üîÑ **Webhook Processing**: Multi-provider webhook handling with 48-hour replay\n- üõ°Ô∏è **Regional Requirements**: Phone validation, Arabic locale support\n- üé® **Localized UI**: RTL support, currency symbols, regional instructions\n\nüöÄ EXISTING FEATURES v3.0 - Phase 2 Advisor Application System:\n- üìù **Multi-Step Applications**: Advanced form with auto-save functionality\n- üìã **Event Timeline**: Complete audit trail for admin review workflow\n- üéØ **Progress Tracking**: Section completion monitoring with validation\n- üëë **Admin Workflow**: Start/complete review process with timestamps\n- üåê **i18n Ready**: Machine-readable event codes for localization\n- üõ°Ô∏è **RLS Security**: Field-level protection prevents unauthorized modifications\n\n‚ú® EXISTING FEATURES v2.4 - Production-Ready Version Management:\n- üìú **Enhanced Version History API**: Smart action permissions and artifact availability\n- üîë **Idempotency Protection**: All mutating operations with 24h cache\n- üïê **Clock-skew Diagnostics**: serverTime in auth failures for debugging\n- üéØ **Artifact Retention Awareness**: Days until expiration, accessibility hints\n- üîí **Production Reliability**: Lock lease renewal, timing-safe comparisons\n- ‚ôø **Accessibility Support**: Specific reasons for disabled actions\n\n‚ú® EXISTING FEATURES:\n- Project updates with context awareness\n- Real-time progress tracking with polling API\n- Webhook integration with HMAC signatures\n- Build status monitoring and event streaming\n- üì¶ Project export & download with secure signed URLs\n- üîí AI time billing integration with balance checks\n\n‚ö° UPDATE WORKFLOW:\n1. Create a project with 'Create Preview (Modular System)'\n2. Update it with 'Update Project' endpoint\n3. Updates are 30-45s vs 90-120s for rebuilds!\n\n‚ö†Ô∏è IMPORTANT - AUTHENTICATION SETUP:\n\n1. The collection defaults to sharedSecret = 'your-shared-secret'\n2. You MUST override this in Postman:\n   - Click the gear icon ‚Üí Manage Environments\n   - Create/select an environment OR use Globals\n   - Add: sharedSecret = [your actual secret]\n   - Select that environment in the top-right dropdown\n\n3. Alternative: Edit collection variables directly:\n   - Click collection name ‚Üí Variables tab\n   - Change sharedSecret from 'your-shared-secret' to your actual secret\n\n4. To verify: Send the 'Debug Signature' request and check:\n   - Postman Console (View ‚Üí Show Postman Console)\n   - Look for: pm.variables.get(\"sharedSecret\") = [your secret]\n   - Response should show: \"signatureMatch\": true\n\nüöÄ PROGRESS TRACKING WORKFLOW:\n1. Start a build with 'Build Preview (New Project)' or 'Rebuild Preview'\n2. Copy the jobId from the response\n3. Use 'Get Build Status (Clean Events)' or 'Get Clean Build Events ‚≠ê NextJS Team API'\n4. Poll for progress with userId parameter for security\n\nüéØ **NEXTJS TEAM CLEAN EVENTS API:**\n‚úÖ Structured events - no string parsing needed\n‚úÖ Single overall_progress (0.0-1.0) for progress bars\n‚úÖ Boolean finished flag for completion detection\n‚úÖ Security filtered - no sensitive data exposed\n‚úÖ Incremental polling with lastEventId parameter\nüÜï Version information in completion events (versionId & versionName)\n\nüì¶ EXPORT WORKFLOW:\n1. Use 'Export Latest Project' to get a download URL for the newest version\n2. Use 'Download Specific Version' to get any historical version\n3. Both return secure signed URLs valid for 24 hours\n4. Handle 413 errors for oversized projects (>2GB)\n5. Handle 404 errors with rebuild suggestions for missing artifacts\n\nüîê AUTHENTICATION:\n\n‚ö†Ô∏è CRITICAL FOR v2 SIGNATURES:\nQuery parameters MUST be alphabetically sorted! The v2 signature includes the full path with sorted query parameters.\n\nExample:\n- Your URL: /v1/projects/123/versions?state=all&limit=10&offset=0\n- v2 signs: /v1/projects/123/versions?limit=10&offset=0&state=all (sorted!)\n\nüí° RECOMMENDATION: Use v1 signature for endpoints with query parameters (simpler, no sorting needed).\n\n\nThe Worker API uses HMAC signatures with the following headers:\n- x-sheen-signature: v1 signature (timestamp + body)\n- x-sheen-sig-v2: v2 signature (METHOD\\nPATH\\nTIMESTAMP\\nNONCE\\nBODY)\n- x-sheen-timestamp: Unix timestamp in seconds\n- x-sheen-nonce: Random string for replay protection\n\n‚ö†Ô∏è IMPORTANT: The secret is used AS-IS (do NOT base64 decode):\nWORKER_SHARED_SECRET=9Q6WWhZP3AlrhpdDwy3tC0bPtZSYAeJMAkdPzXFl9xs=\n\nüéØ NEW FEATURES v3.4 - Career Portal:\n- üìù **Job Management**: Full CRUD for job postings with multilingual support (ar/en)\n- üíº **Application System**: Resume upload, CAPTCHA verification, rate limiting\n- üîç **Smart Search**: PostgreSQL trigram search for fast job discovery\n- üõ°Ô∏è **Security Features**: HTML sanitization, file validation, IP-based rate limits\n- üìä **Admin Dashboard**: Application management, status updates, statistics\n- üåê **SEO Optimized**: JSON-LD structured data, dynamic sitemap generation\n- üì± **Localized**: Arabic-first design with English fallback support\n\nIncludes comprehensive Sanity CMS integration with encrypted token storage, breakglass recovery, and preview system.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "noauth"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3000",
      "type": "string"
    },
    {
      "key": "sharedSecret",
      "value": "9Q6WWhZP3AlrhpdDwy3tC0bPtZSYAeJMAkdPzXFl9xs=",
      "type": "string",
      "description": "HMAC shared secret - use AS-IS (do NOT base64 decode). The trailing = is part of the secret."
    },
    {
      "key": "userId",
      "value": "user123",
      "type": "string"
    },
    {
      "key": "projectId",
      "value": "my-app",
      "type": "string"
    },
    {
      "key": "versionId",
      "value": "ver_abc123",
      "type": "string"
    },
    {
      "key": "versionId",
      "value": "01HX...",
      "type": "string"
    },
    {
      "key": "cfWebhookSecret",
      "value": "cloudflare-webhook-secret",
      "type": "string"
    },
    {
      "key": "buildId",
      "value": "27",
      "type": "string",
      "description": "Build ID for progress tracking (same as jobId from build endpoints)"
    },
    {
      "key": "sessionId",
      "value": "test-session-123",
      "type": "string",
      "description": "Chat plan session ID for resuming conversations"
    },
    {
      "key": "lastEventId",
      "value": "0",
      "type": "string",
      "description": "Last event ID for incremental polling"
    },
    {
      "key": "lastPreviewUrl",
      "value": "",
      "type": "string",
      "description": "Latest preview URL from completed builds (auto-set by test scripts)"
    },
    {
      "key": "testUserId",
      "value": "",
      "type": "string",
      "description": "User ID for test flow (auto-set by Step 1)"
    },
    {
      "key": "testProjectId",
      "value": "",
      "type": "string",
      "description": "Project ID for test flow (auto-set by Step 1)"
    },
    {
      "key": "artifactRetentionDays",
      "value": "30",
      "type": "string",
      "description": "Artifact retention policy in days (default: 30)"
    },
    {
      "key": "admin_jwt",
      "value": "",
      "type": "string",
      "description": "Admin JWT token from /v1/admin/auth/exchange endpoint (expires in 12 minutes)"
    },
    {
      "key": "githubInstallationId",
      "value": "12345678",
      "type": "string",
      "description": "GitHub App installation ID for repository discovery and linking"
    },
    {
      "key": "operationId",
      "value": "",
      "type": "string",
      "description": "GitHub sync operation ID for SSE event filtering (auto-populated by sync trigger)"
    },
    {
      "key": "jobId",
      "value": "job-uuid-123",
      "type": "string",
      "description": "Job ID for testing"
    },
    {
      "key": "jobSlug",
      "value": "senior-software-developer",
      "type": "string",
      "description": "Job slug for testing"
    },
    {
      "key": "applicationId",
      "value": "app-uuid-456",
      "type": "string",
      "description": "Application ID for testing"
    },
    {
      "key": "vercelConnectionId",
      "value": "conn_abc123def456",
      "type": "string",
      "description": "Vercel connection ID for testing"
    },
    {
      "key": "redirectUri",
      "value": "https://yourapp.com/auth/vercel/callback",
      "type": "string",
      "description": "OAuth redirect URI for Vercel integration"
    },
    {
      "key": "adminAccessToken",
      "value": "admin_token_here",
      "type": "string",
      "description": "Admin access token for administrative endpoints"
    },
    {
      "key": "adminUserId",
      "value": "admin_user_123",
      "type": "string",
      "description": "Admin user ID for administrative operations"
    },
    {
      "key": "exportJobId",
      "value": "550e8400-e29b-41d4-a716-446655440000",
      "type": "string",
      "description": "Export job ID for testing export status and download endpoints (UUID format)"
    },
    {
      "key": "partnerCode",
      "value": "FRIEND123",
      "type": "string",
      "description": "Referral partner code for testing (auto-populated from partner creation)"
    },
    {
      "key": "partnerId",
      "value": "partner_abc123",
      "type": "string",
      "description": "Partner ID for admin operations"
    },
    {
      "key": "commissionId",
      "value": "comm_def456",
      "type": "string",
      "description": "Commission ID for testing approval workflows"
    },
    {
      "key": "adminJwt",
      "value": "your-admin-jwt-here",
      "type": "string",
      "description": "Admin JWT token for authentication"
    },
    {
      "key": "lastIntegrationHash",
      "value": "",
      "type": "string",
      "description": "Last integration status hash for ETag caching"
    },
    {
      "key": "integrationKey",
      "value": "github",
      "type": "string",
      "description": "Integration key for actions (github|vercel|sanity|supabase)"
    },
    {
      "key": "migrationId",
      "value": "mig_abc123def456",
      "type": "string",
      "description": "Migration ID for testing migration endpoints"
    },
    {
      "key": "bulkId",
      "value": "bulk_xyz789",
      "type": "string",
      "description": "Bulk migration ID for testing bulk operations"
    },
    {
      "key": "orgId",
      "value": "org_123456",
      "type": "string",
      "description": "Organization ID for enterprise endpoints"
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Generate HMAC signatures for authenticated endpoints",
          "const needsSignature = (",
          "    pm.request.url.path.join('/').startsWith('v1') ||",
          "    pm.request.url.path.includes('generate') ||",
          "    pm.request.url.path.includes('build-preview') ||",
          "    pm.request.url.path.includes('update-project') ||",
          "    pm.request.url.path.includes('create-preview') ||",
          "    pm.request.url.path.includes('chat-plan') ||",
          "    pm.request.url.path.includes('billing') ||",
          "    pm.request.url.path.includes('versions') ||",
          "    pm.request.url.path.includes('projects')",
          ");",
          "",
          "if (needsSignature) {",
          "    const CryptoJS = require('crypto-js');",
          "    const secret = pm.variables.get('sharedSecret');",
          "    ",
          "    if (!secret || secret === 'your-shared-secret-here') {",
          "        console.warn('‚ö†Ô∏è WARNING: sharedSecret not configured!');",
          "        console.warn('Set it in collection variables or environment');",
          "        return;",
          "    }",
          "    ",
          "    // Generate timestamp and nonce",
          "    const timestamp = Math.floor(Date.now() / 1000).toString();",
          "    const nonce = Math.random().toString(36).substring(2, 15);",
          "    ",
          "    // Get request details",
          "    const method = pm.request.method;",
          "    let path = '/' + pm.request.url.path.join('/');",
          "    const body = pm.request.body ? pm.request.body.raw : '';",
          "    ",
          "    // Handle query parameters",
          "    let queryParams = [];",
          "    if (pm.request.url.query && pm.request.url.query.members) {",
          "        pm.request.url.query.members.forEach(param => {",
          "            if (!param.disabled && param.value !== undefined) {",
          "                queryParams.push([param.key, param.value]);",
          "            }",
          "        });",
          "    }",
          "    ",
          "    // Generate v1 signature: timestamp + body (ignores path/query)",
          "    const v1Canonical = timestamp + body;",
          "    const v1Signature = CryptoJS.HmacSHA256(v1Canonical, secret).toString();",
          "    ",
          "    // Generate v2 signature with sorted query params",
          "    let v2Path = path;",
          "    if (queryParams.length > 0) {",
          "        // CRITICAL: Sort query parameters alphabetically for v2!",
          "        const sortedParams = queryParams.sort(([a], [b]) => a.localeCompare(b));",
          "        const queryString = sortedParams",
          "            .map(([key, value]) => `${key}=${encodeURIComponent(value)}`)",
          "            .join('&');",
          "        v2Path = path + '?' + queryString;",
          "        ",
          "        console.log('üîÑ Query Parameter Sorting for v2:');",
          "        console.log('  Original:', queryParams.map(([k, v]) => `${k}=${v}`).join('&'));",
          "        console.log('  Sorted:  ', sortedParams.map(([k, v]) => `${k}=${v}`).join('&'));",
          "    }",
          "    ",
          "    // Generate v2 signature: METHOD\\nPATH\\nTIMESTAMP\\nNONCE\\nBODY",
          "    const v2Canonical = [method, v2Path, timestamp, nonce, body].join('\\n');",
          "    const v2Signature = CryptoJS.HmacSHA256(v2Canonical, secret).toString();",
          "    ",
          "    // Add headers",
          "    pm.request.headers.add({key: 'x-sheen-signature', value: v1Signature });",
          "    pm.request.headers.add({key: 'x-sheen-sig-v2', value: v2Signature });",
          "    pm.request.headers.add({key: 'x-sheen-timestamp', value: timestamp });",
          "    pm.request.headers.add({key: 'x-sheen-nonce', value: nonce });",
          "    ",
          "    // Log for debugging",
          "    console.log('üîê HMAC Signatures Generated:');",
          "    console.log('  Method:', method);",
          "    console.log('  Path (original):', path + (queryParams.length > 0 ? '?' + queryParams.map(([k, v]) => `${k}=${v}`).join('&') : ''));",
          "    console.log('  Path (v2 sorted):', v2Path);",
          "    console.log('  Timestamp:', timestamp);",
          "    console.log('  Nonce:', nonce);",
          "    console.log('  v1 Canonical:', v1Canonical.substring(0, 50) + '...');",
          "    console.log('  v1 Signature:', v1Signature);",
          "    console.log('  v2 Canonical:', v2Canonical.substring(0, 100) + '...');",
          "    console.log('  v2 Signature:', v2Signature);",
          "    ",
          "    if (queryParams.length > 0) {",
          "        console.log('');",
          "        console.log('‚ö†Ô∏è  NOTE: v2 signatures require alphabetically sorted query params!');",
          "        console.log('üí° TIP: Use v1 signature for simpler implementation (ignores query params)');",
          "    }",
          "}"
        ]
      }
    }
  ],
  "item": [
    {
      "name": "‚ö° Integration Status System API",
      "item": [
        {
          "name": "Get Project Integration Status",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "If-None-Match",
                "value": "W/\"{{lastIntegrationHash}}\"",
                "description": "ETag for cache optimization",
                "disabled": true
              },
              {
                "key": "x-sheen-locale",
                "value": "en",
                "description": "Locale for localized responses (en|ar|fr|es|de)",
                "disabled": true
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/integrations/status?projectId={{projectId}}&userId={{userId}}&includeMetrics=false&forceRefresh=false",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "integrations",
                "status"
              ],
              "query": [
                {
                  "key": "projectId",
                  "value": "{{projectId}}",
                  "description": "Project UUID"
                },
                {
                  "key": "userId",
                  "value": "{{userId}}",
                  "description": "User UUID"
                },
                {
                  "key": "includeMetrics",
                  "value": "false",
                  "description": "Include performance metrics in response"
                },
                {
                  "key": "forceRefresh",
                  "value": "false",
                  "description": "Force refresh bypassing cache"
                }
              ]
            },
            "description": "Get aggregated status for all project integrations (GitHub, Vercel, Sanity, Supabase) with optimal caching and ETag support."
          },
          "response": []
        },
        {
          "name": "Execute Integration Action",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Idempotency-Key",
                "value": "{{$guid}}",
                "description": "Required UUID for idempotency"
              },
              {
                "key": "x-sheen-locale",
                "value": "en",
                "description": "Locale for localized responses",
                "disabled": true
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"integrationKey\": \"github\",\n  \"actionId\": \"push\",\n  \"parameters\": {\n    \"branch\": \"main\",\n    \"message\": \"Update from API\"\n  }\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/integrations/actions/{{projectId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "integrations",
                "actions",
                "{{projectId}}"
              ]
            },
            "description": "Execute actions on specific integrations with idempotency support. Rate limited to 5 actions/min per user+project."
          },
          "response": []
        },
        {
          "name": "Get Available Actions",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/integrations/actions/{{projectId}}/github?userId={{userId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "integrations",
                "actions",
                "{{projectId}}",
                "github"
              ],
              "query": [
                {
                  "key": "userId",
                  "value": "{{userId}}",
                  "description": "User UUID"
                }
              ]
            },
            "description": "Get available actions for a specific integration based on user permissions and integration state."
          },
          "response": []
        },
        {
          "name": "Real-time Status Updates (SSE)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "text/event-stream"
              },
              {
                "key": "Cache-Control",
                "value": "no-cache"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/integrations/events?projectId={{projectId}}&userId={{userId}}&lastEventId={{lastEventId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "integrations",
                "events"
              ],
              "query": [
                {
                  "key": "projectId",
                  "value": "{{projectId}}",
                  "description": "Project UUID"
                },
                {
                  "key": "userId",
                  "value": "{{userId}}",
                  "description": "User UUID"
                },
                {
                  "key": "lastEventId",
                  "value": "{{lastEventId}}",
                  "description": "Last received event ID for resumption"
                }
              ]
            },
            "description": "Server-Sent Events stream for real-time integration status updates with reconnection support."
          },
          "response": []
        },
        {
          "name": "Force Refresh All Statuses",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"{{userId}}\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/integrations/status/{{projectId}}/refresh",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "integrations",
                "status",
                "{{projectId}}",
                "refresh"
              ]
            },
            "description": "Force refresh all integration statuses, bypassing cache for immediate fresh data."
          },
          "response": []
        },
        {
          "name": "Get Circuit Breaker Metrics",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/integrations/metrics",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "integrations",
                "metrics"
              ]
            },
            "description": "Get circuit breaker metrics for all integration adapters for monitoring and debugging."
          },
          "response": []
        }
      ],
      "description": "Integration Status System API providing unified status aggregation for GitHub, Vercel, Sanity, and Supabase integrations with real-time updates via Server-Sent Events.",
      "event": [
        {
          "listen": "prerequest",
          "script": {
            "type": "text/javascript",
            "exec": [
              "// Integration Status System uses project-specific auth pattern",
              "// No HMAC signatures required - userId included in request"
            ]
          }
        }
      ]
    },
    {
      "name": "üîÑ Website Migration Tool API",
      "item": [
        {
          "name": "Core Migration Operations",
          "item": [
            {
              "name": "Start Migration",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-signature",
                    "value": "{{signature}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-timestamp",
                    "value": "{{timestamp}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-nonce",
                    "value": "{{nonce}}",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"sourceUrl\": \"https://example.com\",\n  \"projectName\": \"migrated-website\",\n  \"targetFramework\": \"nextjs\",\n  \"options\": {\n    \"preserveAssets\": true,\n    \"includeSubpages\": true,\n    \"maxDepth\": 3,\n    \"customDomains\": [],\n    \"skipPatterns\": [\"admin/*\", \"login/*\"]\n  }\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/api/migration/start",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "migration",
                    "start"
                  ]
                },
                "description": "Initiates a new website migration process. Validates source URL and starts the migration pipeline."
              },
              "response": [
                {
                  "name": "Migration Started",
                  "status": "Created",
                  "code": 201,
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "application/json"
                    }
                  ],
                  "body": "{\n  \"migrationId\": \"mig_abc123def456\",\n  \"status\": \"INITIALIZING\",\n  \"phases\": [\n    {\n      \"name\": \"ANALYZE\",\n      \"status\": \"PENDING\",\n      \"estimatedDuration\": 120\n    },\n    {\n      \"name\": \"PLAN\",\n      \"status\": \"PENDING\",\n      \"estimatedDuration\": 180\n    },\n    {\n      \"name\": \"TRANSFORM\",\n      \"status\": \"PENDING\",\n      \"estimatedDuration\": 300\n    },\n    {\n      \"name\": \"VERIFY\",\n      \"status\": \"PENDING\",\n      \"estimatedDuration\": 120\n    },\n    {\n      \"name\": \"DEPLOY\",\n      \"status\": \"PENDING\",\n      \"estimatedDuration\": 180\n    }\n  ],\n  \"sourceUrl\": \"https://example.com\",\n  \"projectName\": \"migrated-website\",\n  \"targetFramework\": \"nextjs\",\n  \"createdAt\": \"2025-01-15T10:30:00Z\",\n  \"estimatedCompletion\": \"2025-01-15T11:45:00Z\"\n}"
                }
              ]
            },
            {
              "name": "Get Migration Status",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "x-sheen-signature",
                    "value": "{{signature}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-timestamp",
                    "value": "{{timestamp}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-nonce",
                    "value": "{{nonce}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/migration/{{migrationId}}/status?userId={{userId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "migration",
                    "{{migrationId}}",
                    "status"
                  ],
                  "query": [
                    {
                      "key": "userId",
                      "value": "{{userId}}"
                    }
                  ]
                },
                "description": "Gets the current status and progress of a migration job."
              },
              "response": [
                {
                  "name": "Migration Status",
                  "status": "OK",
                  "code": 200,
                  "body": "{\n  \"migrationId\": \"mig_abc123def456\",\n  \"status\": \"IN_PROGRESS\",\n  \"currentPhase\": \"TRANSFORM\",\n  \"progress\": {\n    \"overall\": 0.65,\n    \"currentPhase\": 0.8,\n    \"phasesCompleted\": 2,\n    \"totalPhases\": 5\n  },\n  \"phases\": [\n    {\n      \"name\": \"ANALYZE\",\n      \"status\": \"COMPLETED\",\n      \"startedAt\": \"2025-01-15T10:30:00Z\",\n      \"completedAt\": \"2025-01-15T10:32:15Z\",\n      \"duration\": 135\n    },\n    {\n      \"name\": \"PLAN\",\n      \"status\": \"COMPLETED\",\n      \"startedAt\": \"2025-01-15T10:32:15Z\",\n      \"completedAt\": \"2025-01-15T10:35:20Z\",\n      \"duration\": 185\n    },\n    {\n      \"name\": \"TRANSFORM\",\n      \"status\": \"IN_PROGRESS\",\n      \"startedAt\": \"2025-01-15T10:35:20Z\",\n      \"estimatedCompletion\": \"2025-01-15T10:40:20Z\",\n      \"progress\": 0.8\n    }\n  ],\n  \"sourceUrl\": \"https://example.com\",\n  \"projectName\": \"migrated-website\",\n  \"targetFramework\": \"nextjs\",\n  \"createdAt\": \"2025-01-15T10:30:00Z\",\n  \"updatedAt\": \"2025-01-15T10:38:45Z\"\n}"
                }
              ]
            },
            {
              "name": "Process Migration Phase",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-signature",
                    "value": "{{signature}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-timestamp",
                    "value": "{{timestamp}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-nonce",
                    "value": "{{nonce}}",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"phase\": \"DEPLOY\",\n  \"parameters\": {\n    \"environment\": \"production\",\n    \"customDomain\": \"migrated-site.example.com\"\n  }\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/api/migration/{{migrationId}}/process",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "migration",
                    "{{migrationId}}",
                    "process"
                  ]
                },
                "description": "Processes a specific migration phase with custom parameters."
              }
            }
          ]
        },
        {
          "name": "Verification & Analysis",
          "item": [
            {
              "name": "Start Verification",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-signature",
                    "value": "{{signature}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-timestamp",
                    "value": "{{timestamp}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-nonce",
                    "value": "{{nonce}}",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"checks\": [\"layout\", \"functionality\", \"performance\", \"seo\"]\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/api/migration/{{migrationId}}/verify",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "migration",
                    "{{migrationId}}",
                    "verify"
                  ]
                },
                "description": "Initiates verification checks on the migrated website."
              }
            },
            {
              "name": "Get Verification Results",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "x-sheen-signature",
                    "value": "{{signature}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-timestamp",
                    "value": "{{timestamp}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-nonce",
                    "value": "{{nonce}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/migration/{{migrationId}}/verify?userId={{userId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "migration",
                    "{{migrationId}}",
                    "verify"
                  ],
                  "query": [
                    {
                      "key": "userId",
                      "value": "{{userId}}"
                    }
                  ]
                },
                "description": "Gets verification results and quality metrics."
              }
            },
            {
              "name": "Get Migration Analysis",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "x-sheen-signature",
                    "value": "{{signature}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-timestamp",
                    "value": "{{timestamp}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-nonce",
                    "value": "{{nonce}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/migration/{{migrationId}}/analysis?userId={{userId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "migration",
                    "{{migrationId}}",
                    "analysis"
                  ],
                  "query": [
                    {
                      "key": "userId",
                      "value": "{{userId}}"
                    }
                  ]
                },
                "description": "Gets detailed analysis of the migration process and results."
              }
            }
          ]
        },
        {
          "name": "Streaming & Real-time",
          "item": [
            {
              "name": "Migration Progress Stream (SSE)",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Accept",
                    "value": "text/event-stream",
                    "type": "text"
                  },
                  {
                    "key": "Cache-Control",
                    "value": "no-cache",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-signature",
                    "value": "{{signature}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-timestamp",
                    "value": "{{timestamp}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-nonce",
                    "value": "{{nonce}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/migration/{{migrationId}}/stream?userId={{userId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "migration",
                    "{{migrationId}}",
                    "stream"
                  ],
                  "query": [
                    {
                      "key": "userId",
                      "value": "{{userId}}"
                    }
                  ]
                },
                "description": "Server-sent events stream for real-time migration progress updates."
              }
            }
          ]
        },
        {
          "name": "Migration Management",
          "item": [
            {
              "name": "Cancel Migration",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-signature",
                    "value": "{{signature}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-timestamp",
                    "value": "{{timestamp}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-nonce",
                    "value": "{{nonce}}",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"reason\": \"User requested cancellation\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/api/migration/{{migrationId}}/cancel",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "migration",
                    "{{migrationId}}",
                    "cancel"
                  ]
                },
                "description": "Cancels a running migration process."
              }
            },
            {
              "name": "Retry Migration Phase",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-signature",
                    "value": "{{signature}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-timestamp",
                    "value": "{{timestamp}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-nonce",
                    "value": "{{nonce}}",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"phase\": \"TRANSFORM\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/api/migration/{{migrationId}}/retry",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "migration",
                    "{{migrationId}}",
                    "retry"
                  ]
                },
                "description": "Retries a failed migration phase."
              }
            },
            {
              "name": "Get Migration Tools",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "x-sheen-signature",
                    "value": "{{signature}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-timestamp",
                    "value": "{{timestamp}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-nonce",
                    "value": "{{nonce}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/migration/{{migrationId}}/tools?userId={{userId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "migration",
                    "{{migrationId}}",
                    "tools"
                  ],
                  "query": [
                    {
                      "key": "userId",
                      "value": "{{userId}}"
                    }
                  ]
                },
                "description": "Gets available tools and utilities for the migration."
              }
            }
          ]
        },
        {
          "name": "Enterprise & Bulk Operations",
          "item": [
            {
              "name": "Update Organization Config",
              "request": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-signature",
                    "value": "{{signature}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-timestamp",
                    "value": "{{timestamp}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-nonce",
                    "value": "{{nonce}}",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"config\": {\n    \"defaultFramework\": \"nextjs\",\n    \"allowedFrameworks\": [\"nextjs\", \"react\", \"vue\"],\n    \"maxConcurrentMigrations\": 5,\n    \"retentionDays\": 90,\n    \"notificationSettings\": {\n      \"email\": true,\n      \"slack\": false,\n      \"webhook\": \"https://org.example.com/webhook\"\n    }\n  }\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/api/migration/org/{{orgId}}/config",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "migration",
                    "org",
                    "{{orgId}}",
                    "config"
                  ]
                },
                "description": "Updates organization-wide migration configuration."
              }
            },
            {
              "name": "Start Bulk Migration",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-signature",
                    "value": "{{signature}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-timestamp",
                    "value": "{{timestamp}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-nonce",
                    "value": "{{nonce}}",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"migrations\": [\n    {\n      \"sourceUrl\": \"https://site1.example.com\",\n      \"projectName\": \"site1-migrated\",\n      \"targetFramework\": \"nextjs\"\n    },\n    {\n      \"sourceUrl\": \"https://site2.example.com\",\n      \"projectName\": \"site2-migrated\",\n      \"targetFramework\": \"react\"\n    }\n  ],\n  \"batchName\": \"Q1 2025 Site Migrations\",\n  \"parallelLimit\": 3\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/api/migration/bulk/start",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "migration",
                    "bulk",
                    "start"
                  ]
                },
                "description": "Initiates multiple migrations in a bulk operation."
              }
            },
            {
              "name": "Get Bulk Migration Status",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "x-sheen-signature",
                    "value": "{{signature}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-timestamp",
                    "value": "{{timestamp}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-nonce",
                    "value": "{{nonce}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/migration/bulk/{{bulkId}}/status?userId={{userId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "migration",
                    "bulk",
                    "{{bulkId}}",
                    "status"
                  ],
                  "query": [
                    {
                      "key": "userId",
                      "value": "{{userId}}"
                    }
                  ]
                },
                "description": "Gets status of a bulk migration operation."
              }
            }
          ]
        },
        {
          "name": "Analytics & Reporting",
          "item": [
            {
              "name": "Get Migration Analytics",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "x-sheen-signature",
                    "value": "{{signature}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-timestamp",
                    "value": "{{timestamp}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-nonce",
                    "value": "{{nonce}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/migration/{{migrationId}}/analytics?userId={{userId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "migration",
                    "{{migrationId}}",
                    "analytics"
                  ],
                  "query": [
                    {
                      "key": "userId",
                      "value": "{{userId}}"
                    }
                  ]
                },
                "description": "Gets detailed analytics for a specific migration."
              }
            },
            {
              "name": "Get Migration Billing",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "x-sheen-signature",
                    "value": "{{signature}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-timestamp",
                    "value": "{{timestamp}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-nonce",
                    "value": "{{nonce}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/migration/{{migrationId}}/billing?userId={{userId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "migration",
                    "{{migrationId}}",
                    "billing"
                  ],
                  "query": [
                    {
                      "key": "userId",
                      "value": "{{userId}}"
                    }
                  ]
                },
                "description": "Gets AI time billing information for a migration."
              }
            },
            {
              "name": "Get Migration Map",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "x-sheen-signature",
                    "value": "{{signature}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-timestamp",
                    "value": "{{timestamp}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-nonce",
                    "value": "{{nonce}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/migration/{{migrationId}}/map?userId={{userId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "migration",
                    "{{migrationId}}",
                    "map"
                  ],
                  "query": [
                    {
                      "key": "userId",
                      "value": "{{userId}}"
                    }
                  ]
                },
                "description": "Gets the site structure mapping from source to target."
              }
            },
            {
              "name": "Get Migration Phases",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "x-sheen-signature",
                    "value": "{{signature}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-timestamp",
                    "value": "{{timestamp}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-nonce",
                    "value": "{{nonce}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/migration/{{migrationId}}/phases?userId={{userId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "migration",
                    "{{migrationId}}",
                    "phases"
                  ],
                  "query": [
                    {
                      "key": "userId",
                      "value": "{{userId}}"
                    }
                  ]
                },
                "description": "Gets detailed information about migration phases."
              }
            }
          ]
        },
        {
          "name": "üîß Admin Migration Management",
          "item": [
            {
              "name": "List All Migrations",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/admin/migrations?limit=50&offset=0&status=all",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "admin",
                    "migrations"
                  ],
                  "query": [
                    {
                      "key": "limit",
                      "value": "50"
                    },
                    {
                      "key": "offset",
                      "value": "0"
                    },
                    {
                      "key": "status",
                      "value": "all",
                      "description": "Filter by status: all, active, completed, failed"
                    }
                  ]
                },
                "description": "Admin endpoint to list all migrations across the platform."
              }
            },
            {
              "name": "Get Migration Details",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/admin/migrations/{{migrationId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "admin",
                    "migrations",
                    "{{migrationId}}"
                  ]
                },
                "description": "Admin endpoint to get detailed migration information."
              }
            },
            {
              "name": "Cancel Migration (Admin)",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}",
                    "type": "text"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"reason\": \"Admin intervention required\",\n  \"adminId\": \"admin_123\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/api/admin/migrations/{{migrationId}}/cancel",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "admin",
                    "migrations",
                    "{{migrationId}}",
                    "cancel"
                  ]
                },
                "description": "Admin endpoint to forcefully cancel any migration."
              }
            },
            {
              "name": "Retry Migration (Admin)",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}",
                    "type": "text"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"phase\": \"TRANSFORM\",\n  \"adminId\": \"admin_123\",\n  \"resetFrom\": \"current\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/api/admin/migrations/{{migrationId}}/retry",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "admin",
                    "migrations",
                    "{{migrationId}}",
                    "retry"
                  ]
                },
                "description": "Admin endpoint to retry failed migrations with enhanced controls."
              }
            },
            {
              "name": "Migration System Health",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/admin/migration-system/health",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "admin",
                    "migration-system",
                    "health"
                  ]
                },
                "description": "Admin endpoint to check migration system health and metrics."
              }
            },
            {
              "name": "Migration Analytics Overview",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/admin/migration-analytics/overview?timeframe=30d",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "admin",
                    "migration-analytics",
                    "overview"
                  ],
                  "query": [
                    {
                      "key": "timeframe",
                      "value": "30d",
                      "description": "Time frame: 24h, 7d, 30d, 90d"
                    }
                  ]
                },
                "description": "Admin analytics overview with success rates, performance metrics."
              }
            },
            {
              "name": "Emergency System Shutdown",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}",
                    "type": "text"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"reason\": \"Critical system issue detected\",\n  \"adminId\": \"admin_123\",\n  \"duration\": 3600\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/api/admin/migration-system/emergency-shutdown",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "admin",
                    "migration-system",
                    "emergency-shutdown"
                  ]
                },
                "description": "Emergency endpoint to temporarily disable the migration system."
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Health & Monitoring",
      "item": [
        {
          "name": "Main Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/myhealthz",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "myhealthz"
              ]
            },
            "description": "Check the overall health of the service"
          }
        },
        {
          "name": "Claude Executor Health",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/claude-executor/health",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "claude-executor",
                "health"
              ]
            },
            "description": "Check Claude executor health and metrics"
          }
        },
        {
          "name": "Debug Signature",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"test\":\"hello\",\"userId\":\"{{userId}}\"}"
            },
            "url": {
              "raw": "{{baseUrl}}/debug-signature",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "debug-signature"
              ]
            },
            "description": "Debug endpoint to test signature generation"
          }
        }
      ]
    },
    {
      "name": "Core Operations",
      "item": [
        {
          "name": "Generate Code",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"userId\":\"{{userId}}\",\"projectId\":\"{{projectId}}\",\"prompt\":\"Create a React todo list app with TypeScript\"}"
            },
            "url": {
              "raw": "{{baseUrl}}/generate",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "generate"
              ]
            },
            "description": "Generate code using Claude AI. Returns streaming JSON response."
          }
        },
        {
          "name": "Build Preview (New Project)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"userId\":\"{{userId}}\",\"projectId\":\"{{projectId}}\",\"prompt\":\"Create a React todo list app\",\"framework\":\"react\"}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/build-preview",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "build-preview"
              ]
            },
            "description": "Initial build for a new project - triggers build and deployment to Cloudflare Pages"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// üß™ Smart Test Script for Build Progress Tracking",
                  "",
                  "pm.test(\"Build started successfully\", function () {",
                  "    pm.response.to.have.status(200);",
                  "    ",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.success).to.be.true;",
                  "    pm.expect(response.jobId).to.exist;",
                  "    ",
                  "    // Auto-set buildId for progress tracking",
                  "    pm.collectionVariables.set(\"buildId\", response.jobId);",
                  "    ",
                  "    console.log(\"üöÄ BUILD STARTED SUCCESSFULLY!\");",
                  "    console.log(\"üìä Response:\", JSON.stringify(response, null, 2));",
                  "    console.log(\"‚úÖ jobId extracted:\", response.jobId);",
                  "    console.log(\"üîß buildId variable set automatically:\", response.jobId);",
                  "    console.log(\"\");",
                  "    console.log(\"üìã NEXT STEPS:\");",
                  "    console.log(\"1. Use 'Get Build Status' to monitor progress\");",
                  "    console.log(\"2. Use 'Get Clean Build Events ‚≠ê NextJS Team API' to see detailed events\");",
                  "    console.log(\"3. Watch for status: planning ‚Üí executing ‚Üí deploying ‚Üí completed\");",
                  "    console.log(\"4. Final build will have previewUrl in the response\");",
                  "    console.log(\"\");",
                  "    console.log(\"‚è∞ Expected completion time: 60-120 seconds\");",
                  "});",
                  "",
                  "pm.test(\"Response has required fields\", function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('jobId');",
                  "    pm.expect(response).to.have.property('status');",
                  "    pm.expect(response).to.have.property('versionId');",
                  "    pm.expect(response.status).to.equal('queued');",
                  "});",
                  "",
                  "// Set up automatic progress checking reminder",
                  "setTimeout(() => {",
                  "    console.log(\"\");",
                  "    console.log(\"‚è∞ REMINDER: Check build progress now!\");",
                  "    console.log(\"   ‚Üí Send 'Get Build Status' request\");",
                  "    console.log(\"   ‚Üí buildId is already set to:\", pm.collectionVariables.get('buildId'));",
                  "}, 5000);"
                ]
              }
            }
          ]
        },
        {
          "name": "Create Preview (Modular System) ‚≠ê NEW",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"userId\":\"{{userId}}\",\"prompt\":\"Create a simple React app with a header component that says Hello World and a button that increments a counter\",\"framework\":\"react\"}"
            },
            "url": {
              "raw": "{{baseUrl}}/create-preview-for-new-project",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "create-preview-for-new-project"
              ]
            },
            "description": "üéØ ENHANCED: Creates a project with SERVER-SIDE ID GENERATION for improved security. No need to provide projectId - the server generates a secure UUID and returns it. Uses the modular task system with atomic project creation (project + version + build metrics in single transaction). Prevents race conditions with advisory database locking."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// üß™ Test Script for Modular Create Preview",
                  "",
                  "pm.test(\"Preview creation started successfully\", function () {",
                  "    pm.response.to.have.status(200);",
                  "    ",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.success).to.be.true;",
                  "    ",
                  "    console.log(\"üöÄ MODULAR PREVIEW CREATION STARTED!\");",
                  "    console.log(\"üìä Response:\", JSON.stringify(response, null, 2));",
                  "    ",
                  "    if (response.status === 'completed') {",
                  "        console.log(\"‚úÖ Direct mode - Build completed immediately!\");",
                  "        console.log(\"üìã Plan ID:\", response.planId);",
                  "        console.log(\"üìÅ Files created:\", response.files?.length || 0);",
                  "        console.log(\"‚è±Ô∏è Duration:\", response.duration + 'ms');",
                  "        ",
                  "        if (response.deploymentUrl) {",
                  "            pm.collectionVariables.set(\"lastPreviewUrl\", response.deploymentUrl);",
                  "            console.log(\"üåê Preview URL:\", response.deploymentUrl);",
                  "        }",
                  "    } else if (response.status === 'queued') {",
                  "        console.log(\"üì• Queued mode - Job submitted\");",
                  "        console.log(\"üÜî Job ID:\", response.jobId);",
                  "        console.log(\"üìã Plan ID:\", response.planId);",
                  "        pm.collectionVariables.set(\"buildId\", response.jobId);",
                  "    }",
                  "});",
                  "",
                  "pm.test(\"Response has required fields\", function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('success');",
                  "    pm.expect(response).to.have.property('status');",
                  "    ",
                  "    if (response.status === 'completed') {",
                  "        pm.expect(response).to.have.property('planId');",
                  "        pm.expect(response).to.have.property('taskCount');",
                  "        pm.expect(response).to.have.property('files');",
                  "    }",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Update Project ‚≠ê FAST",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"userId\":\"{{userId}}\",\"projectId\":\"{{projectId}}\",\"prompt\":\"Add a reset button that sets the counter back to 0\"}"
            },
            "url": {
              "raw": "{{baseUrl}}/update-project",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "update-project"
              ]
            },
            "description": "NEW: Fast project updates (30-45s) using context-aware Claude. Automatically finds latest version, skips unchanged dependencies, and preserves existing functionality. Perfect for iterative development!"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// üöÄ Fast Update Test Script",
                  "",
                  "pm.test(\"Update queued successfully\", function () {",
                  "    pm.response.to.have.status(200);",
                  "    ",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.success).to.be.true;",
                  "    pm.expect(response.buildId).to.exist;",
                  "    ",
                  "    console.log(\"‚ö° FAST UPDATE STARTED!\");",
                  "    console.log(\"üìä Response:\", JSON.stringify(response, null, 2));",
                  "    console.log(\"üÜî Build ID:\", response.buildId);",
                  "    console.log(\"üìå Base Version:\", response.baseVersionId);",
                  "    console.log(\"‚è±Ô∏è  Estimated Time:\", response.estimatedTime);",
                  "    ",
                  "    // Auto-set buildId for progress tracking",
                  "    pm.collectionVariables.set(\"buildId\", response.buildId);",
                  "    ",
                  "    console.log(\"\");",
                  "    console.log(\"üí° BENEFITS OF UPDATE vs REBUILD:\");",
                  "    console.log(\"   - Skips dependency install if unchanged\");",
                  "    console.log(\"   - Claude reads project metadata\");",
                  "    console.log(\"   - Preserves existing functionality\");",
                  "    console.log(\"   - 30-45s vs 90-120s!\");",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Project Recommendations ‚≠ê NEW",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectId}}/recommendations?userId={{userId}}&versionId={{versionId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "projects",
                "{{projectId}}",
                "recommendations"
              ],
              "query": [
                {
                  "key": "userId",
                  "value": "{{userId}}",
                  "description": "Optional - helps validate project ownership"
                },
                {
                  "key": "versionId",
                  "value": "{{versionId}}",
                  "description": "Optional - get recommendations for specific version (defaults to latest)"
                }
              ]
            },
            "description": "Get AI-generated recommendations for the next features to add to your project. Each version has its own recommendations based on what was added. Pass versionId to get recommendations for a specific version, or omit to get latest."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Recommendations retrieved\", function () {",
                  "    pm.response.to.have.status(200);",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.success).to.be.true;",
                  "    ",
                  "    console.log(\"üìã PROJECT RECOMMENDATIONS\");",
                  "    console.log(\"=\".repeat(50));",
                  "    ",
                  "    if (response.recommendations && response.recommendations.length > 0) {",
                  "        console.log(`Found ${response.recommendations.length} recommendations:\\n`);",
                  "        ",
                  "        response.recommendations.forEach((rec, index) => {",
                  "            const impactIcon = rec.impact === 'high' ? 'üöÄ' : rec.impact === 'medium' ? 'üìà' : '‚ûï';",
                  "            const complexityColor = rec.complexity === 'high' ? 'üî¥' : rec.complexity === 'medium' ? 'üü°' : 'üü¢';",
                  "            ",
                  "            console.log(`${index + 1}. ${impactIcon} ${rec.title}`);",
                  "            console.log(`   ${rec.description}`);",
                  "            console.log(`   Complexity: ${complexityColor} ${rec.complexity}`);",
                  "            console.log(`   Category: ${rec.category}`);",
                  "            console.log(`   Version hint: ${rec.versionHint || 'patch'}`);",
                  "            console.log(\"\");",
                  "        });",
                  "        ",
                  "        console.log(\"üí° TIP: Copy any recommendation prompt to use with /update-project!\");",
                  "    } else {",
                  "        console.log(\"No recommendations found yet.\");",
                  "        console.log(\"Recommendations are generated after initial project creation.\");",
                  "    }",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Build Recommendations ‚≠ê NEW (Fast)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/v1/builds/{{buildId}}/recommendations?userId={{userId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "builds",
                ""
              ],
              "query": [
                {
                  "key": "userId",
                  "value": "{{userId}}",
                  "description": "Required - User ID for security filtering"
                }
              ]
            },
            "description": "Get AI-generated recommendations for a specific build using buildId (direct lookup - faster than project-based endpoint). Returns standardized recommendation format with consistency guarantees. Requires userId for security isolation."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Build recommendations retrieved\", function () {",
                  "    pm.response.to.have.status(200);",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.success).to.be.true;",
                  "    ",
                  "    console.log(\"üéØ BUILD RECOMMENDATIONS (Direct Lookup)\");",
                  "    console.log(\"=\".repeat(55));",
                  "    console.log(`Build ID: ${response.buildId || 'unknown'}`);",
                  "    console.log(`Project: ${response.projectId || 'unknown'}`);",
                  "    console.log(`Version: ${response.versionId || 'unknown'}`);",
                  "    console.log(\"\");",
                  "    ",
                  "    if (response.recommendations && response.recommendations.length > 0) {",
                  "        console.log(`Found ${response.recommendations.length} standardized recommendations:\\n`);",
                  "        ",
                  "        response.recommendations.forEach((rec, index) => {",
                  "            const priorityIcon = rec.priority === 'high' ? 'üî•' : rec.priority === 'medium' ? '‚ö°' : 'üí°';",
                  "            const impactIcon = rec.impact === 'high' ? 'üöÄ' : rec.impact === 'medium' ? 'üìà' : '‚ûï';",
                  "            const complexityColor = rec.complexity === 'high' ? 'üî¥' : rec.complexity === 'medium' ? 'üü°' : 'üü¢';",
                  "            ",
                  "            console.log(`${index + 1}. ${priorityIcon} ${rec.title} ${impactIcon}`);",
                  "            console.log(`   üìù ${rec.description}`);",
                  "            console.log(`   üéØ Priority: ${rec.priority} | Impact: ${rec.impact} | Complexity: ${complexityColor} ${rec.complexity}`);",
                  "            console.log(`   üì¶ Category: ${rec.category} | Version: ${rec.versionHint || 'patch'}`);",
                  "            console.log(`   ‚ú® Prompt: ${rec.prompt.substring(0, 80)}${rec.prompt.length > 80 ? '...' : ''}`);",
                  "            ",
                  "            // Show legacy fields if present",
                  "            if (rec.files && rec.files.length > 0) {",
                  "                console.log(`   üìÅ Files: ${rec.files.join(', ')}`);",
                  "            }",
                  "            if (rec.steps && rec.steps.length > 0) {",
                  "                console.log(`   üìã Steps: ${rec.steps.length} steps available`);",
                  "            }",
                  "            console.log(\"\");",
                  "        });",
                  "        ",
                  "        console.log(\"üöÄ READY TO USE: Copy any prompt to use with Update Project!\");",
                  "        console.log(\"üìä DATA CONSISTENCY: All recommendations now use standardized structure\");",
                  "    } else {",
                  "        console.log(\"‚è≥ No recommendations found yet.\");",
                  "        console.log(\"Recommendations are generated after build completion (~2-3 minutes).\");",
                  "        console.log(\"This might be a new build - try again in a few minutes.\");",
                  "    }",
                  "});",
                  "",
                  "// Test standardized structure",
                  "pm.test(\"Recommendations have standardized structure\", function () {",
                  "    const response = pm.response.json();",
                  "    if (response.recommendations && response.recommendations.length > 0) {",
                  "        const rec = response.recommendations[0];",
                  "        pm.expect(rec).to.have.property('id');",
                  "        pm.expect(rec).to.have.property('title');",
                  "        pm.expect(rec).to.have.property('description');",
                  "        pm.expect(rec).to.have.property('category');",
                  "        pm.expect(rec).to.have.property('priority');",
                  "        pm.expect(rec).to.have.property('complexity');",
                  "        pm.expect(rec).to.have.property('impact');",
                  "        pm.expect(rec).to.have.property('versionHint');",
                  "        pm.expect(rec).to.have.property('prompt');",
                  "        ",
                  "        // Validate enum values",
                  "        pm.expect(['low', 'medium', 'high']).to.include(rec.priority);",
                  "        pm.expect(['low', 'medium', 'high']).to.include(rec.complexity);",
                  "        pm.expect(['low', 'medium', 'high']).to.include(rec.impact);",
                  "        pm.expect(['patch', 'minor', 'major']).to.include(rec.versionHint);",
                  "    }",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Rebuild Preview",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"userId\":\"{{userId}}\",\"projectId\":\"{{projectId}}\",\"prompt\":\"Add ability to mark todos as complete\",\"baseVersionId\":\"{{versionId}}\"}"
            },
            "url": {
              "raw": "{{baseUrl}}/rebuild-preview",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "rebuild-preview"
              ]
            },
            "description": "Update an existing project - uses the latest version if baseVersionId is not provided"
          }
        },
        {
          "name": "Get Latest Version",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/preview/{{userId}}/{{projectId}}/latest",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "preview",
                "{{userId}}",
                "{{projectId}}",
                "latest"
              ]
            },
            "description": "Get the latest version information for a project"
          }
        }
      ],
      "description": "Core API operations for code generation and project building. Includes both the original build system and the new modular create system."
    },
    {
      "name": "ü§ù SheenApps Friends Referral Program",
      "item": [
        {
          "name": "Partner APIs",
          "item": [
            {
              "name": "Create Partner Account",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-timestamp",
                    "value": "{{timestamp}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-nonce",
                    "value": "{{nonce}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-sig-v2",
                    "value": "{{signature_v2}}",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"company_name\": \"My Marketing Company\",\n  \"website_url\": \"https://example.com\",\n  \"marketing_channels\": [\n    \"blog\",\n    \"youtube\",\n    \"twitter\"\n  ],\n  \"payout_method\": \"stripe\",\n  \"terms_accepted\": true\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/v1/referrals/partners",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "referrals",
                    "partners"
                  ]
                },
                "description": "Creates a new referral partner account for the authenticated user. User ID is derived from HMAC signature - do not include in request body."
              },
              "response": [
                {
                  "name": "Success Response",
                  "originalRequest": {
                    "method": "POST",
                    "header": [],
                    "body": {
                      "mode": "raw",
                      "raw": ""
                    },
                    "url": {
                      "raw": "{{baseUrl}}/v1/referrals/partners",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "v1",
                        "referrals",
                        "partners"
                      ]
                    }
                  },
                  "status": "Created",
                  "code": 201,
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "application/json"
                    }
                  ],
                  "body": "{\n  \"success\": true,\n  \"partner\": {\n    \"id\": \"partner_abc123\",\n    \"partner_code\": \"FRIEND123\",\n    \"tier\": \"bronze\",\n    \"commission_rate\": 15,\n    \"status\": \"active\"\n  },\n  \"referral_link\": \"https://app.sheenapps.com/?ref=FRIEND123\"\n}"
                }
              ],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test(\"Status code is 201\", function () {",
                      "    pm.response.to.have.status(201);",
                      "});",
                      "",
                      "pm.test(\"Response has partner data\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    pm.expect(jsonData.success).to.be.true;",
                      "    pm.expect(jsonData.partner.partner_code).to.exist;",
                      "    pm.expect(jsonData.referral_link).to.exist;",
                      "    ",
                      "    // Store partner code for other requests",
                      "    pm.globals.set(\"partnerCode\", jsonData.partner.partner_code);",
                      "});"
                    ]
                  }
                }
              ]
            },
            {
              "name": "Get Partner Dashboard",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-timestamp",
                    "value": "{{timestamp}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-nonce",
                    "value": "{{nonce}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-sig-v2",
                    "value": "{{signature_v2}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/v1/referrals/dashboard?userId={{userId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "referrals",
                    "dashboard"
                  ],
                  "query": [
                    {
                      "key": "userId",
                      "value": "{{userId}}"
                    }
                  ]
                },
                "description": "Retrieves comprehensive dashboard data including stats, recent referrals, and commissions for the authenticated partner."
              },
              "response": [
                {
                  "name": "Dashboard Data",
                  "status": "OK",
                  "code": 200,
                  "body": "{\n  \"partner\": {\n    \"partner_code\": \"FRIEND123\",\n    \"tier\": \"bronze\",\n    \"commission_rate\": 15,\n    \"successful_referrals\": 5\n  },\n  \"stats\": {\n    \"total_clicks\": 150,\n    \"total_signups\": 8,\n    \"conversion_rate\": 5.33,\n    \"pending_commissions_cents\": 5000,\n    \"estimated_monthly_payout_cents\": 3200\n  }\n}"
                }
              ]
            },
            {
              "name": "Track Referral Click (No Auth Required)",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"partner_code\": \"{{partnerCode}}\",\n  \"ip_address\": \"192.168.1.1\",\n  \"user_agent\": \"Mozilla/5.0 Test Browser\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/v1/referrals/track-click",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "referrals",
                    "track-click"
                  ]
                },
                "description": "Tracks referral link clicks. No authentication required - used by landing pages."
              },
              "response": [
                {
                  "name": "Click Tracked",
                  "status": "OK",
                  "code": 200,
                  "body": "{\n  \"success\": true,\n  \"tracked\": true\n}"
                }
              ]
            },
            {
              "name": "Track Referral Signup",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-timestamp",
                    "value": "{{timestamp}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-nonce",
                    "value": "{{nonce}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-sig-v2",
                    "value": "{{signature_v2}}",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"partner_code\": \"{{partnerCode}}\",\n  \"attribution_method\": \"cookie\",\n  \"utm_source\": \"twitter\",\n  \"utm_medium\": \"social\",\n  \"ip_address\": \"192.168.1.1\",\n  \"user_agent\": \"Mozilla/5.0 Test Browser\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/v1/referrals/signup",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "referrals",
                    "signup"
                  ]
                },
                "description": "Tracks when a referred user successfully signs up. User ID derived from HMAC signature."
              },
              "response": [
                {
                  "name": "Signup Tracked",
                  "status": "Created",
                  "code": 201,
                  "body": "{\n  \"success\": true,\n  \"referral_id\": \"ref_def456\",\n  \"fraud_check\": \"clean\"\n}"
                }
              ]
            }
          ],
          "description": "API endpoints used by referral partners to manage their accounts and track performance."
        },
        {
          "name": "Admin APIs",
          "item": [
            {
              "name": "Admin Overview Dashboard",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}",
                    "type": "text"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/v1/admin/referrals/overview?days=30",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "admin",
                    "referrals",
                    "overview"
                  ],
                  "query": [
                    {
                      "key": "days",
                      "value": "30",
                      "description": "Number of days for recent activity stats"
                    }
                  ]
                },
                "description": "Provides comprehensive overview statistics for the referral program including partner counts, commission totals, and recent activity."
              },
              "response": [
                {
                  "name": "Overview Stats",
                  "status": "OK",
                  "code": 200,
                  "body": "{\n  \"total_partners\": 245,\n  \"active_partners\": 198,\n  \"total_referrals\": 1850,\n  \"successful_referrals\": 1420,\n  \"total_paid_cents\": 125000000,\n  \"pending_payout_cents\": 45000000,\n  \"conversion_rate\": 76.76\n}"
                }
              ]
            },
            {
              "name": "Get All Partners",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}",
                    "type": "text"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/v1/admin/referrals/partners?status=active&limit=50&offset=0",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "admin",
                    "referrals",
                    "partners"
                  ],
                  "query": [
                    {
                      "key": "status",
                      "value": "active",
                      "description": "Filter by status: active, paused, suspended"
                    },
                    {
                      "key": "limit",
                      "value": "50",
                      "description": "Results per page"
                    },
                    {
                      "key": "offset",
                      "value": "0",
                      "description": "Pagination offset"
                    }
                  ]
                },
                "description": "Retrieves all referral partners with filtering and pagination options."
              }
            },
            {
              "name": "Update Partner Status",
              "request": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}",
                    "type": "text"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"status\": \"suspended\",\n  \"reason\": \"Terms of service violation - spam referrals\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/v1/admin/referrals/partners/{{partnerId}}/status",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "admin",
                    "referrals",
                    "partners",
                    "{{partnerId}}",
                    "status"
                  ]
                },
                "description": "Updates a partner status (active, paused, suspended) with optional reason."
              }
            },
            {
              "name": "Get Pending Commissions",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}",
                    "type": "text"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/v1/admin/referrals/commissions/pending?limit=100&offset=0",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "admin",
                    "referrals",
                    "commissions",
                    "pending"
                  ],
                  "query": [
                    {
                      "key": "limit",
                      "value": "100"
                    },
                    {
                      "key": "offset",
                      "value": "0"
                    }
                  ]
                },
                "description": "Retrieves commissions pending admin approval for payout processing."
              }
            },
            {
              "name": "Approve Commissions",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}",
                    "type": "text"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"commission_ids\": [\n    \"{{commissionId}}\",\n    \"comm_example2\",\n    \"comm_example3\"\n  ]\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/v1/admin/referrals/commissions/approve",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "admin",
                    "referrals",
                    "commissions",
                    "approve"
                  ]
                },
                "description": "Approves multiple commissions for payout processing."
              }
            },
            {
              "name": "Create Payout Batch",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}",
                    "type": "text"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"payout_method\": \"stripe\",\n  \"minimum_amount_cents\": 5000,\n  \"description\": \"Monthly payout - September 2025\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/v1/admin/referrals/payouts/batch",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "admin",
                    "referrals",
                    "payouts",
                    "batch"
                  ]
                },
                "description": "Creates a payout batch from approved commissions."
              }
            },
            {
              "name": "Get Payout Batches",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}",
                    "type": "text"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/v1/admin/referrals/payouts/batches?status=completed&limit=50",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "admin",
                    "referrals",
                    "payouts",
                    "batches"
                  ],
                  "query": [
                    {
                      "key": "status",
                      "value": "completed"
                    },
                    {
                      "key": "limit",
                      "value": "50"
                    }
                  ]
                },
                "description": "Retrieves payout batches with filtering and pagination."
              }
            },
            {
              "name": "Get Fraud Alerts",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}",
                    "type": "text"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/v1/admin/referrals/fraud/alerts?days=7",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "admin",
                    "referrals",
                    "fraud",
                    "alerts"
                  ],
                  "query": [
                    {
                      "key": "days",
                      "value": "7",
                      "description": "Number of days to look back for alerts"
                    }
                  ]
                },
                "description": "Retrieves fraud detection alerts for admin review and investigation."
              }
            }
          ],
          "description": "Administrative endpoints for managing referral partners, approving commissions, and processing payouts."
        }
      ],
      "description": "Complete referral program API endpoints for partners and administrators. Includes partner onboarding, dashboard, commission tracking, and admin management tools.",
      "event": [
        {
          "listen": "prerequest",
          "script": {
            "type": "text/javascript",
            "exec": [
              "console.log(\"Referral API request - HMAC signature will be generated\");"
            ]
          }
        }
      ]
    },
    {
      "name": "üì¶ Source Code Export",
      "description": "Endpoints for exporting project source code as downloadable archives",
      "item": [
        {
          "name": "Initiate Export",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"exportType\": \"full\",\n  \"format\": \"zip\",\n  \"includeNodeModules\": false,\n  \"includeBuildFiles\": false\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/v1/projects/{{projectId}}/export",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "projects",
                "{{projectId}}",
                "export"
              ]
            },
            "description": "Initiates an export job for the specified project. Returns a job ID that can be used to check status and download the export when ready.\n\n**Parameters:**\n- `exportType`: Type of export (\"full\", \"source-only\", \"config-only\")\n- `format`: Archive format (\"zip\", \"tar.gz\")\n- `includeNodeModules`: Whether to include node_modules directory (boolean)\n- `includeBuildFiles`: Whether to include build output files (boolean)\n\n**Rate Limits:**\n- 5 exports per hour per user\n- Maximum 3 concurrent export jobs per user\n\n**Example Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"jobId\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"status\": \"queued\",\n    \"estimatedDuration\": \"2-5 minutes\",\n    \"createdAt\": \"2025-08-02T10:30:00Z\"\n  }\n}\n```"
          },
          "response": [
            {
              "name": "Export Initiated Successfully",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "X-API-Key",
                    "value": "{{apiKey}}"
                  },
                  {
                    "key": "X-Timestamp",
                    "value": "1722600000"
                  },
                  {
                    "key": "X-Signature",
                    "value": "example_signature_hash"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"userId\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"exportType\": \"full\",\n  \"format\": \"zip\",\n  \"includeNodeModules\": false,\n  \"includeBuildFiles\": false\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/v1/projects/{{projectId}}/export",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "projects",
                    "{{projectId}}",
                    "export"
                  ]
                }
              },
              "status": "Accepted",
              "code": 202,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n  \"success\": true,\n  \"data\": {\n    \"jobId\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"status\": \"queued\",\n    \"estimatedDuration\": \"2-5 minutes\",\n    \"exportType\": \"full\",\n    \"format\": \"zip\",\n    \"createdAt\": \"2025-08-02T10:30:00Z\"\n  }\n}"
            },
            {
              "name": "Rate Limit Exceeded",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "X-API-Key",
                    "value": "{{apiKey}}"
                  },
                  {
                    "key": "X-Timestamp",
                    "value": "1722600000"
                  },
                  {
                    "key": "X-Signature",
                    "value": "example_signature_hash"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"userId\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"exportType\": \"full\",\n  \"format\": \"zip\",\n  \"includeNodeModules\": false,\n  \"includeBuildFiles\": false\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/v1/projects/{{projectId}}/export",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "projects",
                    "{{projectId}}",
                    "export"
                  ]
                }
              },
              "status": "Too Many Requests",
              "code": 429,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n  \"success\": false,\n  \"error\": {\n    \"code\": \"RATE_LIMIT_EXCEEDED\",\n    \"message\": \"Export rate limit exceeded. Maximum 5 exports per hour allowed.\",\n    \"resetTime\": \"2025-08-02T11:30:00Z\"\n  }\n}"
            }
          ],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Set up HMAC authentication",
                  "const crypto = require('crypto');",
                  "",
                  "// Get environment variables",
                  "const baseUrl = pm.environment.get('baseUrl');",
                  "const apiKey = pm.environment.get('apiKey');",
                  "const secretKey = pm.environment.get('secretKey');",
                  "",
                  "if (!apiKey || !secretKey) {",
                  "    console.error('Missing apiKey or secretKey in environment');",
                  "    return;",
                  "}",
                  "",
                  "// Create timestamp",
                  "const timestamp = Math.floor(Date.now() / 1000).toString();",
                  "",
                  "// Get request body (if any)",
                  "let body = '';",
                  "if (pm.request.body && pm.request.body.raw) {",
                  "    body = pm.request.body.raw;",
                  "}",
                  "",
                  "// Create signature string: method + url + timestamp + body",
                  "const method = pm.request.method;",
                  "const url = pm.request.url.toString();",
                  "const signatureString = method + url + timestamp + body;",
                  "",
                  "// Generate HMAC signature",
                  "const hmac = crypto.createHmac('sha256', secretKey);",
                  "hmac.update(signatureString);",
                  "const signature = hmac.digest('hex');",
                  "",
                  "// Set headers",
                  "pm.request.headers.add({",
                  "    key: 'X-API-Key',",
                  "    value: apiKey",
                  "});",
                  "pm.request.headers.add({",
                  "    key: 'X-Timestamp', ",
                  "    value: timestamp",
                  "});",
                  "pm.request.headers.add({",
                  "    key: 'X-Signature',",
                  "    value: signature",
                  "});",
                  "pm.request.headers.add({",
                  "    key: 'Content-Type',",
                  "    value: 'application/json'",
                  "});"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is successful\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 201, 202]);",
                  "});",
                  "",
                  "pm.test(\"Response has required structure\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('success');",
                  "});",
                  "",
                  "// Store response data for use in other requests",
                  "if (pm.response.code === 200 || pm.response.code === 201 || pm.response.code === 202) {",
                  "    const jsonData = pm.response.json();",
                  "    ",
                  "    // Store jobId if present for subsequent requests",
                  "    if (jsonData.data && jsonData.data.jobId) {",
                  "        pm.environment.set('exportJobId', jsonData.data.jobId);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Check Export Status",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/v1/export-jobs/{{exportJobId}}/status?userId={{userId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "export-jobs",
                "{{exportJobId}}",
                "status"
              ],
              "query": [
                {
                  "key": "userId",
                  "value": "{{userId}}"
                }
              ]
            },
            "description": "Checks the status of an export job using the job ID returned from the initiate export endpoint.\n\n**Path Parameters:**\n- `jobId`: UUID of the export job\n\n**Query Parameters:**\n- `userId`: ID of the user who initiated the export\n\n**Possible Status Values:**\n- `queued`: Export job is waiting to be processed\n- `processing`: Export is currently being generated\n- `completed`: Export is ready for download\n- `failed`: Export job failed (check error details)\n- `expired`: Export download link has expired (24 hour TTL)\n\n**Example Response (Processing):**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"jobId\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"status\": \"processing\",\n    \"progress\": 65,\n    \"currentStep\": \"Compressing files\",\n    \"estimatedTimeRemaining\": \"1-2 minutes\",\n    \"createdAt\": \"2025-08-02T10:30:00Z\"\n  }\n}\n```\n\n**Example Response (Completed):**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"jobId\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"status\": \"completed\",\n    \"downloadUrl\": \"/v1/export-jobs/550e8400-e29b-41d4-a716-446655440000/download\",\n    \"fileSizeBytes\": 2048576,\n    \"expiresAt\": \"2025-08-03T10:30:00Z\",\n    \"completedAt\": \"2025-08-02T10:35:00Z\"\n  }\n}\n```"
          },
          "response": [
            {
              "name": "Export In Progress",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "X-API-Key",
                    "value": "{{apiKey}}"
                  },
                  {
                    "key": "X-Timestamp",
                    "value": "1722600000"
                  },
                  {
                    "key": "X-Signature",
                    "value": "example_signature_hash"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/v1/export-jobs/{{exportJobId}}/status?userId={{userId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "export-jobs",
                    "{{exportJobId}}",
                    "status"
                  ],
                  "query": [
                    {
                      "key": "userId",
                      "value": "{{userId}}"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n  \"success\": true,\n  \"data\": {\n    \"jobId\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"status\": \"processing\",\n    \"progress\": 65,\n    \"currentStep\": \"Compressing files\",\n    \"estimatedTimeRemaining\": \"1-2 minutes\",\n    \"createdAt\": \"2025-08-02T10:30:00Z\",\n    \"exportType\": \"full\",\n    \"format\": \"zip\"\n  }\n}"
            },
            {
              "name": "Export Completed",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "X-API-Key",
                    "value": "{{apiKey}}"
                  },
                  {
                    "key": "X-Timestamp",
                    "value": "1722600000"
                  },
                  {
                    "key": "X-Signature",
                    "value": "example_signature_hash"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/v1/export-jobs/{{exportJobId}}/status?userId={{userId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "export-jobs",
                    "{{exportJobId}}",
                    "status"
                  ],
                  "query": [
                    {
                      "key": "userId",
                      "value": "{{userId}}"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n  \"success\": true,\n  \"data\": {\n    \"jobId\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"status\": \"completed\",\n    \"downloadUrl\": \"/v1/export-jobs/550e8400-e29b-41d4-a716-446655440000/download\",\n    \"fileSizeBytes\": 2048576,\n    \"fileName\": \"my-project-export.zip\",\n    \"expiresAt\": \"2025-08-03T10:30:00Z\",\n    \"completedAt\": \"2025-08-02T10:35:00Z\",\n    \"exportType\": \"full\",\n    \"format\": \"zip\"\n  }\n}"
            },
            {
              "name": "Export Job Not Found",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "X-API-Key",
                    "value": "{{apiKey}}"
                  },
                  {
                    "key": "X-Timestamp",
                    "value": "1722600000"
                  },
                  {
                    "key": "X-Signature",
                    "value": "example_signature_hash"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/v1/export-jobs/invalid-job-id/status?userId={{userId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "export-jobs",
                    "invalid-job-id",
                    "status"
                  ],
                  "query": [
                    {
                      "key": "userId",
                      "value": "{{userId}}"
                    }
                  ]
                }
              },
              "status": "Not Found",
              "code": 404,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n  \"success\": false,\n  \"error\": {\n    \"code\": \"EXPORT_JOB_NOT_FOUND\",\n    \"message\": \"Export job not found or access denied\"\n  }\n}"
            }
          ],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Set up HMAC authentication",
                  "const crypto = require('crypto');",
                  "",
                  "// Get environment variables",
                  "const baseUrl = pm.environment.get('baseUrl');",
                  "const apiKey = pm.environment.get('apiKey');",
                  "const secretKey = pm.environment.get('secretKey');",
                  "",
                  "if (!apiKey || !secretKey) {",
                  "    console.error('Missing apiKey or secretKey in environment');",
                  "    return;",
                  "}",
                  "",
                  "// Create timestamp",
                  "const timestamp = Math.floor(Date.now() / 1000).toString();",
                  "",
                  "// Get request body (if any)",
                  "let body = '';",
                  "if (pm.request.body && pm.request.body.raw) {",
                  "    body = pm.request.body.raw;",
                  "}",
                  "",
                  "// Create signature string: method + url + timestamp + body",
                  "const method = pm.request.method;",
                  "const url = pm.request.url.toString();",
                  "const signatureString = method + url + timestamp + body;",
                  "",
                  "// Generate HMAC signature",
                  "const hmac = crypto.createHmac('sha256', secretKey);",
                  "hmac.update(signatureString);",
                  "const signature = hmac.digest('hex');",
                  "",
                  "// Set headers",
                  "pm.request.headers.add({",
                  "    key: 'X-API-Key',",
                  "    value: apiKey",
                  "});",
                  "pm.request.headers.add({",
                  "    key: 'X-Timestamp', ",
                  "    value: timestamp",
                  "});",
                  "pm.request.headers.add({",
                  "    key: 'X-Signature',",
                  "    value: signature",
                  "});",
                  "pm.request.headers.add({",
                  "    key: 'Content-Type',",
                  "    value: 'application/json'",
                  "});"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is successful\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 201, 202]);",
                  "});",
                  "",
                  "pm.test(\"Response has required structure\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('success');",
                  "});",
                  "",
                  "// Store response data for use in other requests",
                  "if (pm.response.code === 200 || pm.response.code === 201 || pm.response.code === 202) {",
                  "    const jsonData = pm.response.json();",
                  "    ",
                  "    // Store jobId if present for subsequent requests",
                  "    if (jsonData.data && jsonData.data.jobId) {",
                  "        pm.environment.set('exportJobId', jsonData.data.jobId);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Download Export",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/v1/export-jobs/{{exportJobId}}/download?userId={{userId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "export-jobs",
                "{{exportJobId}}",
                "download"
              ],
              "query": [
                {
                  "key": "userId",
                  "value": "{{userId}}"
                }
              ]
            },
            "description": "Downloads the completed export file. This endpoint returns the actual file content as a binary response.\n\n**Path Parameters:**\n- `jobId`: UUID of the completed export job\n\n**Query Parameters:**\n- `userId`: ID of the user who initiated the export\n\n**Important Notes:**\n- Export files are available for 24 hours after completion\n- Downloads are logged for security audit purposes\n- Large exports may take time to transfer depending on connection speed\n- The response will include appropriate `Content-Disposition` header for file download\n\n**Response Headers:**\n- `Content-Type`: `application/zip` or `application/gzip` depending on format\n- `Content-Disposition`: `attachment; filename=\"project-export.zip\"`\n- `Content-Length`: Size of the file in bytes\n\n**Error Responses:**\n- `404`: Export job not found or expired\n- `403`: Access denied (wrong user)\n- `410`: Export file has been deleted/expired"
          },
          "response": [
            {
              "name": "Download Success (Binary Response)",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "X-API-Key",
                    "value": "{{apiKey}}"
                  },
                  {
                    "key": "X-Timestamp",
                    "value": "1722600000"
                  },
                  {
                    "key": "X-Signature",
                    "value": "example_signature_hash"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/v1/export-jobs/{{exportJobId}}/download?userId={{userId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "export-jobs",
                    "{{exportJobId}}",
                    "download"
                  ],
                  "query": [
                    {
                      "key": "userId",
                      "value": "{{userId}}"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "raw",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/zip"
                },
                {
                  "key": "Content-Disposition",
                  "value": "attachment; filename=\"my-project-export.zip\""
                },
                {
                  "key": "Content-Length",
                  "value": "2048576"
                }
              ],
              "body": "[Binary ZIP file content - not displayed in Postman]"
            },
            {
              "name": "Export Expired",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "X-API-Key",
                    "value": "{{apiKey}}"
                  },
                  {
                    "key": "X-Timestamp",
                    "value": "1722600000"
                  },
                  {
                    "key": "X-Signature",
                    "value": "example_signature_hash"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/v1/export-jobs/{{exportJobId}}/download?userId={{userId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "export-jobs",
                    "{{exportJobId}}",
                    "download"
                  ],
                  "query": [
                    {
                      "key": "userId",
                      "value": "{{userId}}"
                    }
                  ]
                }
              },
              "status": "Gone",
              "code": 410,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n  \"success\": false,\n  \"error\": {\n    \"code\": \"EXPORT_EXPIRED\",\n    \"message\": \"Export file has expired and is no longer available for download\",\n    \"expiredAt\": \"2025-08-03T10:30:00Z\"\n  }\n}"
            }
          ],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Set up HMAC authentication",
                  "const crypto = require('crypto');",
                  "",
                  "// Get environment variables",
                  "const baseUrl = pm.environment.get('baseUrl');",
                  "const apiKey = pm.environment.get('apiKey');",
                  "const secretKey = pm.environment.get('secretKey');",
                  "",
                  "if (!apiKey || !secretKey) {",
                  "    console.error('Missing apiKey or secretKey in environment');",
                  "    return;",
                  "}",
                  "",
                  "// Create timestamp",
                  "const timestamp = Math.floor(Date.now() / 1000).toString();",
                  "",
                  "// Get request body (if any)",
                  "let body = '';",
                  "if (pm.request.body && pm.request.body.raw) {",
                  "    body = pm.request.body.raw;",
                  "}",
                  "",
                  "// Create signature string: method + url + timestamp + body",
                  "const method = pm.request.method;",
                  "const url = pm.request.url.toString();",
                  "const signatureString = method + url + timestamp + body;",
                  "",
                  "// Generate HMAC signature",
                  "const hmac = crypto.createHmac('sha256', secretKey);",
                  "hmac.update(signatureString);",
                  "const signature = hmac.digest('hex');",
                  "",
                  "// Set headers",
                  "pm.request.headers.add({",
                  "    key: 'X-API-Key',",
                  "    value: apiKey",
                  "});",
                  "pm.request.headers.add({",
                  "    key: 'X-Timestamp', ",
                  "    value: timestamp",
                  "});",
                  "pm.request.headers.add({",
                  "    key: 'X-Signature',",
                  "    value: signature",
                  "});",
                  "pm.request.headers.add({",
                  "    key: 'Content-Type',",
                  "    value: 'application/json'",
                  "});"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200 for successful download\", function () {",
                  "    pm.expect(pm.response.code).to.equal(200);",
                  "});",
                  "",
                  "pm.test(\"Response has correct Content-Type header\", function () {",
                  "    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/');",
                  "});",
                  "",
                  "pm.test(\"Response has Content-Disposition header\", function () {",
                  "    pm.expect(pm.response.headers.get('Content-Disposition')).to.include('attachment');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Version Management",
      "item": [
        {
          "name": "List Project Versions",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/v1/versions/list/{{userId}}/{{projectId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "versions",
                "{{userId}}",
                "{{projectId}}"
              ]
            },
            "description": "List all versions for a project (up to 200)"
          }
        },
        {
          "name": "Get Version Details",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/v1/versions/detail/{{versionId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "versions",
                "{{versionId}}"
              ]
            },
            "description": "Get detailed information about a specific version"
          }
        },
        {
          "name": "Version Diff (Stats)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/v1/versions/detail/{{versionId}}/diff/01HY123456789?mode=stats",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "versions",
                "{{versionId}}",
                "diff",
                "01HY123456789"
              ],
              "query": [
                {
                  "key": "mode",
                  "value": "stats",
                  "description": "stats or patch"
                }
              ]
            },
            "description": "Get statistics about changes between two versions"
          }
        },
        {
          "name": "Version Diff (Patch)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/v1/versions/detail/{{versionId}}/diff/01HY123456789?mode=patch",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "versions",
                "{{versionId}}",
                "diff",
                "01HY123456789"
              ],
              "query": [
                {
                  "key": "mode",
                  "value": "patch"
                }
              ]
            },
            "description": "Get the git diff patch between two versions"
          }
        },
        {
          "name": "Rollback Version (Production-Ready)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-sheen-signature",
                "value": "{{hmacSignature}}"
              },
              {
                "key": "Idempotency-Key",
                "value": "rollback-{{projectId}}-{{$timestamp}}",
                "description": "Optional: Prevents duplicate rollbacks (24h cache)"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"projectId\": \"{{projectId}}\",\n  \"targetVersionId\": \"{{versionId}}\",\n  \"skipWorkingDirectory\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/versions/rollback",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "versions",
                "rollback"
              ]
            },
            "description": "üöÄ Production-ready rollback with immediate response and background sync\n\n‚ú® NEW FEATURES:\n- ‚ö° Immediate preview URL update (< 1 second)\n- üîÑ Background working directory sync\n- üîí Redis locking prevents concurrent rollbacks\n- üîë Idempotency protection with 24h cache\n- üõ°Ô∏è Timing-safe HMAC signature verification\n- üìä Build queue management during rollback\n- üéØ Publication-first architecture (rollback creates unpublished version)\n\nüìù RESPONSE STATES:\n- rollingBack: Background sync in progress\n- deployed: Rollback completed\n- rollbackFailed: Sync failed, preview reverted\n\n‚ö†Ô∏è AUTHENTICATION REQUIRED:\nThis endpoint requires HMAC-SHA256 signature in x-sheen-signature header.\n\nüîÑ BUILD BEHAVIOR:\nNew builds are automatically queued during rollback and processed after completion.\n\nüìã ENVIRONMENT VARIABLES:\n- MAX_ROLLBACK_DURATION_SECONDS: Lock TTL (default: 300s)\n- Can be increased for large artifacts"
          }
        },
        {
          "name": "Rebuild Version",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "{{baseUrl}}/v1/versions/detail/{{versionId}}/rebuild",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "versions",
                "{{versionId}}",
                "rebuild"
              ]
            },
            "description": "Trigger a rebuild of a specific version"
          }
        },
        {
          "name": "Export Latest Project",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Generate HMAC signature: canonical = body + path",
                  "const secret = pm.variables.get('sharedSecret');",
                  "const body = '';",
                  "const path = pm.request.url.getPath();",
                  "  const canonical = timestamp + body;  // CORRECT v1 format: timestamp + body",
                  "const signature = CryptoJS.HmacSHA256(canonical, secret).toString();",
                  "pm.request.headers.add({key: 'x-sheen-signature', value: signature });\n  pm.request.headers.add({key: 'x-sheen-timestamp', value: timestamp });\n  pm.request.headers.add({key: 'x-sheen-nonce', value: Math.random().toString(36).substring(2) });",
                  "",
                  "console.log('Generated signature for path:', path);",
                  "console.log('Canonical string:', canonical);",
                  "console.log('Signature:', signature);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/v1/projects/{{projectId}}/export?userId={{userId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "projects",
                "{{projectId}}",
                "export"
              ],
              "query": [
                {
                  "key": "userId",
                  "value": "{{userId}}"
                }
              ]
            },
            "description": "Export the latest version of a project as a downloadable ZIP file. Returns a 24-hour signed URL for secure downloads.\n\n‚≠ê **Features:**\n- Secure signed URLs (24-hour expiry)\n- Artifact integrity verification\n- Size limits for safe downloads (2GB max)\n- Ownership verification\n\nüîí **Security:** Requires HMAC signature authentication\n\nüì• **Usage:** Perfect for user data portability, backups, and version management"
          }
        },
        {
          "name": "Download Specific Version",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Generate HMAC signature: canonical = body + path",
                  "const secret = pm.variables.get('sharedSecret');",
                  "const body = '';",
                  "const path = pm.request.url.getPath();",
                  "  const canonical = timestamp + body;  // CORRECT v1 format: timestamp + body",
                  "const signature = CryptoJS.HmacSHA256(canonical, secret).toString();",
                  "pm.request.headers.add({key: 'x-sheen-signature', value: signature });\n  pm.request.headers.add({key: 'x-sheen-timestamp', value: timestamp });\n  pm.request.headers.add({key: 'x-sheen-nonce', value: Math.random().toString(36).substring(2) });",
                  "",
                  "console.log('Generated signature for path:', path);",
                  "console.log('Canonical string:', canonical);",
                  "console.log('Signature:', signature);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/v1/versions/detail/{{versionId}}/download?userId={{userId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "versions",
                "{{versionId}}",
                "download"
              ],
              "query": [
                {
                  "key": "userId",
                  "value": "{{userId}}"
                }
              ]
            },
            "description": "Download a specific project version by version ID. Returns a 24-hour signed URL for secure downloads.\n\n‚≠ê **Features:**\n- Download any historical version\n- Secure signed URLs with 24-hour expiry\n- SHA256 checksum verification\n- Rebuild suggestion for missing artifacts\n\nüîí **Security:** Requires HMAC signature authentication\n\nüí° **Special Response:** If artifact is missing, returns 404 with rebuild option:\n```json\n{\n  \"error\": \"Artifact not available\",\n  \"canRebuild\": true,\n  \"rebuildUrl\": \"/v1/versions/{versionId}/rebuild\"\n}\n```"
          }
        }
      ]
    },
    {
      "name": "Progress Tracking ‚≠ê NEW",
      "item": [
        {
          "name": "Get Clean Build Events ‚≠ê NextJS Team API",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/v1/builds/{{buildId}}/events?userId={{userId}}&lastEventId={{lastEventId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "builds",
                ""
              ],
              "query": [
                {
                  "key": "userId",
                  "value": "{{userId}}",
                  "description": "REQUIRED - User ID for security filtering"
                },
                {
                  "key": "lastEventId",
                  "value": "{{lastEventId}}",
                  "description": "Optional - only return events after this ID (for incremental polling)"
                }
              ]
            },
            "description": "‚≠ê **NEW CLEAN EVENT API FOR NEXTJS TEAM**\n\nGet structured, secure build events designed for frontend integration:\n\n‚úÖ **Benefits:**\n- üèóÔ∏è No more string parsing - clean `title`, `description`, `phase` fields\n- üìä Single `overall_progress` (0.0-1.0) for progress bars\n- ‚úÖ Boolean `finished` flag for reliable completion detection\n- üîí Security filtered - no file paths, UUIDs, or sensitive data\n- üîÑ Incremental polling with `lastEventId` parameter\n\nüîí **Security:** All sensitive data (file paths, UUIDs, stack traces) automatically filtered from user-facing events.\n\nüìä **Progress Tracking:** Use `overall_progress` (0.0-1.0) directly in progress bars. When `finished: true`, build is complete.\n\n‚ö° **Polling Pattern:** Start with `lastEventId=0`, then use returned `lastEventId` for incremental updates every 2-3 seconds."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// üéØ NextJS Team - Clean Events Test",
                  "",
                  "pm.test(\"Clean events response is valid\", function () {",
                  "    pm.response.to.have.status(200);",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('buildId');",
                  "    pm.expect(response).to.have.property('events');",
                  "    pm.expect(response).to.have.property('lastEventId');",
                  "    pm.expect(response.events).to.be.an('array');",
                  "});",
                  "",
                  "const response = pm.response.json();",
                  "const events = response.events || [];",
                  "",
                  "console.log('üéØ CLEAN EVENTS API - NEXTJS TEAM');",
                  "console.log('='.repeat(50));",
                  "console.log(`üèóÔ∏è Build ID: ${response.buildId}`);",
                  "console.log(`üìä Event Count: ${events.length}`);",
                  "console.log(`üîÑ Last Event ID: ${response.lastEventId}`);",
                  "console.log('');",
                  "",
                  "if (events.length > 0) {",
                  "    console.log('üìÑ LATEST EVENTS:');",
                  "    console.log('-'.repeat(30));",
                  "    ",
                  "    events.slice(-3).forEach((event, index) => {",
                  "        const progressBar = '‚ñà'.repeat(Math.floor(event.overall_progress * 20)) + '‚ñë'.repeat(20 - Math.floor(event.overall_progress * 20));",
                  "        const statusIcon = event.event_type === 'completed' ? '‚úÖ' : event.event_type === 'failed' ? '‚ùå' : event.event_type === 'progress' ? 'üîÑ' : 'üöÄ';",
                  "        const finishedIcon = event.finished ? ' üèÅ' : '';",
                  "        ",
                  "        console.log(`${statusIcon} [${event.phase.toUpperCase()}] ${event.title}${finishedIcon}`);",
                  "        console.log(`   ${event.description}`);",
                  "        console.log(`   Progress: [${progressBar}] ${Math.round(event.overall_progress * 100)}%`);",
                  "        console.log(`   Created: ${new Date(event.created_at).toLocaleTimeString()}`);",
                  "        ",
                  "        if (event.preview_url) {",
                  "            console.log(`   üåê Preview: ${event.preview_url}`);",
                  "            pm.collectionVariables.set('lastPreviewUrl', event.preview_url);",
                  "        }",
                  "        ",
                  "        if (event.error_message) {",
                  "            console.log(`   üö® Error: ${event.error_message}`);",
                  "        }",
                  "        ",
                  "        // üÜï Show version information if available",
                  "        if (event.versionId || event.versionName) {",
                  "            console.log(`   üì¶ Version: ${event.versionName || 'Processing...'} (${event.versionId || 'N/A'})`);",
                  "            if (event.versionId) pm.collectionVariables.set('versionId', event.versionId);",
                  "        }",
                  "        ",
                  "        console.log('');",
                  "    });",
                  "    ",
                  "    // Update lastEventId for next poll",
                  "    pm.collectionVariables.set('lastEventId', response.lastEventId);",
                  "    ",
                  "    // Check if build is finished",
                  "    const lastEvent = events[events.length - 1];",
                  "    if (lastEvent && lastEvent.finished) {",
                  "        console.log('üèÅ BUILD COMPLETED!');",
                  "        if (lastEvent.event_type === 'completed') {",
                  "            console.log('‚úÖ Status: SUCCESS');",
                  "        } else if (lastEvent.event_type === 'failed') {",
                  "            console.log('‚ùå Status: FAILED');",
                  "        }",
                  "    } else {",
                  "        console.log('‚è≥ Build still in progress - poll again in 2-3 seconds');",
                  "    }",
                  "} else {",
                  "    console.log('üìã No new events since lastEventId:', pm.variables.get('lastEventId'));",
                  "}",
                  "",
                  "console.log('');",
                  "console.log('üìù NEXTJS INTEGRATION NOTES:');",
                  "console.log('‚Ä¢ Use overall_progress (0.0-1.0) directly in progress bars');",
                  "console.log('‚Ä¢ Check finished: true for completion');",
                  "console.log('‚Ä¢ No string parsing needed - use structured fields');",
                  "console.log('‚Ä¢ All sensitive data filtered out for security');",
                  "console.log('‚Ä¢ Poll every 2-3 seconds with incremental lastEventId');"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Build Status (Clean Events)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/v1/builds/{{buildId}}/status?userId={{userId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "builds",
                ""
              ],
              "query": [
                {
                  "key": "userId",
                  "value": "{{userId}}",
                  "description": "REQUIRED - User ID for security filtering"
                }
              ]
            },
            "description": "Get aggregated build status based on clean events. Returns current phase, progress percentage (0-100), and completion status. Use jobId from build endpoints as buildId.\n\n‚¨ÜÔ∏è **Updated:** Now uses clean events for accurate status calculation with security filtering."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// üìä Build Status Monitor (Clean Events) with Smart Progress Tracking",
                  "",
                  "pm.test(\"Status response is valid\", function () {",
                  "    pm.response.to.have.status(200);",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('buildId');",
                  "    pm.expect(response).to.have.property('status');",
                  "    pm.expect(response).to.have.property('progress');",
                  "    pm.expect(response).to.have.property('finished');",
                  "    pm.expect(response).to.have.property('currentPhase');",
                  "});",
                  "",
                  "const response = pm.response.json();",
                  "const { buildId, status, progress, previewUrl, error, eventCount, finished, currentPhase } = response;",
                  "",
                  "// Visual progress indicator",
                  "const progressBar = '‚ñà'.repeat(Math.floor(progress/5)) + '‚ñë'.repeat(20 - Math.floor(progress/5));",
                  "const finishedIcon = finished ? ' üèÅ' : '';",
                  "console.log(\"üìä BUILD STATUS REPORT (CLEAN EVENTS)\");",
                  "console.log(\"‚ïê\".repeat(50));",
                  "console.log(`üèóÔ∏è  Build ID: ${buildId}`);",
                  "console.log(`üìà Progress: [${progressBar}] ${progress}%${finishedIcon}`);",
                  "console.log(`üéØ Status: ${status.toUpperCase()}`);",
                  "console.log(`üîÑ Phase: ${currentPhase || 'unknown'}`);",
                  "console.log(`üìù Events: ${eventCount} total`);",
                  "console.log(`‚úÖ Finished: ${finished}`);",
                  "",
                  "// Status-specific guidance (Clean Events)",
                  "switch(status) {",
                  "    case 'starting':",
                  "        console.log('üîÑ Setting up your project...');",
                  "        console.log('‚è±Ô∏è  Expected: ~5-10 seconds');",
                  "        break;",
                  "    case 'developing':",
                  "        console.log('‚öôÔ∏è  AI is creating your application...');",
                  "        console.log('‚è±Ô∏è  Expected: ~30-60 seconds');",
                  "        break;",
                  "    case 'installing':",
                  "        console.log('üì¶ Installing dependencies...');",
                  "        console.log('‚è±Ô∏è  Expected: ~10-30 seconds');",
                  "        break;",
                  "    case 'building':",
                  "        console.log('üî® Building your application...');",
                  "        console.log('‚è±Ô∏è  Expected: ~10-20 seconds');",
                  "        break;",
                  "    case 'deploying':",
                  "        console.log('üöÄ Deploying to Cloudflare...');",
                  "        console.log('‚è±Ô∏è  Expected: ~10-20 seconds');",
                  "        break;",
                  "    case 'completed':",
                  "        console.log('‚úÖ BUILD COMPLETED!');",
                  "        if (previewUrl) {",
                  "            console.log(`üåê Preview URL: ${previewUrl}`);",
                  "            pm.collectionVariables.set('lastPreviewUrl', previewUrl);",
                  "        }",
                  "        break;",
                  "    case 'failed':",
                  "        console.log('‚ùå BUILD FAILED');",
                  "        if (error) console.log(`üêõ Error: ${error}`);",
                  "        break;",
                  "    default:",
                  "        console.log('‚è≥ Waiting for build to start...');",
                  "}",
                  "",
                  "console.log(\"‚ïê\".repeat(50));",
                  "",
                  "if (status !== 'completed' && status !== 'failed') {",
                  "    console.log('üí° TIP: Send this request again in 10-15 seconds to check progress');",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Webhook Status",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/v1/webhooks/status",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "webhooks",
                "status"
              ]
            },
            "description": "Get webhook delivery statistics and configuration status."
          }
        }
      ]
    },
    {
      "name": "Webhooks",
      "item": [
        {
          "name": "Cloudflare Pages Webhook",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "cf-webhook-auth",
                "value": "{{cfWebhookSecret}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"deployment\": {\n    \"id\": \"deploy-123\",\n    \"environment\": \"production\",\n    \"url\": \"https://abc123.pages.dev\",\n    \"aliases\": [],\n    \"created_on\": \"2025-01-21T12:00:00Z\",\n    \"latest_stage\": {\n      \"name\": \"deploy\",\n      \"status\": \"success\",\n      \"ended_on\": \"2025-01-21T12:01:00Z\"\n    }\n  },\n  \"project\": {\n    \"id\": \"proj-123\",\n    \"name\": \"my-app\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/webhooks/cloudflare-callback",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "webhooks",
                "cloudflare-callback"
              ]
            },
            "description": "Webhook endpoint for Cloudflare Pages deployment status updates"
          }
        }
      ]
    },
    {
      "name": "Career Portal üéØ NEW",
      "item": [
        {
          "name": "üìã Public Endpoints",
          "item": [
            {
              "name": "List Jobs",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "x-sheen-locale",
                    "value": "ar",
                    "description": "Locale for response (ar or en)"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/careers/jobs?search=&department=&limit=20&offset=0",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "careers",
                    "jobs"
                  ],
                  "query": [
                    {
                      "key": "search",
                      "value": "",
                      "description": "Search text (trigram matching)"
                    },
                    {
                      "key": "department",
                      "value": "",
                      "description": "Filter by department"
                    },
                    {
                      "key": "location",
                      "value": "",
                      "description": "Filter by location"
                    },
                    {
                      "key": "employment_type",
                      "value": "",
                      "description": "full_time, part_time, contract, internship"
                    },
                    {
                      "key": "experience_level",
                      "value": "",
                      "description": "entry, mid, senior, executive"
                    },
                    {
                      "key": "is_remote",
                      "value": "",
                      "description": "true/false"
                    },
                    {
                      "key": "limit",
                      "value": "20",
                      "description": "Items per page (max 100)"
                    },
                    {
                      "key": "offset",
                      "value": "0",
                      "description": "Pagination offset"
                    }
                  ]
                }
              },
              "response": []
            },
            {
              "name": "Get Job by Slug",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "x-sheen-locale",
                    "value": "ar",
                    "description": "Locale for response (ar or en)"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/careers/jobs/{{jobSlug}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "careers",
                    "jobs",
                    "{{jobSlug}}"
                  ]
                }
              },
              "response": []
            },
            {
              "name": "Submit Application",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "x-sheen-locale",
                    "value": "ar",
                    "description": "Locale for response (ar or en)"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"full_name\": \"Ahmed Mohamed\",\n  \"email\": \"ahmed@example.com\",\n  \"phone\": \"+20123456789\",\n  \"cover_letter\": \"I am interested in this position...\",\n  \"linkedin_url\": \"https://linkedin.com/in/ahmed\",\n  \"portfolio_url\": \"https://ahmed.dev\",\n  \"years_of_experience\": 3,\n  \"resume_file\": \"data:application/pdf;base64,JVBERi0xLjQ...\",\n  \"captcha_token\": \"03AGdBq25...\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/careers/jobs/{{jobId}}/apply",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "careers",
                    "jobs",
                    "{{jobId}}",
                    "apply"
                  ]
                }
              },
              "response": []
            },
            {
              "name": "List Departments",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/careers/departments",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "careers",
                    "departments"
                  ]
                }
              },
              "response": []
            },
            {
              "name": "Get Sitemap Data",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/careers/sitemap",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "careers",
                    "sitemap"
                  ]
                }
              },
              "response": []
            }
          ]
        },
        {
          "name": "üîê Admin Endpoints (HMAC Auth Required)",
          "item": [
            {
              "name": "List All Jobs (Admin)",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "x-sheen-signature",
                    "value": "{{signature}}",
                    "description": "HMAC signature for authentication"
                  },
                  {
                    "key": "x-sheen-timestamp",
                    "value": "{{timestamp}}",
                    "description": "Unix timestamp"
                  },
                  {
                    "key": "x-sheen-nonce",
                    "value": "{{nonce}}",
                    "description": "Random nonce"
                  },
                  {
                    "key": "x-admin-user-id",
                    "value": "admin123",
                    "description": "Admin user ID"
                  },
                  {
                    "key": "x-admin-reason",
                    "value": "Reviewing job listings",
                    "description": "Reason for action (audit trail)"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/admin/careers/jobs?is_active=&search=&limit=50&offset=0",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "admin",
                    "careers",
                    "jobs"
                  ],
                  "query": [
                    {
                      "key": "is_active",
                      "value": "",
                      "description": "Filter by active status"
                    },
                    {
                      "key": "search",
                      "value": "",
                      "description": "Search text"
                    },
                    {
                      "key": "limit",
                      "value": "50",
                      "description": "Items per page"
                    },
                    {
                      "key": "offset",
                      "value": "0",
                      "description": "Pagination offset"
                    }
                  ]
                }
              },
              "response": []
            },
            {
              "name": "Create Job (Admin)",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "x-sheen-signature",
                    "value": "{{signature}}",
                    "description": "HMAC signature for authentication"
                  },
                  {
                    "key": "x-sheen-timestamp",
                    "value": "{{timestamp}}",
                    "description": "Unix timestamp"
                  },
                  {
                    "key": "x-sheen-nonce",
                    "value": "{{nonce}}",
                    "description": "Random nonce"
                  },
                  {
                    "key": "x-admin-user-id",
                    "value": "admin123",
                    "description": "Admin user ID"
                  },
                  {
                    "key": "x-admin-reason",
                    "value": "Creating new job posting",
                    "description": "Reason for action (audit trail)"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"multilingual_title\": {\n    \"ar\": \"\\u0645\\u0637\\u0648\\u0631 \\u0628\\u0631\\u0645\\u062c\\u064a\\u0627\\u062a \\u0623\\u0648\\u0644\",\n    \"en\": \"Senior Software Developer\"\n  },\n  \"multilingual_description\": {\n    \"ar\": \"<p>\\u0646\\u0628\\u062d\\u062b \\u0639\\u0646 \\u0645\\u0637\\u0648\\u0631 \\u0628\\u0631\\u0645\\u062c\\u064a\\u0627\\u062a \\u0645\\u062d\\u062a\\u0631\\u0641...</p>\",\n    \"en\": \"<p>We are looking for an experienced software developer...</p>\"\n  },\n  \"multilingual_requirements\": {\n    \"ar\": \"<ul><li>\\u062e\\u0628\\u0631\\u0629 5+ \\u0633\\u0646\\u0648\\u0627\\u062a</li></ul>\",\n    \"en\": \"<ul><li>5+ years experience</li></ul>\"\n  },\n  \"multilingual_benefits\": {\n    \"ar\": \"<ul><li>\\u062a\\u0623\\u0645\\u064a\\u0646 \\u0635\\u062d\\u064a \\u0634\\u0627\\u0645\\u0644</li></ul>\",\n    \"en\": \"<ul><li>Comprehensive health insurance</li></ul>\"\n  },\n  \"multilingual_location\": {\n    \"ar\": \"\\u0627\\u0644\\u0642\\u0627\\u0647\\u0631\\u0629\\u060c \\u0645\\u0635\\u0631\",\n    \"en\": \"Cairo, Egypt\"\n  },\n  \"department\": \"Engineering\",\n  \"employment_type\": \"full_time\",\n  \"experience_level\": \"senior\",\n  \"salary\": {\n    \"min\": 15000,\n    \"max\": 25000,\n    \"currency\": \"EGP\",\n    \"period\": \"monthly\"\n  },\n  \"is_remote\": true,\n  \"is_featured\": false,\n  \"is_active\": true\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/admin/careers/jobs",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "admin",
                    "careers",
                    "jobs"
                  ]
                }
              },
              "response": []
            },
            {
              "name": "Update Job (Admin)",
              "request": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "x-sheen-signature",
                    "value": "{{signature}}",
                    "description": "HMAC signature for authentication"
                  },
                  {
                    "key": "x-sheen-timestamp",
                    "value": "{{timestamp}}",
                    "description": "Unix timestamp"
                  },
                  {
                    "key": "x-sheen-nonce",
                    "value": "{{nonce}}",
                    "description": "Random nonce"
                  },
                  {
                    "key": "x-admin-user-id",
                    "value": "admin123",
                    "description": "Admin user ID"
                  },
                  {
                    "key": "x-admin-reason",
                    "value": "Updating job details",
                    "description": "Reason for action (audit trail)"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"is_featured\": true,\n  \"salary\": {\n    \"min\": 18000,\n    \"max\": 28000,\n    \"currency\": \"EGP\",\n    \"period\": \"monthly\"\n  }\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/admin/careers/jobs/{{jobId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "admin",
                    "careers",
                    "jobs",
                    "{{jobId}}"
                  ]
                }
              },
              "response": []
            },
            {
              "name": "Delete Job (Admin)",
              "request": {
                "method": "DELETE",
                "header": [
                  {
                    "key": "x-sheen-signature",
                    "value": "{{signature}}",
                    "description": "HMAC signature for authentication"
                  },
                  {
                    "key": "x-sheen-timestamp",
                    "value": "{{timestamp}}",
                    "description": "Unix timestamp"
                  },
                  {
                    "key": "x-sheen-nonce",
                    "value": "{{nonce}}",
                    "description": "Random nonce"
                  },
                  {
                    "key": "x-admin-user-id",
                    "value": "admin123",
                    "description": "Admin user ID"
                  },
                  {
                    "key": "x-admin-reason",
                    "value": "Job no longer available",
                    "description": "Reason for action (audit trail)"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/admin/careers/jobs/{{jobId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "admin",
                    "careers",
                    "jobs",
                    "{{jobId}}"
                  ]
                }
              },
              "response": []
            },
            {
              "name": "List Applications (Admin)",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "x-sheen-signature",
                    "value": "{{signature}}",
                    "description": "HMAC signature for authentication"
                  },
                  {
                    "key": "x-sheen-timestamp",
                    "value": "{{timestamp}}",
                    "description": "Unix timestamp"
                  },
                  {
                    "key": "x-sheen-nonce",
                    "value": "{{nonce}}",
                    "description": "Random nonce"
                  },
                  {
                    "key": "x-admin-user-id",
                    "value": "admin123",
                    "description": "Admin user ID"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/admin/careers/applications?job_id=&status=&search=&limit=50&offset=0",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "admin",
                    "careers",
                    "applications"
                  ],
                  "query": [
                    {
                      "key": "job_id",
                      "value": "",
                      "description": "Filter by job ID"
                    },
                    {
                      "key": "status",
                      "value": "",
                      "description": "Filter by status (new, reviewing, etc)"
                    },
                    {
                      "key": "search",
                      "value": "",
                      "description": "Search by name/email"
                    },
                    {
                      "key": "limit",
                      "value": "50",
                      "description": "Items per page"
                    },
                    {
                      "key": "offset",
                      "value": "0",
                      "description": "Pagination offset"
                    }
                  ]
                }
              },
              "response": []
            },
            {
              "name": "Update Application Status (Admin)",
              "request": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "x-sheen-signature",
                    "value": "{{signature}}",
                    "description": "HMAC signature for authentication"
                  },
                  {
                    "key": "x-sheen-timestamp",
                    "value": "{{timestamp}}",
                    "description": "Unix timestamp"
                  },
                  {
                    "key": "x-sheen-nonce",
                    "value": "{{nonce}}",
                    "description": "Random nonce"
                  },
                  {
                    "key": "x-admin-user-id",
                    "value": "admin123",
                    "description": "Admin user ID"
                  },
                  {
                    "key": "x-admin-reason",
                    "value": "Updating application status",
                    "description": "Reason for action (audit trail)"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"status\": \"reviewing\",\n  \"reviewer_notes\": \"Strong candidate, schedule interview\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/admin/careers/applications/{{applicationId}}/status",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "admin",
                    "careers",
                    "applications",
                    "{{applicationId}}",
                    "status"
                  ]
                }
              },
              "response": []
            },
            {
              "name": "Get Career Stats (Admin)",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "x-sheen-signature",
                    "value": "{{signature}}",
                    "description": "HMAC signature for authentication"
                  },
                  {
                    "key": "x-sheen-timestamp",
                    "value": "{{timestamp}}",
                    "description": "Unix timestamp"
                  },
                  {
                    "key": "x-sheen-nonce",
                    "value": "{{nonce}}",
                    "description": "Random nonce"
                  },
                  {
                    "key": "x-admin-user-id",
                    "value": "admin123",
                    "description": "Admin user ID"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/admin/careers/stats",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "admin",
                    "careers",
                    "stats"
                  ]
                }
              },
              "response": []
            }
          ]
        }
      ]
    },
    {
      "name": "üéØ Advisor Matching System",
      "item": [
        {
          "name": "üìã Core Match Flow",
          "item": [
            {
              "name": "Create Match Request",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC v1 signature",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const body = pm.request.body?.raw || '';",
                      "const timestamp = Math.floor(Date.now() / 1000).toString();",
                      "const nonce = Math.random().toString(36).substring(2, 15);",
                      "",
                      "const crypto = require('crypto-js');",
                      "const message = timestamp + body;",
                      "const signature = crypto.HmacSHA256(message, secret).toString();",
                      "",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-signature',",
                      "    value: signature",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-timestamp',",
                      "    value: timestamp",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-nonce',",
                      "    value: nonce",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-locale',",
                      "    value: 'en'",
                      "});",
                      "",
                      "console.log('HMAC v1 signature generated:', signature);",
                      "console.log('Timestamp:', timestamp);",
                      "console.log('Nonce:', nonce);"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/advisor-matching/match-requests",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "advisor-matching",
                    "match-requests"
                  ]
                },
                "description": "Create a new advisor match request for a project",
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"projectId\": \"{{projectId}}\",\n  \"matchCriteria\": {\n    \"expertise\": [\n      \"frontend\",\n      \"react\"\n    ],\n    \"budget_range\": [\n      1000,\n      5000\n    ],\n    \"timeline\": \"urgent\"\n  },\n  \"expiresInHours\": 2\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                }
              },
              "response": []
            },
            {
              "name": "Get Project Matches",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC v1 signature",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const body = pm.request.body?.raw || '';",
                      "const timestamp = Math.floor(Date.now() / 1000).toString();",
                      "const nonce = Math.random().toString(36).substring(2, 15);",
                      "",
                      "const crypto = require('crypto-js');",
                      "const message = timestamp + body;",
                      "const signature = crypto.HmacSHA256(message, secret).toString();",
                      "",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-signature',",
                      "    value: signature",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-timestamp',",
                      "    value: timestamp",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-nonce',",
                      "    value: nonce",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-locale',",
                      "    value: 'en'",
                      "});",
                      "",
                      "console.log('HMAC v1 signature generated:', signature);",
                      "console.log('Timestamp:', timestamp);",
                      "console.log('Nonce:', nonce);"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/advisor-matching/projects/{{projectId}}/matches?userId={{userId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "advisor-matching",
                    "projects",
                    "{{projectId}}",
                    "matches?userId={{userId}}"
                  ]
                },
                "description": "Get all matches for a specific project"
              },
              "response": []
            },
            {
              "name": "Client Decision - Approve",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC v1 signature",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const body = pm.request.body?.raw || '';",
                      "const timestamp = Math.floor(Date.now() / 1000).toString();",
                      "const nonce = Math.random().toString(36).substring(2, 15);",
                      "",
                      "const crypto = require('crypto-js');",
                      "const message = timestamp + body;",
                      "const signature = crypto.HmacSHA256(message, secret).toString();",
                      "",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-signature',",
                      "    value: signature",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-timestamp',",
                      "    value: timestamp",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-nonce',",
                      "    value: nonce",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-locale',",
                      "    value: 'en'",
                      "});",
                      "",
                      "console.log('HMAC v1 signature generated:', signature);",
                      "console.log('Timestamp:', timestamp);",
                      "console.log('Nonce:', nonce);"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/advisor-matching/matches/match_123/client-decision",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "advisor-matching",
                    "matches",
                    "match_123",
                    "client-decision"
                  ]
                },
                "description": "Client approves the matched advisor",
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"decision\": \"approved\",\n  \"reason\": \"Perfect expertise match\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                }
              },
              "response": []
            },
            {
              "name": "Client Decision - Decline",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC v1 signature",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const body = pm.request.body?.raw || '';",
                      "const timestamp = Math.floor(Date.now() / 1000).toString();",
                      "const nonce = Math.random().toString(36).substring(2, 15);",
                      "",
                      "const crypto = require('crypto-js');",
                      "const message = timestamp + body;",
                      "const signature = crypto.HmacSHA256(message, secret).toString();",
                      "",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-signature',",
                      "    value: signature",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-timestamp',",
                      "    value: timestamp",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-nonce',",
                      "    value: nonce",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-locale',",
                      "    value: 'en'",
                      "});",
                      "",
                      "console.log('HMAC v1 signature generated:', signature);",
                      "console.log('Timestamp:', timestamp);",
                      "console.log('Nonce:', nonce);"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/advisor-matching/matches/match_123/client-decision",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "advisor-matching",
                    "matches",
                    "match_123",
                    "client-decision"
                  ]
                },
                "description": "Client declines the matched advisor",
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"decision\": \"declined\",\n  \"reason\": \"Looking for different expertise\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                }
              },
              "response": []
            },
            {
              "name": "Advisor Decision - Accept",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC v1 signature",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const body = pm.request.body?.raw || '';",
                      "const timestamp = Math.floor(Date.now() / 1000).toString();",
                      "const nonce = Math.random().toString(36).substring(2, 15);",
                      "",
                      "const crypto = require('crypto-js');",
                      "const message = timestamp + body;",
                      "const signature = crypto.HmacSHA256(message, secret).toString();",
                      "",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-signature',",
                      "    value: signature",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-timestamp',",
                      "    value: timestamp",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-nonce',",
                      "    value: nonce",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-locale',",
                      "    value: 'en'",
                      "});",
                      "",
                      "console.log('HMAC v1 signature generated:', signature);",
                      "console.log('Timestamp:', timestamp);",
                      "console.log('Nonce:', nonce);"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/advisor-matching/matches/match_123/advisor-decision",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "advisor-matching",
                    "matches",
                    "match_123",
                    "advisor-decision"
                  ]
                },
                "description": "Advisor accepts the project match",
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"decision\": \"approved\",\n  \"reason\": \"Interesting project\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                }
              },
              "response": []
            },
            {
              "name": "Advisor Decision - Decline",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC v1 signature",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const body = pm.request.body?.raw || '';",
                      "const timestamp = Math.floor(Date.now() / 1000).toString();",
                      "const nonce = Math.random().toString(36).substring(2, 15);",
                      "",
                      "const crypto = require('crypto-js');",
                      "const message = timestamp + body;",
                      "const signature = crypto.HmacSHA256(message, secret).toString();",
                      "",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-signature',",
                      "    value: signature",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-timestamp',",
                      "    value: timestamp",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-nonce',",
                      "    value: nonce",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-locale',",
                      "    value: 'en'",
                      "});",
                      "",
                      "console.log('HMAC v1 signature generated:', signature);",
                      "console.log('Timestamp:', timestamp);",
                      "console.log('Nonce:', nonce);"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/advisor-matching/matches/match_123/advisor-decision",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "advisor-matching",
                    "matches",
                    "match_123",
                    "advisor-decision"
                  ]
                },
                "description": "Advisor declines the project match",
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"decision\": \"declined\",\n  \"reason\": \"Schedule conflict\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                }
              },
              "response": []
            }
          ]
        },
        {
          "name": "üë§ Advisor Management",
          "item": [
            {
              "name": "Get Advisor Availability",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC v1 signature",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const body = pm.request.body?.raw || '';",
                      "const timestamp = Math.floor(Date.now() / 1000).toString();",
                      "const nonce = Math.random().toString(36).substring(2, 15);",
                      "",
                      "const crypto = require('crypto-js');",
                      "const message = timestamp + body;",
                      "const signature = crypto.HmacSHA256(message, secret).toString();",
                      "",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-signature',",
                      "    value: signature",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-timestamp',",
                      "    value: timestamp",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-nonce',",
                      "    value: nonce",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-locale',",
                      "    value: 'en'",
                      "});",
                      "",
                      "console.log('HMAC v1 signature generated:', signature);",
                      "console.log('Timestamp:', timestamp);",
                      "console.log('Nonce:', nonce);"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/advisor-matching/availability?userId={{userId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "advisor-matching",
                    "availability?userId={{userId}}"
                  ]
                },
                "description": "Get current advisor availability status"
              },
              "response": []
            },
            {
              "name": "Update Advisor Availability",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC v1 signature",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const body = pm.request.body?.raw || '';",
                      "const timestamp = Math.floor(Date.now() / 1000).toString();",
                      "const nonce = Math.random().toString(36).substring(2, 15);",
                      "",
                      "const crypto = require('crypto-js');",
                      "const message = timestamp + body;",
                      "const signature = crypto.HmacSHA256(message, secret).toString();",
                      "",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-signature',",
                      "    value: signature",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-timestamp',",
                      "    value: timestamp",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-nonce',",
                      "    value: nonce",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-locale',",
                      "    value: 'en'",
                      "});",
                      "",
                      "console.log('HMAC v1 signature generated:', signature);",
                      "console.log('Timestamp:', timestamp);",
                      "console.log('Nonce:', nonce);"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/advisor-matching/availability?userId={{userId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "advisor-matching",
                    "availability?userId={{userId}}"
                  ]
                },
                "description": "Update advisor availability status and preferences",
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"status\": \"available\",\n  \"maxConcurrentProjects\": 3,\n  \"availabilityPreferences\": {\n    \"timezone\": \"UTC\",\n    \"preferred_hours\": \"9-17\"\n  }\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                }
              },
              "response": []
            },
            {
              "name": "Set Work Hours",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC v1 signature",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const body = pm.request.body?.raw || '';",
                      "const timestamp = Math.floor(Date.now() / 1000).toString();",
                      "const nonce = Math.random().toString(36).substring(2, 15);",
                      "",
                      "const crypto = require('crypto-js');",
                      "const message = timestamp + body;",
                      "const signature = crypto.HmacSHA256(message, secret).toString();",
                      "",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-signature',",
                      "    value: signature",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-timestamp',",
                      "    value: timestamp",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-nonce',",
                      "    value: nonce",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-locale',",
                      "    value: 'en'",
                      "});",
                      "",
                      "console.log('HMAC v1 signature generated:', signature);",
                      "console.log('Timestamp:', timestamp);",
                      "console.log('Nonce:', nonce);"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/advisor-matching/work-hours?userId={{userId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "advisor-matching",
                    "work-hours?userId={{userId}}"
                  ]
                },
                "description": "Set advisor work hours schedule",
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"timezone\": \"America/New_York\",\n  \"schedule\": {\n    \"monday\": \"09:00-17:00\",\n    \"tuesday\": \"09:00-17:00\",\n    \"wednesday\": \"09:00-17:00\",\n    \"thursday\": \"09:00-17:00\",\n    \"friday\": \"09:00-15:00\"\n  }\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                }
              },
              "response": []
            },
            {
              "name": "Set Time Off",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC v1 signature",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const body = pm.request.body?.raw || '';",
                      "const timestamp = Math.floor(Date.now() / 1000).toString();",
                      "const nonce = Math.random().toString(36).substring(2, 15);",
                      "",
                      "const crypto = require('crypto-js');",
                      "const message = timestamp + body;",
                      "const signature = crypto.HmacSHA256(message, secret).toString();",
                      "",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-signature',",
                      "    value: signature",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-timestamp',",
                      "    value: timestamp",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-nonce',",
                      "    value: nonce",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-locale',",
                      "    value: 'en'",
                      "});",
                      "",
                      "console.log('HMAC v1 signature generated:', signature);",
                      "console.log('Timestamp:', timestamp);",
                      "console.log('Nonce:', nonce);"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/advisor-matching/time-off?userId={{userId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "advisor-matching",
                    "time-off?userId={{userId}}"
                  ]
                },
                "description": "Schedule advisor time off periods",
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"timeOffPeriods\": [\n    {\n      \"start\": \"2025-01-20T00:00:00Z\",\n      \"end\": \"2025-01-25T23:59:59Z\",\n      \"reason\": \"vacation\"\n    }\n  ]\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                }
              },
              "response": []
            }
          ]
        },
        {
          "name": "üõ†Ô∏è Admin Controls",
          "item": [
            {
              "name": "Manual Advisor Assignment",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC v1 signature",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const body = pm.request.body?.raw || '';",
                      "const timestamp = Math.floor(Date.now() / 1000).toString();",
                      "const nonce = Math.random().toString(36).substring(2, 15);",
                      "",
                      "const crypto = require('crypto-js');",
                      "const message = timestamp + body;",
                      "const signature = crypto.HmacSHA256(message, secret).toString();",
                      "",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-signature',",
                      "    value: signature",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-timestamp',",
                      "    value: timestamp",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-nonce',",
                      "    value: nonce",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-locale',",
                      "    value: 'en'",
                      "});",
                      "",
                      "console.log('HMAC v1 signature generated:', signature);",
                      "console.log('Timestamp:', timestamp);",
                      "console.log('Nonce:', nonce);"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/advisor-matching/admin/assign-advisor?userId={{userId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "advisor-matching",
                    "admin",
                    "assign-advisor?userId={{userId}}"
                  ]
                },
                "description": "Manually assign an advisor to a project (admin only)",
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"projectId\": \"{{projectId}}\",\n  \"advisorId\": \"advisor_123\",\n  \"priority\": \"high\",\n  \"reason\": \"Emergency project requirements\",\n  \"skipAvailabilityCheck\": false\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                }
              },
              "response": []
            },
            {
              "name": "Create Preference Rule",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC v1 signature",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const body = pm.request.body?.raw || '';",
                      "const timestamp = Math.floor(Date.now() / 1000).toString();",
                      "const nonce = Math.random().toString(36).substring(2, 15);",
                      "",
                      "const crypto = require('crypto-js');",
                      "const message = timestamp + body;",
                      "const signature = crypto.HmacSHA256(message, secret).toString();",
                      "",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-signature',",
                      "    value: signature",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-timestamp',",
                      "    value: timestamp",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-nonce',",
                      "    value: nonce",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-locale',",
                      "    value: 'en'",
                      "});",
                      "",
                      "console.log('HMAC v1 signature generated:', signature);",
                      "console.log('Timestamp:', timestamp);",
                      "console.log('Nonce:', nonce);"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/advisor-matching/admin/preference-rules?userId={{userId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "advisor-matching",
                    "admin",
                    "preference-rules?userId={{userId}}"
                  ]
                },
                "description": "Create admin preference rule for advisor matching",
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"ruleType\": \"prefer_advisor\",\n  \"targetAdvisorId\": \"advisor_123\",\n  \"conditions\": {\n    \"expertise\": [\n      \"frontend\",\n      \"react\"\n    ],\n    \"projectType\": \"urgent\"\n  },\n  \"priority\": 90,\n  \"isActive\": true,\n  \"expiresAt\": \"2025-02-15T00:00:00Z\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                }
              },
              "response": []
            },
            {
              "name": "Get Preference Rules",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC v1 signature",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const body = pm.request.body?.raw || '';",
                      "const timestamp = Math.floor(Date.now() / 1000).toString();",
                      "const nonce = Math.random().toString(36).substring(2, 15);",
                      "",
                      "const crypto = require('crypto-js');",
                      "const message = timestamp + body;",
                      "const signature = crypto.HmacSHA256(message, secret).toString();",
                      "",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-signature',",
                      "    value: signature",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-timestamp',",
                      "    value: timestamp",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-nonce',",
                      "    value: nonce",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-locale',",
                      "    value: 'en'",
                      "});",
                      "",
                      "console.log('HMAC v1 signature generated:', signature);",
                      "console.log('Timestamp:', timestamp);",
                      "console.log('Nonce:', nonce);"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/advisor-matching/admin/preference-rules?userId={{userId}}&advisorId=advisor_123&ruleType=prefer_advisor&active=true",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "advisor-matching",
                    "admin",
                    "preference-rules?userId={{userId}}&advisorId=advisor_123&ruleType=prefer_advisor&active=true"
                  ]
                },
                "description": "Get existing admin preference rules"
              },
              "response": []
            },
            {
              "name": "Override Match Result",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC v1 signature",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const body = pm.request.body?.raw || '';",
                      "const timestamp = Math.floor(Date.now() / 1000).toString();",
                      "const nonce = Math.random().toString(36).substring(2, 15);",
                      "",
                      "const crypto = require('crypto-js');",
                      "const message = timestamp + body;",
                      "const signature = crypto.HmacSHA256(message, secret).toString();",
                      "",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-signature',",
                      "    value: signature",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-timestamp',",
                      "    value: timestamp",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-nonce',",
                      "    value: nonce",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-locale',",
                      "    value: 'en'",
                      "});",
                      "",
                      "console.log('HMAC v1 signature generated:', signature);",
                      "console.log('Timestamp:', timestamp);",
                      "console.log('Nonce:', nonce);"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/advisor-matching/admin/override-match?userId={{userId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "advisor-matching",
                    "admin",
                    "override-match?userId={{userId}}"
                  ]
                },
                "description": "Override an existing match result (admin only)",
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"matchRequestId\": \"match_123\",\n  \"newAdvisorId\": \"advisor_456\",\n  \"reason\": \"Better expertise match identified\",\n  \"priority\": \"medium\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                }
              },
              "response": []
            },
            {
              "name": "Get Manual Assignments",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC v1 signature",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const body = pm.request.body?.raw || '';",
                      "const timestamp = Math.floor(Date.now() / 1000).toString();",
                      "const nonce = Math.random().toString(36).substring(2, 15);",
                      "",
                      "const crypto = require('crypto-js');",
                      "const message = timestamp + body;",
                      "const signature = crypto.HmacSHA256(message, secret).toString();",
                      "",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-signature',",
                      "    value: signature",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-timestamp',",
                      "    value: timestamp",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-nonce',",
                      "    value: nonce",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-locale',",
                      "    value: 'en'",
                      "});",
                      "",
                      "console.log('HMAC v1 signature generated:', signature);",
                      "console.log('Timestamp:', timestamp);",
                      "console.log('Nonce:', nonce);"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/advisor-matching/admin/assignments/{{projectId}}?userId={{userId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "advisor-matching",
                    "admin",
                    "assignments",
                    "{{projectId}}?userId={{userId}}"
                  ]
                },
                "description": "Get manual assignments for a project"
              },
              "response": []
            },
            {
              "name": "Process Notifications",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC v1 signature",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const body = pm.request.body?.raw || '';",
                      "const timestamp = Math.floor(Date.now() / 1000).toString();",
                      "const nonce = Math.random().toString(36).substring(2, 15);",
                      "",
                      "const crypto = require('crypto-js');",
                      "const message = timestamp + body;",
                      "const signature = crypto.HmacSHA256(message, secret).toString();",
                      "",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-signature',",
                      "    value: signature",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-timestamp',",
                      "    value: timestamp",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-nonce',",
                      "    value: nonce",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-locale',",
                      "    value: 'en'",
                      "});",
                      "",
                      "console.log('HMAC v1 signature generated:', signature);",
                      "console.log('Timestamp:', timestamp);",
                      "console.log('Nonce:', nonce);"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/advisor-matching/admin/process-notifications?userId={{userId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "advisor-matching",
                    "admin",
                    "process-notifications?userId={{userId}}"
                  ]
                },
                "description": "Process pending notifications (admin only)",
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"batchSize\": 50,\n  \"targetStatus\": \"pending\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                }
              },
              "response": []
            }
          ]
        },
        {
          "name": "üìä Dashboard & Analytics",
          "item": [
            {
              "name": "Pool Status Dashboard",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC v1 signature",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const body = pm.request.body?.raw || '';",
                      "const timestamp = Math.floor(Date.now() / 1000).toString();",
                      "const nonce = Math.random().toString(36).substring(2, 15);",
                      "",
                      "const crypto = require('crypto-js');",
                      "const message = timestamp + body;",
                      "const signature = crypto.HmacSHA256(message, secret).toString();",
                      "",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-signature',",
                      "    value: signature",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-timestamp',",
                      "    value: timestamp",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-nonce',",
                      "    value: nonce",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-locale',",
                      "    value: 'en'",
                      "});",
                      "",
                      "console.log('HMAC v1 signature generated:', signature);",
                      "console.log('Timestamp:', timestamp);",
                      "console.log('Nonce:', nonce);"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/advisor-matching/admin/dashboard/pool-status?userId={{userId}}&includeDetails=true",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "advisor-matching",
                    "admin",
                    "dashboard",
                    "pool-status?userId={{userId}}&includeDetails=true"
                  ]
                },
                "description": "Get advisor pool status and utilization metrics"
              },
              "response": []
            },
            {
              "name": "Available Advisors",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC v1 signature",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const body = pm.request.body?.raw || '';",
                      "const timestamp = Math.floor(Date.now() / 1000).toString();",
                      "const nonce = Math.random().toString(36).substring(2, 15);",
                      "",
                      "const crypto = require('crypto-js');",
                      "const message = timestamp + body;",
                      "const signature = crypto.HmacSHA256(message, secret).toString();",
                      "",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-signature',",
                      "    value: signature",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-timestamp',",
                      "    value: timestamp",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-nonce',",
                      "    value: nonce",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-locale',",
                      "    value: 'en'",
                      "});",
                      "",
                      "console.log('HMAC v1 signature generated:', signature);",
                      "console.log('Timestamp:', timestamp);",
                      "console.log('Nonce:', nonce);"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/advisor-matching/admin/available-advisors?userId={{userId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "advisor-matching",
                    "admin",
                    "available-advisors?userId={{userId}}"
                  ]
                },
                "description": "Get list of currently available advisors"
              },
              "response": []
            },
            {
              "name": "Match Queue Status",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC v1 signature",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const body = pm.request.body?.raw || '';",
                      "const timestamp = Math.floor(Date.now() / 1000).toString();",
                      "const nonce = Math.random().toString(36).substring(2, 15);",
                      "",
                      "const crypto = require('crypto-js');",
                      "const message = timestamp + body;",
                      "const signature = crypto.HmacSHA256(message, secret).toString();",
                      "",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-signature',",
                      "    value: signature",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-timestamp',",
                      "    value: timestamp",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-nonce',",
                      "    value: nonce",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-locale',",
                      "    value: 'en'",
                      "});",
                      "",
                      "console.log('HMAC v1 signature generated:', signature);",
                      "console.log('Timestamp:', timestamp);",
                      "console.log('Nonce:', nonce);"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/advisor-matching/admin/matches?userId={{userId}}&status=pending&limit=50&offset=0",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "advisor-matching",
                    "admin",
                    "matches?userId={{userId}}&status=pending&limit=50&offset=0"
                  ]
                },
                "description": "Get pending matches in the queue"
              },
              "response": []
            },
            {
              "name": "Advisor Workload Analysis",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC v1 signature",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const body = pm.request.body?.raw || '';",
                      "const timestamp = Math.floor(Date.now() / 1000).toString();",
                      "const nonce = Math.random().toString(36).substring(2, 15);",
                      "",
                      "const crypto = require('crypto-js');",
                      "const message = timestamp + body;",
                      "const signature = crypto.HmacSHA256(message, secret).toString();",
                      "",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-signature',",
                      "    value: signature",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-timestamp',",
                      "    value: timestamp",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-nonce',",
                      "    value: nonce",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-locale',",
                      "    value: 'en'",
                      "});",
                      "",
                      "console.log('HMAC v1 signature generated:', signature);",
                      "console.log('Timestamp:', timestamp);",
                      "console.log('Nonce:', nonce);"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/advisor-matching/admin/dashboard/advisor-workloads?userId={{userId}}&sortBy=utilization",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "advisor-matching",
                    "admin",
                    "dashboard",
                    "advisor-workloads?userId={{userId}}&sortBy=utilization"
                  ]
                },
                "description": "Get advisor workload and utilization analysis"
              },
              "response": []
            },
            {
              "name": "Recent Activity Monitor",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC v1 signature",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const body = pm.request.body?.raw || '';",
                      "const timestamp = Math.floor(Date.now() / 1000).toString();",
                      "const nonce = Math.random().toString(36).substring(2, 15);",
                      "",
                      "const crypto = require('crypto-js');",
                      "const message = timestamp + body;",
                      "const signature = crypto.HmacSHA256(message, secret).toString();",
                      "",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-signature',",
                      "    value: signature",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-timestamp',",
                      "    value: timestamp",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-nonce',",
                      "    value: nonce",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-locale',",
                      "    value: 'en'",
                      "});",
                      "",
                      "console.log('HMAC v1 signature generated:', signature);",
                      "console.log('Timestamp:', timestamp);",
                      "console.log('Nonce:', nonce);"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/advisor-matching/admin/dashboard/recent-activity?userId={{userId}}&hours=24&limit=100",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "advisor-matching",
                    "admin",
                    "dashboard",
                    "recent-activity?userId={{userId}}&hours=24&limit=100"
                  ]
                },
                "description": "Monitor recent matching activity"
              },
              "response": []
            },
            {
              "name": "System Health Check",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC v1 signature",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const body = pm.request.body?.raw || '';",
                      "const timestamp = Math.floor(Date.now() / 1000).toString();",
                      "const nonce = Math.random().toString(36).substring(2, 15);",
                      "",
                      "const crypto = require('crypto-js');",
                      "const message = timestamp + body;",
                      "const signature = crypto.HmacSHA256(message, secret).toString();",
                      "",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-signature',",
                      "    value: signature",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-timestamp',",
                      "    value: timestamp",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-nonce',",
                      "    value: nonce",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-locale',",
                      "    value: 'en'",
                      "});",
                      "",
                      "console.log('HMAC v1 signature generated:', signature);",
                      "console.log('Timestamp:', timestamp);",
                      "console.log('Nonce:', nonce);"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/advisor-matching/admin/dashboard/system-health?userId={{userId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "advisor-matching",
                    "admin",
                    "dashboard",
                    "system-health?userId={{userId}}"
                  ]
                },
                "description": "Get system health status for advisor matching"
              },
              "response": []
            },
            {
              "name": "Availability Trends",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC v1 signature",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const body = pm.request.body?.raw || '';",
                      "const timestamp = Math.floor(Date.now() / 1000).toString();",
                      "const nonce = Math.random().toString(36).substring(2, 15);",
                      "",
                      "const crypto = require('crypto-js');",
                      "const message = timestamp + body;",
                      "const signature = crypto.HmacSHA256(message, secret).toString();",
                      "",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-signature',",
                      "    value: signature",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-timestamp',",
                      "    value: timestamp",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-nonce',",
                      "    value: nonce",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-locale',",
                      "    value: 'en'",
                      "});",
                      "",
                      "console.log('HMAC v1 signature generated:', signature);",
                      "console.log('Timestamp:', timestamp);",
                      "console.log('Nonce:', nonce);"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/advisor-matching/admin/dashboard/availability-trends?userId={{userId}}&days=30&advisorId=advisor_123",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "advisor-matching",
                    "admin",
                    "dashboard",
                    "availability-trends?userId={{userId}}&days=30&advisorId=advisor_123"
                  ]
                },
                "description": "Get advisor availability trends over time"
              },
              "response": []
            },
            {
              "name": "Matching Performance Metrics",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC v1 signature",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const body = pm.request.body?.raw || '';",
                      "const timestamp = Math.floor(Date.now() / 1000).toString();",
                      "const nonce = Math.random().toString(36).substring(2, 15);",
                      "",
                      "const crypto = require('crypto-js');",
                      "const message = timestamp + body;",
                      "const signature = crypto.HmacSHA256(message, secret).toString();",
                      "",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-signature',",
                      "    value: signature",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-timestamp',",
                      "    value: timestamp",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-nonce',",
                      "    value: nonce",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-locale',",
                      "    value: 'en'",
                      "});",
                      "",
                      "console.log('HMAC v1 signature generated:', signature);",
                      "console.log('Timestamp:', timestamp);",
                      "console.log('Nonce:', nonce);"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/advisor-matching/admin/dashboard/matching-metrics?userId={{userId}}&period=week",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "advisor-matching",
                    "admin",
                    "dashboard",
                    "matching-metrics?userId={{userId}}&period=week"
                  ]
                },
                "description": "Get matching performance metrics and success rates"
              },
              "response": []
            },
            {
              "name": "Algorithm Configuration",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC v1 signature",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const body = pm.request.body?.raw || '';",
                      "const timestamp = Math.floor(Date.now() / 1000).toString();",
                      "const nonce = Math.random().toString(36).substring(2, 15);",
                      "",
                      "const crypto = require('crypto-js');",
                      "const message = timestamp + body;",
                      "const signature = crypto.HmacSHA256(message, secret).toString();",
                      "",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-signature',",
                      "    value: signature",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-timestamp',",
                      "    value: timestamp",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-nonce',",
                      "    value: nonce",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-locale',",
                      "    value: 'en'",
                      "});",
                      "",
                      "console.log('HMAC v1 signature generated:', signature);",
                      "console.log('Timestamp:', timestamp);",
                      "console.log('Nonce:', nonce);"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/advisor-matching/admin/dashboard/configuration?userId={{userId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "advisor-matching",
                    "admin",
                    "dashboard",
                    "configuration?userId={{userId}}"
                  ]
                },
                "description": "Get current algorithm configuration and settings"
              },
              "response": []
            },
            {
              "name": "Emergency Assignment",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC v1 signature",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const body = pm.request.body?.raw || '';",
                      "const timestamp = Math.floor(Date.now() / 1000).toString();",
                      "const nonce = Math.random().toString(36).substring(2, 15);",
                      "",
                      "const crypto = require('crypto-js');",
                      "const message = timestamp + body;",
                      "const signature = crypto.HmacSHA256(message, secret).toString();",
                      "",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-signature',",
                      "    value: signature",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-timestamp',",
                      "    value: timestamp",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-nonce',",
                      "    value: nonce",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-locale',",
                      "    value: 'en'",
                      "});",
                      "",
                      "console.log('HMAC v1 signature generated:', signature);",
                      "console.log('Timestamp:', timestamp);",
                      "console.log('Nonce:', nonce);"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/advisor-matching/admin/dashboard/emergency-assign?userId={{userId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "advisor-matching",
                    "admin",
                    "dashboard",
                    "emergency-assign?userId={{userId}}"
                  ]
                },
                "description": "Emergency advisor assignment bypassing normal constraints",
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"projectId\": \"{{projectId}}\",\n  \"advisorId\": \"advisor_123\",\n  \"reason\": \"Critical client escalation\",\n  \"overrideCapacity\": true\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                }
              },
              "response": []
            },
            {
              "name": "Intervention History",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC v1 signature",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const body = pm.request.body?.raw || '';",
                      "const timestamp = Math.floor(Date.now() / 1000).toString();",
                      "const nonce = Math.random().toString(36).substring(2, 15);",
                      "",
                      "const crypto = require('crypto-js');",
                      "const message = timestamp + body;",
                      "const signature = crypto.HmacSHA256(message, secret).toString();",
                      "",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-signature',",
                      "    value: signature",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-timestamp',",
                      "    value: timestamp",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-nonce',",
                      "    value: nonce",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-locale',",
                      "    value: 'en'",
                      "});",
                      "",
                      "console.log('HMAC v1 signature generated:', signature);",
                      "console.log('Timestamp:', timestamp);",
                      "console.log('Nonce:', nonce);"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/advisor-matching/admin/interventions?userId={{userId}}&limit=50&days=7",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "advisor-matching",
                    "admin",
                    "interventions?userId={{userId}}&limit=50&days=7"
                  ]
                },
                "description": "Get history of manual interventions"
              },
              "response": []
            }
          ]
        },
        {
          "name": "üè• System Health",
          "item": [
            {
              "name": "Health Check",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC v1 signature",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const body = pm.request.body?.raw || '';",
                      "const timestamp = Math.floor(Date.now() / 1000).toString();",
                      "const nonce = Math.random().toString(36).substring(2, 15);",
                      "",
                      "const crypto = require('crypto-js');",
                      "const message = timestamp + body;",
                      "const signature = crypto.HmacSHA256(message, secret).toString();",
                      "",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-signature',",
                      "    value: signature",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-timestamp',",
                      "    value: timestamp",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-nonce',",
                      "    value: nonce",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'x-sheen-locale',",
                      "    value: 'en'",
                      "});",
                      "",
                      "console.log('HMAC v1 signature generated:', signature);",
                      "console.log('Timestamp:', timestamp);",
                      "console.log('Nonce:', nonce);"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/advisor-matching/health",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "advisor-matching",
                    "health"
                  ]
                },
                "description": "Basic health check endpoint (no auth required)"
              },
              "response": []
            }
          ]
        }
      ]
    },
    {
      "name": "üöÄ Quick Update Test Flow",
      "item": [
        {
          "name": "Step 1: Create Initial Project",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"userId\":\"test-{{$timestamp}}\",\"prompt\":\"Create a simple React counter app with increment and decrement buttons. Use a modern clean design with Tailwind CSS.\",\"framework\":\"react\"}"
            },
            "url": {
              "raw": "{{baseUrl}}/create-preview-for-new-project",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "create-preview-for-new-project"
              ]
            },
            "description": "Creates a new counter app with unique IDs based on timestamp"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Project created successfully\", function () {",
                  "    pm.response.to.have.status(200);",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.success).to.be.true;",
                  "    ",
                  "    // Extract and save the IDs for next requests",
                  "    const userId = JSON.parse(pm.request.body.raw).userId;",
                  "    const projectId = response.projectId; // Server-generated ID",
                  "    ",
                  "    pm.collectionVariables.set(\"testUserId\", userId);",
                  "    pm.collectionVariables.set(\"testProjectId\", projectId);",
                  "    pm.collectionVariables.set(\"buildId\", response.jobId || response.buildId);",
                  "    ",
                  "    console.log(\"‚úÖ Project created!\");",
                  "    console.log(\"   User ID:\", userId);",
                  "    console.log(\"   Project ID:\", projectId);",
                  "    console.log(\"   Build ID:\", response.jobId || response.buildId);",
                  "    console.log(\"\");",
                  "    console.log(\"‚è≥ Wait 30-60 seconds for build to complete\");",
                  "    console.log(\"   Then run 'Step 2: Check Build Status'\");",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Step 2: Check Build Status",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/v1/builds/{{buildId}}/status",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "builds",
                ""
              ]
            },
            "description": "Check if the initial build is complete"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "const response = pm.response.json();",
                  "const status = response.status;",
                  "",
                  "pm.test(\"Build status retrieved\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "console.log(\"üìä Build Status:\", status.toUpperCase());",
                  "console.log(\"   Progress:\", response.progress + \"%\");",
                  "",
                  "if (status === \"completed\") {",
                  "    console.log(\"‚úÖ Build completed!\");",
                  "    if (response.previewUrl) {",
                  "        console.log(\"üåê Preview URL:\", response.previewUrl);",
                  "        pm.collectionVariables.set(\"lastPreviewUrl\", response.previewUrl);",
                  "    }",
                  "    console.log(\"\");",
                  "    console.log(\"üéØ Ready for update! Run 'Step 3: Update Project'\");",
                  "} else if (status === \"failed\") {",
                  "    console.log(\"‚ùå Build failed:\", response.error);",
                  "} else {",
                  "    console.log(\"‚è≥ Still building... Check again in 10-15 seconds\");",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Step 3: Update Project (Fast!)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"userId\":\"{{testUserId}}\",\"projectId\":\"{{testProjectId}}\",\"prompt\":\"Add a reset button that sets the counter back to 0. Style it with a different color than the other buttons.\"}"
            },
            "url": {
              "raw": "{{baseUrl}}/update-project",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "update-project"
              ]
            },
            "description": "Updates the project using the fast update endpoint"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Update started successfully\", function () {",
                  "    pm.response.to.have.status(200);",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.success).to.be.true;",
                  "    ",
                  "    pm.collectionVariables.set(\"buildId\", response.buildId);",
                  "    ",
                  "    console.log(\"‚ö° FAST UPDATE STARTED!\");",
                  "    console.log(\"   Build ID:\", response.buildId);",
                  "    console.log(\"   Estimated time:\", response.estimatedTime);",
                  "    console.log(\"\");",
                  "    console.log(\"üí° This update should be much faster because:\");",
                  "    console.log(\"   - Dependencies haven't changed (no npm install)\");",
                  "    console.log(\"   - Claude reads existing project structure\");",
                  "    console.log(\"   - Only modifies what's needed\");",
                  "    console.log(\"\");",
                  "    console.log(\"‚è≥ Wait 30-45 seconds then run 'Step 4: Check Update Status'\");",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Step 4: Check Update Status",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/v1/builds/{{buildId}}/status",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "builds",
                ""
              ]
            },
            "description": "Check if the update is complete"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "const response = pm.response.json();",
                  "const status = response.status;",
                  "",
                  "pm.test(\"Update status retrieved\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "console.log(\"üìä Update Status:\", status.toUpperCase());",
                  "console.log(\"   Progress:\", response.progress + \"%\");",
                  "",
                  "if (status === \"completed\") {",
                  "    console.log(\"‚úÖ Update completed!\");",
                  "    if (response.previewUrl) {",
                  "        console.log(\"üåê Updated Preview URL:\", response.previewUrl);",
                  "        console.log(\"\");",
                  "        console.log(\"üéâ SUCCESS! The reset button should now be visible.\");",
                  "    }",
                  "} else if (status === \"failed\") {",
                  "    console.log(\"‚ùå Update failed:\", response.error);",
                  "} else {",
                  "    console.log(\"‚è≥ Still updating... Check again in 10-15 seconds\");",
                  "}"
                ]
              }
            }
          ]
        }
      ],
      "description": "Complete workflow to test the fast update feature. Run these requests in order!"
    },
    {
      "name": "AI Time Billing",
      "item": [
        {
          "name": "Get User Balance",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-sheen-signature",
                "value": "{{signature}}",
                "description": "HMAC SHA256 signature of request body"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/v1/billing/balance/{{userId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "billing",
                "balance",
                "{{userId}}"
              ]
            },
            "description": "Get current AI time balance for a user. Returns welcome bonus, daily gift, and paid seconds remaining."
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/v1/billing/balance/user123",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "billing",
                    "balance",
                    "user123"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"balance\": {\n    \"welcomeBonus\": 3000,\n    \"dailyGift\": 900,\n    \"paid\": 0,\n    \"total\": 3900\n  },\n  \"usage\": {\n    \"todayUsed\": 0,\n    \"lifetimeUsed\": 0\n  },\n  \"dailyResetAt\": \"2025-07-28T00:00:00.000Z\"\n}"
            }
          ]
        },
        {
          "name": "Check Sufficient Balance",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-sheen-signature",
                "value": "{{signature}}",
                "description": "HMAC SHA256 signature of request body"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"operationType\": \"main_build\",\n  \"projectSize\": \"medium\",\n  \"isUpdate\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/billing/check-sufficient",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "billing",
                "check-sufficient"
              ]
            },
            "description": "Check if user has sufficient AI time balance for an operation. Returns estimate and purchase recommendations if insufficient."
          },
          "response": [
            {
              "name": "Sufficient Balance",
              "originalRequest": {
                "method": "POST",
                "header": [],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"userId\": \"user123\",\n  \"operationType\": \"main_build\",\n  \"projectSize\": \"medium\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/v1/billing/check-sufficient",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "billing",
                    "check-sufficient"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"sufficient\": true,\n  \"estimate\": {\n    \"estimatedSeconds\": 180,\n    \"estimatedMinutes\": 3,\n    \"confidence\": \"medium\",\n    \"basedOnSamples\": 15\n  },\n  \"balance\": {\n    \"welcomeBonus\": 3000,\n    \"dailyGift\": 900,\n    \"paid\": 0,\n    \"total\": 3900\n  }\n}"
            },
            {
              "name": "Insufficient Balance",
              "originalRequest": {
                "method": "POST",
                "header": [],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"userId\": \"user123\",\n  \"operationType\": \"main_build\",\n  \"projectSize\": \"large\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/v1/billing/check-sufficient",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "billing",
                    "check-sufficient"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"sufficient\": false,\n  \"estimate\": {\n    \"estimatedSeconds\": 600,\n    \"estimatedMinutes\": 10,\n    \"confidence\": \"high\",\n    \"basedOnSamples\": 25\n  },\n  \"balance\": {\n    \"welcomeBonus\": 0,\n    \"dailyGift\": 300,\n    \"paid\": 0,\n    \"total\": 300\n  },\n  \"recommendation\": {\n    \"suggestedPackage\": \"plus\",\n    \"costToComplete\": 10,\n    \"purchaseUrl\": \"/purchase\"\n  }\n}"
            }
          ]
        }
      ],
      "description": "AI Time Billing endpoints for balance management and pre-flight checks. These are read-only endpoints that the Next.js frontend uses to check user balances before operations."
    },
    {
      "name": "üåê Publication System",
      "item": [
        {
          "name": "Publish Version",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-sheen-signature",
                "value": "{{$randomAlphaNumeric}}",
                "description": "HMAC-SHA256 signature will be calculated automatically"
              },
              {
                "key": "Idempotency-Key",
                "value": "publish-{{$timestamp}}",
                "description": "Optional: Prevents double-publishing"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"comment\": \"Publishing stable version with bug fixes\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/projects/{{projectId}}/publish/{{versionId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "projects",
                "{{projectId}}",
                "publish",
                "{{versionId}}"
              ]
            },
            "description": "Make a version live on all configured domains. Creates publication record and updates CNAME records."
          }
        },
        {
          "name": "Unpublish Version",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-sheen-signature",
                "value": "{{$randomAlphaNumeric}}",
                "description": "HMAC-SHA256 signature will be calculated automatically"
              },
              {
                "key": "Idempotency-Key",
                "value": "unpublish-{{$timestamp}}",
                "description": "Optional: Prevents double-unpublishing (24h cache)"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"{{userId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/projects/{{projectId}}/unpublish",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "projects",
                "{{projectId}}",
                "unpublish"
              ]
            },
            "description": "üö´ Unpublish Current Version\n\n‚ú® NEW FEATURES:\n- üîë Idempotency protection with 24h cache\n- üõ°Ô∏è Enhanced error handling\n- üïê Clock-skew diagnostic in auth failures\n\n‚ö†Ô∏è AUTHENTICATION REQUIRED:\nThis endpoint requires HMAC-SHA256 signature in x-sheen-signature header.\n\nüìù BEHAVIOR:\nRemoves the current published version from live status. The project will have no public site until you explicitly publish another version.\n\nüîÑ IDEMPOTENCY:\nUse Idempotency-Key header to prevent accidental double-unpublishing."
          }
        },
        {
          "name": "Get Version History with Publication Status",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "x-sheen-signature",
                "value": "{{$randomAlphaNumeric}}",
                "description": "HMAC-SHA256 signature will be calculated automatically"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/v1/projects/{{projectId}}/versions?state=all&limit=20&offset=0",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "projects",
                "{{projectId}}",
                "versions"
              ],
              "query": [
                {
                  "key": "state",
                  "value": "all",
                  "description": "Filter: published | unpublished | all"
                },
                {
                  "key": "limit",
                  "value": "20",
                  "description": "Max 100 per request"
                },
                {
                  "key": "offset",
                  "value": "0",
                  "description": "Pagination offset"
                }
              ]
            },
            "description": "üìú Enhanced Version History API (v2.4)\n\n‚ú® NEW FEATURES:\n- üéØ **hasArtifact**: Know which versions can be rolled back/previewed\n- üîì **canRollback/canPreview/canPublish**: Smart action permissions with business logic\n- ‚ôø **accessibility.rollbackDisabledReason**: Specific reasons why actions are disabled\n- ‚è∞ **retention.daysRemaining**: Days until artifact expiration\n- üìè **artifactSize**: File size information for UI decisions\n\nüîç RESPONSE FEATURES:\n- artifact_missing: Version has no artifact URL\n- artifact_expired: Artifact pruned (>30 days old)\n- already_published: Cannot rollback published versions\n- deployment_failed: Version deployment failed\n\nüìä PAGINATION:\n- Max 100 versions per request\n- Uses offset-based pagination\n- Includes hasMore flag for infinite scroll\n\nüé® FRONTEND INTEGRATION:\nResponse includes all metadata needed for intelligent UI decisions:\n- Button disable/enable states\n- Tooltip text for disabled actions\n- Expiration warnings\n- File size displays"
          }
        },
        {
          "name": "Add Custom Domain",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-sheen-signature",
                "value": "{{$randomAlphaNumeric}}",
                "description": "HMAC-SHA256 signature will be calculated automatically"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"domain\": \"app.example.com\",\n  \"type\": \"custom\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/projects/{{projectId}}/domains",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "projects",
                "{{projectId}}",
                "domains"
              ]
            },
            "description": "Add a domain to the project for publication. Response includes domain verification status: pending_verification (show DNS banner), failed (show retry), active (normal operation)."
          }
        }
      ],
      "description": "Publication system endpoints for explicit user control over version deployment. Users create versions for preview, then explicitly publish them to domains."
    },
    {
      "name": "üîç Audit & Monitoring",
      "item": [
        {
          "name": "Investigate File Changes",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "x-sheen-signature",
                "value": "{{$randomAlphaNumeric}}",
                "description": "HMAC-SHA256 signature will be calculated automatically"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/v1/admin/audit/working-directory/changes?projectId={{projectId}}&filename=main.css&fromDate=2025-08-02T03:00:00Z&toDate=2025-08-02T06:00:00Z&limit=50",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "admin",
                "audit",
                "working-directory"
              ],
              "query": [
                {
                  "key": "projectId",
                  "value": "{{projectId}}",
                  "description": "Project to investigate"
                },
                {
                  "key": "filename",
                  "value": "main.css",
                  "description": "Optional: specific file to investigate"
                },
                {
                  "key": "fromDate",
                  "value": "2025-08-02T03:00:00Z",
                  "description": "Start date (max 30-day range)"
                },
                {
                  "key": "toDate",
                  "value": "2025-08-02T06:00:00Z",
                  "description": "End date"
                },
                {
                  "key": "limit",
                  "value": "50",
                  "description": "Max 100 entries per request"
                }
              ]
            },
            "description": "Incident response: Who changed main.css at 3 AM? Returns detailed audit trail of file changes."
          }
        },
        {
          "name": "Security Monitoring",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "x-sheen-signature",
                "value": "{{$randomAlphaNumeric}}",
                "description": "HMAC-SHA256 signature will be calculated automatically"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/v1/admin/audit/working-directory/suspicious?projectId={{projectId}}&fromDate=2025-08-02T03:00:00Z&toDate=2025-08-02T06:00:00Z",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "admin",
                "audit",
                "working-directory"
              ],
              "query": [
                {
                  "key": "projectId",
                  "value": "{{projectId}}",
                  "description": "Project to monitor"
                },
                {
                  "key": "fromDate",
                  "value": "2025-08-02T03:00:00Z",
                  "description": "Start date (max 7-day range for security)"
                },
                {
                  "key": "toDate",
                  "value": "2025-08-02T06:00:00Z",
                  "description": "End date"
                }
              ]
            },
            "description": "Security monitoring for unusual activity: off-hours operations, unusual file volumes, path traversal attempts."
          }
        },
        {
          "name": "Performance Monitoring",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "x-sheen-signature",
                "value": "{{$randomAlphaNumeric}}",
                "description": "HMAC-SHA256 signature will be calculated automatically"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/v1/admin/audit/working-directory/performance?projectId={{projectId}}&fromDate=2025-08-02T03:00:00Z&toDate=2025-08-02T06:00:00Z",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "admin",
                "audit",
                "working-directory"
              ],
              "query": [
                {
                  "key": "projectId",
                  "value": "{{projectId}}",
                  "description": "Project to analyze"
                },
                {
                  "key": "fromDate",
                  "value": "2025-08-02T03:00:00Z",
                  "description": "Start date (max 14-day range for performance)"
                },
                {
                  "key": "toDate",
                  "value": "2025-08-02T06:00:00Z",
                  "description": "End date"
                }
              ]
            },
            "description": "Performance monitoring: sync operation timing, success rates, slow operations identification."
          }
        },
        {
          "name": "Get Security Alerts",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_jwt}}",
                "description": "Admin JWT from /v1/admin/auth/exchange"
              },
              {
                "key": "x-correlation-id",
                "value": "{{$guid}}",
                "description": "Correlation ID for request tracking"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/v1/admin/audit/alerts?severity=high&resolved=false&limit=50&offset=0",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "admin",
                "audit",
                "alerts"
              ],
              "query": [
                {
                  "key": "severity",
                  "value": "high",
                  "description": "Filter by severity: critical|high|medium|low"
                },
                {
                  "key": "resolved",
                  "value": "false",
                  "description": "Filter by resolution status: true|false"
                },
                {
                  "key": "limit",
                  "value": "50",
                  "description": "Number of alerts to return (default: 50)"
                },
                {
                  "key": "offset",
                  "value": "0",
                  "description": "Number of alerts to skip (default: 0)"
                }
              ]
            }
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}"
                  },
                  {
                    "key": "x-correlation-id",
                    "value": "{{$guid}}"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/v1/admin/audit/alerts?severity=high&resolved=false&limit=50&offset=0",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "admin",
                    "audit",
                    "alerts"
                  ],
                  "query": [
                    {
                      "key": "severity",
                      "value": "high"
                    },
                    {
                      "key": "resolved",
                      "value": "false"
                    },
                    {
                      "key": "limit",
                      "value": "50"
                    },
                    {
                      "key": "offset",
                      "value": "0"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"success\": true,\n  \"alerts\": [\n    {\n      \"id\": \"123\",\n      \"type\": \"login_failure\",\n      \"severity\": \"high\",\n      \"title\": \"Repeated Login Failures\",\n      \"description\": \"5 failed login attempts detected for user@example.com\",\n      \"timestamp\": \"2025-09-07T19:00:00Z\",\n      \"metadata\": {\n        \"ip_address\": \"192.168.1.100\",\n        \"user_email\": \"user@example.com\",\n        \"attempt_count\": 5\n      },\n      \"resolved\": false\n    }\n  ],\n  \"pagination\": {\n    \"limit\": 50,\n    \"offset\": 0,\n    \"total\": 8,\n    \"returned\": 1,\n    \"has_more\": false\n  }\n}"
            }
          ],
          "description": "Retrieve security alerts for admin monitoring with enhanced descriptions and filtering"
        }
      ],
      "description": "Audit and monitoring endpoints for incident response and security monitoring. Strict pagination and date-range limits prevent abuse."
    },
    {
      "name": "üîÑ GitHub 2-Way Sync",
      "item": [
        {
          "name": "List GitHub App Installations",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Generate HMAC signature for request",
                  "const secret = pm.variables.get('sharedSecret');",
                  "const timestamp = Math.floor(Date.now() / 1000);",
                  "const path = '/v1/github/installations';",
                  "",
                  "const crypto = require('crypto-js');",
                  "const canonical = timestamp + '';",
                  "const signature = crypto.HmacSHA256(canonical, secret).toString();",
                  "",
                  "pm.request.headers.add({",
                  "    key: 'x-sheen-signature',",
                  "    value: signature",
                  "});",
                  "",
                  "pm.request.headers.add({",
                  "    key: 'x-sheen-timestamp',",
                  "    value: timestamp.toString()",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/v1/github/installations",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "github",
                "installations"
              ]
            },
            "description": "üîç **List GitHub App Installations**\n\n**Current Status**: Returns guidance for manual installation ID retrieval since user OAuth integration is not yet implemented.\n\n**Future Enhancement**: Will list all GitHub App installations accessible to the authenticated user.\n\n**Response (Current)**:\n```json\n{\n  \"error\": \"Installation discovery requires user OAuth integration\",\n  \"error_code\": \"INSUFFICIENT_PERMISSIONS\",\n  \"recovery_url\": \"https://github.com/apps/your-app/installations/select_target\",\n  \"details\": {\n    \"message\": \"Users must install the GitHub App and provide the installation ID\",\n    \"documentation\": \"Use the GitHub App installation URL to guide users\"\n  }\n}\n```\n\n**HTTP Status**: `501 Not Implemented`\n\n**Usage**: Provides users with the correct GitHub App installation URL to guide them through the manual process of finding their installation ID."
          },
          "response": []
        },
        {
          "name": "List Repositories for Installation",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Generate HMAC signature for request",
                  "const secret = pm.variables.get('sharedSecret');",
                  "const timestamp = Math.floor(Date.now() / 1000);",
                  "const installationId = pm.variables.get('githubInstallationId') || '12345678';",
                  "const path = `/v1/github/installations/${installationId}/repos`;",
                  "",
                  "const crypto = require('crypto-js');",
                  "const canonical = timestamp + '';",
                  "const signature = crypto.HmacSHA256(canonical, secret).toString();",
                  "",
                  "pm.request.headers.add({",
                  "    key: 'x-sheen-signature',",
                  "    value: signature",
                  "});",
                  "",
                  "pm.request.headers.add({",
                  "    key: 'x-sheen-timestamp',",
                  "    value: timestamp.toString()",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/v1/github/installations/{{githubInstallationId}}/repos?query=&page=1&per_page=30",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "github",
                "installations",
                "{{githubInstallationId}}",
                "repos"
              ],
              "query": [
                {
                  "key": "query",
                  "value": "",
                  "description": "Optional search term to filter repositories"
                },
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number for pagination"
                },
                {
                  "key": "per_page",
                  "value": "30",
                  "description": "Number of repositories per page (max: 100)"
                }
              ]
            },
            "description": "üìã **List Repositories for Installation**\n\n**Description**: Retrieve all repositories accessible through a specific GitHub App installation. Essential for repository selection UX.\n\n**Features**:\n- üîç **Search Support**: Filter repositories by name with query parameter\n- üìÑ **Pagination**: Handle large numbers of repositories efficiently\n- üîê **Permission-aware**: Only returns repositories the installation can access\n- ‚ö° **Fast Response**: Optimized for quick repository discovery\n\n**Query Parameters**:\n- `query`: Search term to filter repository names (optional)\n- `page`: Page number starting from 1 (default: 1)\n- `per_page`: Items per page, max 100 (default: 30)\n\n**Response**:\n```json\n{\n  \"repositories\": [\n    {\n      \"id\": 123456789,\n      \"name\": \"my-project\",\n      \"full_name\": \"myorg/my-project\",\n      \"description\": \"My awesome project\",\n      \"private\": false,\n      \"default_branch\": \"main\",\n      \"archived\": false,\n      \"disabled\": false,\n      \"language\": \"TypeScript\",\n      \"updated_at\": \"2025-09-01T10:30:00Z\",\n      \"html_url\": \"https://github.com/myorg/my-project\"\n    }\n  ],\n  \"total_count\": 42,\n  \"page\": 1,\n  \"per_page\": 30\n}\n```\n\n**Error Codes**:\n- `INVALID_INSTALLATION`: Installation ID not found or inaccessible\n- `INSUFFICIENT_PERMISSIONS`: App lacks permission for this installation\n- `RATE_LIMIT`: GitHub API rate limit exceeded (auto-retries)\n\n**Frontend Usage**:\nPerfect for repository selection dropdowns with search and pagination support."
          },
          "response": []
        },
        {
          "name": "Link GitHub Repository",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Generate HMAC signature for request",
                  "const secret = pm.variables.get('sharedSecret');",
                  "const body = pm.request.body.raw;",
                  "const timestamp = Math.floor(Date.now() / 1000);",
                  "const path = `/v1/projects/${pm.variables.get('projectId')}/github/link`;",
                  "",
                  "const crypto = require('crypto-js');",
                  "const canonical = timestamp + body;",
                  "const signature = crypto.HmacSHA256(canonical, secret).toString();",
                  "",
                  "pm.request.headers.add({",
                  "    key: 'x-sheen-signature',",
                  "    value: signature",
                  "});",
                  "",
                  "pm.request.headers.add({",
                  "    key: 'x-sheen-timestamp',",
                  "    value: timestamp.toString()",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"repoOwner\": \"myorg\",\n  \"repoName\": \"my-project\",\n  \"installationId\": \"12345678\",\n  \"syncMode\": \"protected_pr\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/projects/{{projectId}}/github/link",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "projects",
                "{{projectId}}",
                "github",
                "link"
              ]
            },
            "description": "üîó **Link Project to GitHub Repository**\n\n**Features:**\n- üîê GitHub App authentication with installation tokens\n- üîç Repository validation and branch protection detection\n- ‚öôÔ∏è Configurable sync modes for different workflows\n- üõ°Ô∏è Enhanced SHA tracking for conflict prevention\n\n**Sync Modes:**\n- `protected_pr`: Safe PR-based workflow (recommended)\n- `hybrid`: Auto-merge when safe, PR when conflicts\n- `direct_commit`: Lovable-style direct commits to main\n\n**Requirements:**\n- GitHub App must be installed on the repository\n- Installation ID from GitHub App installation\n- Repository owner and name\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Repository linked successfully\",\n  \"config\": {\n    \"syncMode\": \"protected_pr\",\n    \"branchProtected\": true,\n    \"defaultBranch\": \"main\"\n  }\n}\n```"
          },
          "response": []
        },
        {
          "name": "Get GitHub Configuration",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Generate HMAC signature for request",
                  "const secret = pm.variables.get('sharedSecret');",
                  "const timestamp = Math.floor(Date.now() / 1000);",
                  "const path = `/v1/projects/${pm.variables.get('projectId')}/github/config`;",
                  "",
                  "const crypto = require('crypto-js');",
                  "const canonical = timestamp + '';",
                  "const signature = crypto.HmacSHA256(canonical, secret).toString();",
                  "",
                  "pm.request.headers.add({",
                  "    key: 'x-sheen-signature',",
                  "    value: signature",
                  "});",
                  "",
                  "pm.request.headers.add({",
                  "    key: 'x-sheen-timestamp',",
                  "    value: timestamp.toString()",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/v1/projects/{{projectId}}/github/config",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "projects",
                "{{projectId}}",
                "github",
                "config"
              ]
            },
            "description": "üìã **Get GitHub Configuration**\n\nRetrieve current GitHub integration settings for a project.\n\n**Response:**\n```json\n{\n  \"config\": {\n    \"repoOwner\": \"myorg\",\n    \"repoName\": \"my-project\",\n    \"syncMode\": \"protected_pr\",\n    \"syncEnabled\": true,\n    \"branchProtected\": true,\n    \"lastSyncedSha\": \"abc123...\",\n    \"lastRemoteSha\": \"def456...\"\n  }\n}\n```"
          },
          "response": []
        },
        {
          "name": "Update Sync Configuration",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Generate HMAC signature for request",
                  "const secret = pm.variables.get('sharedSecret');",
                  "const body = pm.request.body.raw;",
                  "const timestamp = Math.floor(Date.now() / 1000);",
                  "const path = `/v1/projects/${pm.variables.get('projectId')}/github/config`;",
                  "",
                  "const crypto = require('crypto-js');",
                  "const canonical = timestamp + body;",
                  "const signature = crypto.HmacSHA256(canonical, secret).toString();",
                  "",
                  "pm.request.headers.add({",
                  "    key: 'x-sheen-signature',",
                  "    value: signature",
                  "});",
                  "",
                  "pm.request.headers.add({",
                  "    key: 'x-sheen-timestamp',",
                  "    value: timestamp.toString()",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"syncMode\": \"hybrid\",\n  \"syncEnabled\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/projects/{{projectId}}/github/config",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "projects",
                "{{projectId}}",
                "github",
                "config"
              ]
            },
            "description": "‚öôÔ∏è **Update Sync Configuration**\n\nModify GitHub sync settings for a project.\n\n**Updatable Fields:**\n- `syncMode`: Change sync behavior\n- `syncEnabled`: Enable/disable sync\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Configuration updated\",\n  \"config\": {\n    \"syncMode\": \"hybrid\",\n    \"syncEnabled\": true\n  }\n}\n```"
          },
          "response": []
        },
        {
          "name": "Manual Sync to GitHub",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Generate HMAC signature for request",
                  "const secret = pm.variables.get('sharedSecret');",
                  "const body = pm.request.body.raw;",
                  "const timestamp = Math.floor(Date.now() / 1000);",
                  "const path = `/v1/projects/${pm.variables.get('projectId')}/github/sync-to`;",
                  "",
                  "const crypto = require('crypto-js');",
                  "const canonical = timestamp + body;",
                  "const signature = crypto.HmacSHA256(canonical, secret).toString();",
                  "",
                  "pm.request.headers.add({",
                  "    key: 'x-sheen-signature',",
                  "    value: signature",
                  "});",
                  "",
                  "pm.request.headers.add({",
                  "    key: 'x-sheen-timestamp',",
                  "    value: timestamp.toString()",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"commitMessage\": \"Manual sync: Updated project structure\",\n  \"force\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/projects/{{projectId}}/github/sync-to",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "projects",
                "{{projectId}}",
                "github",
                "sync-to"
              ]
            },
            "description": "üîÑ **Manual Sync to GitHub**\n\nTrigger a manual sync from Claude Worker to GitHub repository.\n\n**Options:**\n- `commitMessage`: Custom commit message\n- `force`: Force push (use with caution)\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"syncResult\": {\n    \"strategy\": \"pull_request\",\n    \"commitSha\": \"abc123...\",\n    \"prUrl\": \"https://github.com/org/repo/pull/42\"\n  },\n  \"operationId\": \"sync_operation_uuid\"\n}\n```"
          },
          "response": []
        },
        {
          "name": "Manual Sync from GitHub",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Generate HMAC signature for request",
                  "const secret = pm.variables.get('sharedSecret');",
                  "const body = pm.request.body.raw;",
                  "const timestamp = Math.floor(Date.now() / 1000);",
                  "const path = `/v1/projects/${pm.variables.get('projectId')}/github/sync-from`;",
                  "",
                  "const crypto = require('crypto-js');",
                  "const canonical = timestamp + body;",
                  "const signature = crypto.HmacSHA256(canonical, secret).toString();",
                  "",
                  "pm.request.headers.add({",
                  "    key: 'x-sheen-signature',",
                  "    value: signature",
                  "});",
                  "",
                  "pm.request.headers.add({",
                  "    key: 'x-sheen-timestamp',",
                  "    value: timestamp.toString()",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"targetSha\": \"def456789abcdef\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/projects/{{projectId}}/github/sync-from",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "projects",
                "{{projectId}}",
                "github",
                "sync-from"
              ]
            },
            "description": "üì• **Manual Sync from GitHub**\n\nTrigger a manual sync from GitHub repository to Claude Worker.\n\n**Options:**\n- `targetSha`: Specific commit to sync (optional, defaults to HEAD)\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"syncResult\": {\n    \"filesChanged\": 3,\n    \"fromSha\": \"abc123...\",\n    \"toSha\": \"def456...\"\n  },\n  \"operationId\": \"sync_operation_uuid\"\n}\n```"
          },
          "response": []
        },
        {
          "name": "Get Sync Status",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Generate HMAC signature for request",
                  "const secret = pm.variables.get('sharedSecret');",
                  "const timestamp = Math.floor(Date.now() / 1000);",
                  "const path = `/v1/projects/${pm.variables.get('projectId')}/github/sync-status`;",
                  "",
                  "const crypto = require('crypto-js');",
                  "const canonical = timestamp + '';",
                  "const signature = crypto.HmacSHA256(canonical, secret).toString();",
                  "",
                  "pm.request.headers.add({",
                  "    key: 'x-sheen-signature',",
                  "    value: signature",
                  "});",
                  "",
                  "pm.request.headers.add({",
                  "    key: 'x-sheen-timestamp',",
                  "    value: timestamp.toString()",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/v1/projects/{{projectId}}/github/sync-status",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "projects",
                "{{projectId}}",
                "github",
                "sync-status"
              ]
            },
            "description": "üìä **Get Sync Status**\n\nRetrieve current synchronization status and health metrics.\n\n**Response:**\n```json\n{\n  \"status\": {\n    \"inSync\": true,\n    \"lastSyncTime\": \"2025-09-01T12:00:00Z\",\n    \"pendingOperations\": 0,\n    \"conflicts\": [],\n    \"health\": \"healthy\"\n  },\n  \"metrics\": {\n    \"totalSyncs\": 142,\n    \"successfulSyncs\": 139,\n    \"failedSyncs\": 3,\n    \"avgSyncTime\": \"2.3s\"\n  }\n}\n```"
          },
          "response": []
        },
        {
          "name": "Unlink GitHub Repository",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Generate HMAC signature for request",
                  "const secret = pm.variables.get('sharedSecret');",
                  "const timestamp = Math.floor(Date.now() / 1000);",
                  "const path = `/v1/projects/${pm.variables.get('projectId')}/github/unlink`;",
                  "",
                  "const crypto = require('crypto-js');",
                  "const canonical = timestamp + '';",
                  "const signature = crypto.HmacSHA256(canonical, secret).toString();",
                  "",
                  "pm.request.headers.add({",
                  "    key: 'x-sheen-signature',",
                  "    value: signature",
                  "});",
                  "",
                  "pm.request.headers.add({",
                  "    key: 'x-sheen-timestamp',",
                  "    value: timestamp.toString()",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/v1/projects/{{projectId}}/github/unlink",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "projects",
                "{{projectId}}",
                "github",
                "unlink"
              ]
            },
            "description": "üîì **Unlink GitHub Repository**\n\nRemove GitHub integration from project. This stops all automatic syncing.\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Repository unlinked successfully\"\n}\n```"
          },
          "response": []
        },
        {
          "name": "GitHub Webhook",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "X-GitHub-Event",
                "value": "push"
              },
              {
                "key": "X-GitHub-Delivery",
                "value": "12345678-1234-1234-1234-123456789abc"
              },
              {
                "key": "X-Hub-Signature-256",
                "value": "sha256=example_signature"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"ref\": \"refs/heads/main\",\n  \"before\": \"abc123456789\",\n  \"after\": \"def123456789\",\n  \"repository\": {\n    \"full_name\": \"myorg/my-project\",\n    \"default_branch\": \"main\"\n  },\n  \"head_commit\": {\n    \"id\": \"def123456789\",\n    \"message\": \"Update README\",\n    \"timestamp\": \"2025-09-01T12:00:00Z\"\n  },\n  \"commits\": [\n    {\n      \"id\": \"def123456789\",\n      \"message\": \"Update README\",\n      \"added\": [\"new-file.txt\"],\n      \"modified\": [\"README.md\"],\n      \"removed\": []\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/webhooks/github/{{projectId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "webhooks",
                "github",
                "{{projectId}}"
              ]
            },
            "description": "ü™ù **GitHub Webhook Endpoint**\n\n**GitHub Integration Webhook**\n- üîê HMAC-SHA256 signature verification\n- ‚ö° <10s response time requirement\n- üîÑ Automatic deduplication via X-GitHub-Delivery ID\n- üö´ **No HMAC Authentication** (uses GitHub signature)\n\n**Supported Events:**\n- `push`: Repository commits\n- `pull_request`: PR events\n\n**Setup Requirements:**\n1. üîó Configure webhook URL in GitHub repository settings\n2. üîê Set webhook secret in GitHub\n3. üéØ Select push and pull_request events\n4. ‚úÖ Ensure webhook is active\n\n**Processing:**\n- ‚úÖ **Push to main**: Triggers sync from GitHub\n- üîÑ **Background processing**: Async queue handling\n- üìä **Conflict detection**: Enhanced SHA tracking\n- üîí **Deduplication**: 7-day Redis cache\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Webhook received and queued\",\n  \"operationId\": \"webhook_operation_uuid\"\n}\n```"
          },
          "response": []
        },
        {
          "name": "üöÄ Trigger GitHub Sync with SSE Tracking (NEW)",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Generate HMAC signature for request",
                  "const secret = pm.variables.get('sharedSecret');",
                  "const body = pm.request.body.raw;",
                  "const timestamp = Math.floor(Date.now() / 1000);",
                  "const path = `/v1/projects/${pm.variables.get('projectId')}/github/sync/trigger`;",
                  "",
                  "const crypto = require('crypto-js');",
                  "const canonical = timestamp + body;",
                  "const signature = crypto.HmacSHA256(canonical, secret).toString();",
                  "",
                  "pm.request.headers.add({",
                  "    key: 'x-sheen-signature',",
                  "    value: signature",
                  "});",
                  "",
                  "pm.request.headers.add({",
                  "    key: 'x-sheen-timestamp',",
                  "    value: timestamp.toString()",
                  "});",
                  "",
                  "pm.request.headers.add({",
                  "    key: 'x-sheen-nonce',",
                  "    value: require('crypto-js').lib.WordArray.random(16).toString()",
                  "});"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Extract operationId for SSE tracking",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.operations && response.operations.length > 0) {",
                  "        const operationId = response.operations[0].operationId;",
                  "        pm.globals.set('operationId', operationId);",
                  "        console.log('Operation ID set for SSE tracking:', operationId);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"direction\": \"both\",\n  \"versionId\": \"{{versionId}}\",\n  \"force\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/projects/{{projectId}}/github/sync/trigger",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "projects",
                "{{projectId}}",
                "github",
                "sync",
                "trigger"
              ]
            },
            "description": "üöÄ **Trigger GitHub Sync with Real-time SSE Events**\n\n**NEW FEATURE**: Unified sync endpoint with real-time event tracking!\n\n**Key Features:**\n- ‚ö° **Real-time SSE Events**: `github_sync_started`, `github_sync_progress`, `github_sync_completed`\n- üéØ **Operation Tracking**: Returns `operationId` for frontend SSE filtering\n- üîÑ **Bidirectional Sync**: Single endpoint for to/from/both directions\n- üìä **Progress Throttling**: +5% deltas or max 1/sec to prevent frontend overload\n- üîí **Terminal Event Guarantee**: Always emits completion or failure\n\n**Request Body:**\n```json\n{\n  \"direction\": \"both\" | \"to_github\" | \"from_github\",\n  \"versionId\": \"ver_abc123\",  // Required for to_github\n  \"force\": false\n}\n```\n\n**Response with operationId:**\n```json\n{\n  \"success\": true,\n  \"message\": \"GitHub sync operations queued\",\n  \"operations\": [\n    {\n      \"direction\": \"to_github\",\n      \"jobId\": \"github-push-proj-ver123\",\n      \"operationId\": \"github-push-proj-ver123\",\n      \"type\": \"push\",\n      \"versionId\": \"ver_abc123\"\n    }\n  ],\n  \"projectId\": \"proj-456\",\n  \"repository\": \"myorg/my-project\"\n}\n```\n\n**SSE Event Tracking:**\nUse the returned `operationId` to filter SSE events:\n\n```javascript\n// Connect to SSE stream\nconst eventSource = new EventSource('/api/projects/stream');\n\n// Filter events by operationId\neventSource.addEventListener('github_sync_progress', (event) => {\n  const data = JSON.parse(event.data).data;\n  if (data.operationId === 'your-operation-id') {\n    updateProgressBar(data.percent, data.message);\n  }\n});\n```\n\n**Error Codes:**\n- `APP_NOT_INSTALLED`: GitHub App not installed on repository\n- `BRANCH_PROTECTED`: Direct commit blocked, PR created instead  \n- `RATE_LIMIT`: GitHub API rate limit (auto-retry with backoff)\n- `INSUFFICIENT_PERMISSIONS`: Missing GitHub App permissions"
          },
          "response": []
        },
        {
          "name": "üì° Monitor GitHub Sync Events (SSE)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/projects/{{projectId}}/stream",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "projects",
                "{{projectId}}",
                "stream"
              ]
            },
            "description": "üì° **Server-Sent Events for GitHub Sync**\n\n**Real-time Event Stream**: Monitor GitHub sync progress with SSE\n\n**GitHub-Specific Events:**\n\n**üü¢ github_sync_started**\n```json\n{\n  \"operationId\": \"job-123\",\n  \"projectId\": \"proj-456\",\n  \"direction\": \"to_github\",\n  \"syncMode\": \"protected_pr\",\n  \"timestamp\": \"2025-09-01T10:30:00Z\"\n}\n```\n\n**üîÑ github_sync_progress** (Throttled: +5% or max 1/sec)\n```json\n{\n  \"operationId\": \"job-123\",\n  \"projectId\": \"proj-456\",\n  \"message\": \"Creating GitHub tree...\",\n  \"percent\": 45,\n  \"timestamp\": \"2025-09-01T10:30:00Z\"\n}\n```\n\n**‚ö†Ô∏è github_sync_conflict**\n```json\n{\n  \"operationId\": \"job-123\",\n  \"projectId\": \"proj-456\",\n  \"conflicts\": [\"src/App.tsx\", \"package.json\"],\n  \"strategy\": \"manual_review\",\n  \"resolutionRequired\": true,\n  \"timestamp\": \"2025-09-01T10:30:00Z\"\n}\n```\n\n**‚úÖ github_sync_completed**\n```json\n{\n  \"operationId\": \"job-123\",\n  \"projectId\": \"proj-456\",\n  \"status\": \"success\",\n  \"filesChanged\": 5,\n  \"commitSha\": \"abc123...\",\n  \"prUrl\": \"https://github.com/org/repo/pull/42\",\n  \"duration\": 15000,\n  \"timestamp\": \"2025-09-01T10:30:00Z\"\n}\n```\n\n**‚ùå github_sync_failed**\n```json\n{\n  \"operationId\": \"job-123\",\n  \"projectId\": \"proj-456\",\n  \"status\": \"failed\",\n  \"error_code\": \"BRANCH_PROTECTED\",\n  \"message\": \"Branch protection requires pull request\",\n  \"retryable\": false,\n  \"recovery_url\": \"https://github.com/settings\",\n  \"timestamp\": \"2025-09-01T10:30:00Z\"\n}\n```\n\n**Frontend Integration:**\n\n```javascript\n// 1. Trigger sync and get operationId\nfetch('/v1/projects/123/github/sync/trigger', {\n  method: 'POST',\n  body: JSON.stringify({ direction: 'both' })\n}).then(res => res.json()).then(data => {\n  const operationId = data.operations[0].operationId;\n  \n  // 2. Connect to SSE stream\n  const eventSource = new EventSource('/api/projects/123/stream');\n  \n  // 3. Filter events by operationId\n  eventSource.addEventListener('github_sync_progress', (event) => {\n    const eventData = JSON.parse(event.data).data;\n    if (eventData.operationId === operationId) {\n      updateProgressBar(eventData.percent, eventData.message);\n    }\n  });\n  \n  eventSource.addEventListener('github_sync_completed', (event) => {\n    const eventData = JSON.parse(event.data).data;\n    if (eventData.operationId === operationId) {\n      showSuccess('Sync completed!', eventData.prUrl);\n      eventSource.close();\n    }\n  });\n});\n```\n\n**Key Features:**\n- üéØ **Operation Filtering**: Use operationId to track specific syncs\n- üìä **Progress Throttling**: Smart throttling prevents frontend overload\n- üîí **Terminal Guarantee**: Always emits completed or failed\n- ‚ö° **Sub-second Updates**: Real-time progress feedback\n- üõ°Ô∏è **Error Recovery**: Standardized error codes with recovery URLs\n\n**Usage Notes:**\n- Keep connection open during sync operations\n- Filter events by operationId for multi-operation scenarios\n- Handle connection failures with reconnection logic\n- Close EventSource when sync completes to prevent memory leaks"
          },
          "response": []
        }
      ],
      "description": "üîÑ **GitHub 2-Way Sync Integration**\n\nüöÄ **Complete bidirectional sync** between Claude Worker and GitHub repositories with production-grade reliability.\n\n**üéØ Key Features:**\n- üîê **GitHub App Authentication**: Secure, fine-grained permissions\n- ‚ö° **Git Data API**: 3x performance improvement over Contents API\n- üîÑ **Webhook-driven**: Real-time sync with <10s response times\n- üõ°Ô∏è **Enhanced SHA Tracking**: Advanced conflict detection and resolution\n- ‚öôÔ∏è **Configurable Sync Modes**: Adapt to team workflows\n- üö´ **Redis Deduplication**: Prevents duplicate webhook processing\n- üì° **Real-time SSE Events**: GitHub-specific events with progress throttling (NEW!)\n\n**üîß Sync Modes:**\n- `protected_pr`: Safe PR-based workflow (recommended default)\n- `hybrid`: Auto-merge when safe, PR when conflicts detected\n- `direct_commit`: Lovable-style direct commits to main branch\n\n**üìä Enhanced Tracking:**\n- `last_remote_main_sha`: Latest seen on GitHub main\n- `last_synced_main_sha`: Last commit mirrored locally\n- `last_outbound_base_sha`: Base commit for PR creation\n\n**üîÑ Sync Workflows:**\n\n**Claude ‚Üí GitHub (Local to Remote):**\n1. üéØ **Smart Strategy Selection**: Based on branch protection and conflicts\n2. üöÄ **Git Data API**: Batch operations for performance\n3. üîç **Conflict Detection**: Fast-forward checking before push\n4. üìù **PR Creation**: Automatic when direct push not possible\n\n**GitHub ‚Üí Claude (Remote to Local):**\n1. ü™ù **Webhook Trigger**: GitHub push events\n2. ‚úÖ **HMAC Verification**: Secure webhook validation\n3. üîÑ **Background Processing**: Async queue for reliability\n4. üìä **Change Application**: File-by-file sync with conflict resolution\n\n**üõ°Ô∏è Conflict Resolution Strategies:**\n- `github_wins`: Accept remote changes (safe default)\n- `local_wins`: Preserve local changes\n- `manual_review`: Create PR for manual resolution\n- `auto_merge`: Attempt automatic merge\n\n**‚ö° Performance:**\n- **Webhook Response**: <10s guaranteed\n- **Sync Operations**: <30s for typical projects\n- **Rate Limiting**: Octokit throttling with retry logic\n- **Token Management**: 55-minute cache for 60-minute tokens\n\n**üîí Security:**\n- **GitHub App**: Least-privilege principle\n- **HMAC Signatures**: SHA-256 webhook verification\n- **Token Caching**: Secure Redis storage with TTL\n- **Replay Protection**: Delivery ID deduplication\n\n**üìã Setup Workflow:**\n1. üîß **Install GitHub App** on target repository\n2. üîó **Link Repository** via API with installation ID\n3. ü™ù **Configure Webhook** in repository settings\n4. ‚öôÔ∏è **Choose Sync Mode** based on team preferences\n5. üöÄ **Start Syncing** with automatic or manual triggers\n\n**üß™ Testing:**\nUse the provided endpoints to test the complete sync lifecycle:\n- Link/unlink repositories\n- Trigger manual syncs in both directions\n- Monitor sync status and health metrics\n- Test webhook processing with sample payloads\n\n**‚ö†Ô∏è Authentication:**\n- üîë **API Endpoints**: Require standard HMAC signatures\n- ü™ù **Webhook**: Uses GitHub's X-Hub-Signature-256 verification\n- üì± **GitHub App**: Installation tokens with automatic refresh\n\nThis system provides enterprise-grade GitHub integration that exceeds Lovable's capabilities while maintaining security and reliability."
    },
    {
      "name": "Chat Plan Mode",
      "item": [
        {
          "name": "Chat with AI (Simple Message)",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Generate HMAC signature for request",
                  "const secret = pm.variables.get('sharedSecret');",
                  "const body = pm.request.body.raw;",
                  "const path = '/v1/chat-plan';",
                  "",
                  "const crypto = require('crypto-js');",
                  "  const canonical = timestamp + body;  // CORRECT v1 format: timestamp + body",
                  "const signature = crypto.HmacSHA256(canonical, secret).toString();",
                  "",
                  "pm.request.headers.add({",
                  "    key: 'x-sheen-signature',",
                  "    value: signature",
                  "});"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Response successful\", function () {",
                  "    pm.response.to.have.status(200);",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.type).to.eql('chat_response');",
                  "    pm.expect(response.subtype).to.eql('success');",
                  "    ",
                  "    // Store sessionId for future requests",
                  "    if (response.sessionId) {",
                  "        pm.collectionVariables.set('sessionId', response.sessionId);",
                  "        console.log('Session ID stored:', response.sessionId);",
                  "    }",
                  "    ",
                  "    // Log the detected mode",
                  "    console.log('AI detected mode:', response.mode);",
                  "    console.log('Response data:', JSON.stringify(response.data, null, 2));",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"projectId\": \"{{projectId}}\",\n  \"message\": \"How do I add authentication to my React app?\",\n  \"locale\": \"en-US\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/chat-plan",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "chat-plan"
              ]
            },
            "description": "Send a message to the AI assistant. The AI automatically determines this is a question and returns a direct answer with code references."
          }
        },
        {
          "name": "Chat with AI (Feature Planning)",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Generate HMAC signature for request",
                  "const secret = pm.variables.get('sharedSecret');",
                  "const body = pm.request.body.raw;",
                  "const path = '/v1/chat-plan';",
                  "",
                  "const crypto = require('crypto-js');",
                  "  const canonical = timestamp + body;  // CORRECT v1 format: timestamp + body",
                  "const signature = crypto.HmacSHA256(canonical, secret).toString();",
                  "",
                  "pm.request.headers.add({",
                  "    key: 'x-sheen-signature',",
                  "    value: signature",
                  "});"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Response successful\", function () {",
                  "    pm.response.to.have.status(200);",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.type).to.eql('chat_response');",
                  "    pm.expect(response.subtype).to.eql('success');",
                  "    ",
                  "    // Store sessionId for reference",
                  "    if (response.sessionId) {",
                  "        pm.collectionVariables.set('sessionId', response.sessionId);",
                  "        console.log('Session ID stored:', response.sessionId);",
                  "    }",
                  "    ",
                  "    // Verify AI detected it as a feature",
                  "    pm.expect(response.mode).to.eql('feature');",
                  "    console.log('AI detected mode:', response.mode);",
                  "    console.log('Feature plan:', JSON.stringify(response.data, null, 2));",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"projectId\": \"{{projectId}}\",\n  \"message\": \"I want to add a dark mode toggle to my application settings\",\n  \"locale\": \"en-US\",\n  \"context\": {\n    \"includeProjectStructure\": true\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/chat-plan",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "chat-plan"
              ]
            },
            "description": "AI detects this as a feature request and creates an implementation plan with steps, dependencies, and estimated complexity. Can be converted to a build."
          }
        },
        {
          "name": "Chat with AI (Bug Report)",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Generate HMAC signature for request",
                  "const secret = pm.variables.get('sharedSecret');",
                  "const body = pm.request.body.raw;",
                  "const path = '/v1/chat-plan';",
                  "",
                  "const crypto = require('crypto-js');",
                  "  const canonical = timestamp + body;  // CORRECT v1 format: timestamp + body",
                  "const signature = crypto.HmacSHA256(canonical, secret).toString();",
                  "",
                  "pm.request.headers.add({",
                  "    key: 'x-sheen-signature',",
                  "    value: signature",
                  "});"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Response successful\", function () {",
                  "    pm.response.to.have.status(200);",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.type).to.eql('chat_response');",
                  "    pm.expect(response.subtype).to.eql('success');",
                  "    ",
                  "    // Store sessionId for reference",
                  "    if (response.sessionId) {",
                  "        pm.collectionVariables.set('sessionId', response.sessionId);",
                  "        console.log('Session ID stored:', response.sessionId);",
                  "    }",
                  "    ",
                  "    // Verify AI detected it as a fix",
                  "    pm.expect(response.mode).to.eql('fix');",
                  "    console.log('AI detected mode:', response.mode);",
                  "    console.log('Fix plan:', JSON.stringify(response.data, null, 2));",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"projectId\": \"{{projectId}}\",\n  \"message\": \"Users are reporting that the shopping cart total is not updating when they change quantities\",\n  \"locale\": \"en-US\",\n  \"context\": {\n    \"includeBuildErrors\": true\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/chat-plan",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "chat-plan"
              ]
            },
            "description": "AI detects this as a bug report and provides root cause analysis, affected files, and fix approach. Can be converted to a build."
          }
        },
        {
          "name": "Convert Plan to Build",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "",
                  "",
                  "// Store session ID from previous chat plan response",
                  "// pm.collectionVariables.set('sessionId', 'your-session-id');"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"sessionId\": \"{{sessionId}}\",\n  \"planData\": {\n    \"plan\": {\n      \"overview\": \"Add dark mode toggle\",\n      \"steps\": []\n    }\n  },\n  \"userId\": \"{{userId}}\",\n  \"projectId\": \"{{projectId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/chat-plan/convert-to-build",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "chat-plan",
                "convert-to-build"
              ]
            },
            "description": "Convert a chat plan session into an actual build. Use the sessionId and planData from a previous chat plan response."
          }
        },
        {
          "name": "Get Project Timeline",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Generate HMAC signature for GET request",
                  "const secret = pm.variables.get('sharedSecret');",
                  "const projectId = pm.variables.get('projectId');",
                  "const path = `/v1/project/${projectId}/timeline`;",
                  "",
                  "const crypto = require('crypto-js');",
                  "  const canonical = timestamp + '';  // CORRECT v1 format for GET: timestamp + empty",
                  "const signature = crypto.HmacSHA256(canonical, secret).toString();",
                  "",
                  "pm.request.headers.add({",
                  "    key: 'x-sheen-signature',",
                  "    value: signature",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/v1/project/{{projectId}}/timeline?limit=20&mode=all",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "project",
                "{{projectId}}",
                "timeline"
              ],
              "query": [
                {
                  "key": "limit",
                  "value": "20",
                  "description": "Number of items (1-100)"
                },
                {
                  "key": "offset",
                  "value": "0",
                  "description": "Pagination offset",
                  "disabled": true
                },
                {
                  "key": "mode",
                  "value": "all",
                  "description": "Filter: all, plan, or build"
                },
                {
                  "key": "includeHidden",
                  "value": "false",
                  "description": "Include hidden messages",
                  "disabled": true
                }
              ]
            },
            "description": "Get unified timeline of chat messages, builds, and deployments for a project."
          }
        },
        {
          "name": "Get Session Details (DISABLED - Admin Only)",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Generate HMAC signature for GET request",
                  "const secret = pm.variables.get('sharedSecret');",
                  "const sessionId = pm.variables.get('sessionId') || 'test-session-123';",
                  "const path = `/v1/chat-plan/session/${sessionId}`;",
                  "",
                  "const crypto = require('crypto-js');",
                  "  const canonical = timestamp + '';  // CORRECT v1 format for GET: timestamp + empty",
                  "const signature = crypto.HmacSHA256(canonical, secret).toString();",
                  "",
                  "pm.request.headers.add({",
                  "    key: 'x-sheen-signature',",
                  "    value: signature",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/v1/chat-plan/session/{{sessionId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "chat-plan",
                "session",
                "{{sessionId}}"
              ]
            },
            "description": "‚ö†Ô∏è CURRENTLY DISABLED: This endpoint exposes sensitive session data and should only be available to admin users. The endpoint is commented out in the code for security reasons."
          }
        },
        {
          "name": "Resume Chat Session",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Generate HMAC signature for request",
                  "const secret = pm.variables.get('sharedSecret');",
                  "const body = pm.request.body.raw;",
                  "const path = '/v1/chat-plan';",
                  "",
                  "const crypto = require('crypto-js');",
                  "  const canonical = timestamp + body;  // CORRECT v1 format: timestamp + body",
                  "const signature = crypto.HmacSHA256(canonical, secret).toString();",
                  "",
                  "pm.request.headers.add({",
                  "    key: 'x-sheen-signature',",
                  "    value: signature",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"projectId\": \"{{projectId}}\",\n  \"message\": \"Can you provide more details about the authentication approach?\",\n  \"locale\": \"en-US\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/chat-plan",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "chat-plan"
              ]
            },
            "description": "Continue the conversation. The backend automatically uses the last AI session ID stored in the projects table for context continuity. No need to pass sessionId."
          }
        },
        {
          "name": "Chat with AI (SSE Streaming)",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Generate HMAC signature for request",
                  "const secret = pm.variables.get('sharedSecret');",
                  "const body = pm.request.body.raw;",
                  "const path = '/v1/chat-plan';",
                  "",
                  "const crypto = require('crypto-js');",
                  "  const canonical = timestamp + body;  // CORRECT v1 format: timestamp + body",
                  "const signature = crypto.HmacSHA256(canonical, secret).toString();",
                  "",
                  "pm.request.headers.add({",
                  "    key: 'x-sheen-signature',",
                  "    value: signature",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Accept",
                "value": "text/event-stream",
                "description": "Request SSE streaming"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"projectId\": \"{{projectId}}\",\n  \"message\": \"Analyze my codebase for security vulnerabilities\",\n  \"locale\": \"en-US\",\n  \"context\": {\n    \"includeProjectStructure\": true,\n    \"includeVersionHistory\": true\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/chat-plan",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "chat-plan"
              ]
            },
            "description": "Use Server-Sent Events (SSE) for real-time streaming responses. Set Accept header to text/event-stream. AI will detect this as an analysis request and stream the response."
          }
        }
      ],
      "description": "Chat Plan Mode provides a conversational interface with AI-powered intent classification. Simply send your message and the AI determines the appropriate response type.\n\n**ü§ñ AI Auto-Detection:**\nThe AI automatically classifies your message as:\n- **Question**: \"How do I...\", \"What is...\", \"Where is...\"\n- **Feature**: \"Add...\", \"Implement...\", \"Create...\"\n- **Fix**: \"Fix...\", \"Not working\", \"Error when...\"\n- **Analysis**: \"Analyze...\", \"Review...\", \"Check...\"\n- **Build**: \"Build this\", \"Execute\", \"Deploy\"\n- **General**: Everything else\n\n**‚ú® Key Features:**\n- üåç Multi-language support (Arabic, French, Spanish, etc.)\n- üì° SSE streaming for real-time updates\n- üî® Convert plans to actual builds\n- üìä Unified timeline view of all interactions\n- üîÑ Automatic session continuity\n\n**üöÄ Simplified API:**\n- Frontend only sends: userId, projectId, message, locale\n- Backend handles: sessionId, versionId, buildId, context\n- AI determines: intent classification and response structure\n\n**üí∞ Billing:**\n- Questions: ~30 seconds AI time\n- Features: ~120 seconds AI time\n- Fixes: ~90 seconds AI time\n- Analysis: ~180 seconds AI time\n\n**üö´ Rate Limits:**\n- 100 requests/hour per user\n- 200 requests/hour per project\n- 50 messages max per session"
    },
    {
      "name": "Vercel Integration",
      "item": [
        {
          "name": "OAuth Flow",
          "item": [
            {
              "name": "Get Authorization URL",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC signature for GET request",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const path = '/v1/integrations/vercel/auth/url';",
                      "",
                      "const crypto = require('crypto-js');",
                      "const canonical = '' + path;  // Empty body for GET",
                      "const signature = crypto.HmacSHA256(canonical, secret).toString();",
                      "",
                      "pm.request.headers.add({",
                      "    key: 'x-sheen-signature',",
                      "    value: signature",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}"
                  },
                  {
                    "key": "X-User-Id",
                    "value": "{{userId}}"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/v1/integrations/vercel/auth/url?redirect_uri={{redirectUri}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "integrations",
                    "vercel",
                    "auth",
                    "url"
                  ],
                  "query": [
                    {
                      "key": "redirect_uri",
                      "value": "{{redirectUri}}",
                      "description": "OAuth redirect URI"
                    }
                  ]
                },
                "description": "Get the Vercel OAuth authorization URL for user authentication"
              }
            },
            {
              "name": "OAuth Callback",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC signature for request",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const body = pm.request.body.raw;",
                      "const path = '/v1/integrations/vercel/auth/callback';",
                      "",
                      "const crypto = require('crypto-js');",
                      "const canonical = body + path;",
                      "const signature = crypto.HmacSHA256(canonical, secret).toString();",
                      "",
                      "pm.request.headers.add({",
                      "    key: 'x-sheen-signature',",
                      "    value: signature",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}"
                  },
                  {
                    "key": "X-User-Id",
                    "value": "{{userId}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"code\": \"abc123def456\",\n  \"state\": \"random-state-string\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/v1/integrations/vercel/auth/callback",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "integrations",
                    "vercel",
                    "auth",
                    "callback"
                  ]
                },
                "description": "Complete OAuth flow with authorization code from Vercel"
              }
            }
          ],
          "description": "OAuth authentication flow for Vercel integration"
        },
        {
          "name": "Connection Management",
          "item": [
            {
              "name": "Get User Connections",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC signature for GET request",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const path = '/v1/integrations/vercel/connections';",
                      "",
                      "const crypto = require('crypto-js');",
                      "const canonical = '' + path;  // Empty body for GET",
                      "const signature = crypto.HmacSHA256(canonical, secret).toString();",
                      "",
                      "pm.request.headers.add({",
                      "    key: 'x-sheen-signature',",
                      "    value: signature",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}"
                  },
                  {
                    "key": "X-User-Id",
                    "value": "{{userId}}"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/v1/integrations/vercel/connections?status=active",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "integrations",
                    "vercel",
                    "connections"
                  ],
                  "query": [
                    {
                      "key": "status",
                      "value": "active",
                      "description": "Filter by status: active, inactive, error",
                      "disabled": true
                    }
                  ]
                },
                "description": "Get all Vercel connections for the authenticated user"
              }
            },
            {
              "name": "Delete Connection",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC signature for DELETE request",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const connectionId = pm.variables.get('vercelConnectionId') || 'conn_abc123';",
                      "const path = `/v1/integrations/vercel/connections/${connectionId}`;",
                      "",
                      "const crypto = require('crypto-js');",
                      "const canonical = '' + path;  // Empty body for DELETE",
                      "const signature = crypto.HmacSHA256(canonical, secret).toString();",
                      "",
                      "pm.request.headers.add({",
                      "    key: 'x-sheen-signature',",
                      "    value: signature",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "DELETE",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}"
                  },
                  {
                    "key": "X-User-Id",
                    "value": "{{userId}}"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/v1/integrations/vercel/connections/{{vercelConnectionId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "integrations",
                    "vercel",
                    "connections",
                    "{{vercelConnectionId}}"
                  ]
                },
                "description": "Delete a specific Vercel connection"
              }
            }
          ],
          "description": "Manage Vercel integration connections"
        },
        {
          "name": "Project Mapping",
          "item": [
            {
              "name": "Get Vercel Projects",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC signature for GET request",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const path = '/v1/integrations/vercel/projects';",
                      "",
                      "const crypto = require('crypto-js');",
                      "const canonical = '' + path;  // Empty body for GET",
                      "const signature = crypto.HmacSHA256(canonical, secret).toString();",
                      "",
                      "pm.request.headers.add({",
                      "    key: 'x-sheen-signature',",
                      "    value: signature",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}"
                  },
                  {
                    "key": "X-User-Id",
                    "value": "{{userId}}"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/v1/integrations/vercel/projects?connection_id={{vercelConnectionId}}&mapped_only=false",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "integrations",
                    "vercel",
                    "projects"
                  ],
                  "query": [
                    {
                      "key": "connection_id",
                      "value": "{{vercelConnectionId}}",
                      "description": "Filter by specific connection"
                    },
                    {
                      "key": "mapped_only",
                      "value": "false",
                      "description": "Show only mapped projects"
                    }
                  ]
                },
                "description": "Get Vercel projects available for mapping"
              }
            },
            {
              "name": "Map Project to Vercel",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC signature for request",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const body = pm.request.body.raw;",
                      "const projectId = pm.variables.get('projectId');",
                      "const path = `/v1/integrations/vercel/projects/${projectId}/map`;",
                      "",
                      "const crypto = require('crypto-js');",
                      "const canonical = body + path;",
                      "const signature = crypto.HmacSHA256(canonical, secret).toString();",
                      "",
                      "pm.request.headers.add({",
                      "    key: 'x-sheen-signature',",
                      "    value: signature",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}"
                  },
                  {
                    "key": "X-User-Id",
                    "value": "{{userId}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"vercel_project_id\": \"prj_abc123def456\",\n  \"connection_id\": \"conn_xyz789\",\n  \"auto_deploy\": true,\n  \"environment_mapping\": {\n    \"production\": \"production\",\n    \"preview\": \"staging\"\n  }\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/v1/integrations/vercel/projects/{{projectId}}/map",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "integrations",
                    "vercel",
                    "projects",
                    "{{projectId}}",
                    "map"
                  ]
                },
                "description": "Map a Claude project to a Vercel project for deployments"
              }
            }
          ],
          "description": "Map Claude projects to Vercel projects for deployment"
        },
        {
          "name": "Deployment Management",
          "item": [
            {
              "name": "Get Deployments",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC signature for GET request",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const path = '/v1/integrations/vercel/deployments';",
                      "",
                      "const crypto = require('crypto-js');",
                      "const canonical = '' + path;  // Empty body for GET",
                      "const signature = crypto.HmacSHA256(canonical, secret).toString();",
                      "",
                      "pm.request.headers.add({",
                      "    key: 'x-sheen-signature',",
                      "    value: signature",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}"
                  },
                  {
                    "key": "X-User-Id",
                    "value": "{{userId}}"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/v1/integrations/vercel/deployments?project_id={{projectId}}&limit=20&status=ready",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "integrations",
                    "vercel",
                    "deployments"
                  ],
                  "query": [
                    {
                      "key": "project_id",
                      "value": "{{projectId}}",
                      "description": "Filter by project ID"
                    },
                    {
                      "key": "limit",
                      "value": "20",
                      "description": "Number of deployments to return (1-100)"
                    },
                    {
                      "key": "offset",
                      "value": "0",
                      "description": "Pagination offset",
                      "disabled": true
                    },
                    {
                      "key": "status",
                      "value": "ready",
                      "description": "Filter by status: building, ready, error, canceled",
                      "disabled": true
                    }
                  ]
                },
                "description": "Get deployment history for Vercel projects"
              }
            },
            {
              "name": "Trigger Deployment",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC signature for request",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const body = pm.request.body.raw;",
                      "const path = '/v1/integrations/vercel/deployments/trigger';",
                      "",
                      "const crypto = require('crypto-js');",
                      "const canonical = body + path;",
                      "const signature = crypto.HmacSHA256(canonical, secret).toString();",
                      "",
                      "pm.request.headers.add({",
                      "    key: 'x-sheen-signature',",
                      "    value: signature",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}"
                  },
                  {
                    "key": "X-User-Id",
                    "value": "{{userId}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"project_id\": \"{{projectId}}\",\n  \"vercel_project_id\": \"prj_abc123def456\",\n  \"environment\": \"production\",\n  \"message\": \"Manual deployment from Claude\",\n  \"force\": false\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/v1/integrations/vercel/deployments/trigger",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "integrations",
                    "vercel",
                    "deployments",
                    "trigger"
                  ]
                },
                "description": "Manually trigger a deployment to Vercel"
              }
            }
          ],
          "description": "Manage deployments to Vercel"
        },
        {
          "name": "Webhook Management",
          "item": [
            {
              "name": "GitHub Webhook",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "X-GitHub-Event",
                    "value": "push"
                  },
                  {
                    "key": "X-GitHub-Delivery",
                    "value": "12345678-1234-1234-1234-123456789012"
                  },
                  {
                    "key": "X-Hub-Signature-256",
                    "value": "sha256=abcdef123456..."
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"ref\": \"refs/heads/main\",\n  \"before\": \"abc123def456\",\n  \"after\": \"def456ghi789\",\n  \"repository\": {\n    \"id\": 123456789,\n    \"name\": \"my-project\",\n    \"full_name\": \"username/my-project\",\n    \"html_url\": \"https://github.com/username/my-project\"\n  },\n  \"commits\": [\n    {\n      \"id\": \"def456ghi789\",\n      \"message\": \"Update homepage component\",\n      \"author\": {\n        \"name\": \"Developer\",\n        \"email\": \"dev@example.com\"\n      }\n    }\n  ]\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/v1/webhooks/vercel/github",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "webhooks",
                    "vercel",
                    "github"
                  ]
                },
                "description": "GitHub webhook for triggering Vercel deployments on push events"
              }
            },
            {
              "name": "GitLab Webhook",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "X-Gitlab-Event",
                    "value": "Push Hook"
                  },
                  {
                    "key": "X-Gitlab-Token",
                    "value": "webhook-secret-token"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"object_kind\": \"push\",\n  \"before\": \"abc123def456\",\n  \"after\": \"def456ghi789\",\n  \"ref\": \"refs/heads/main\",\n  \"project\": {\n    \"id\": 123456,\n    \"name\": \"my-project\",\n    \"path_with_namespace\": \"username/my-project\",\n    \"web_url\": \"https://gitlab.com/username/my-project\"\n  },\n  \"commits\": [\n    {\n      \"id\": \"def456ghi789\",\n      \"message\": \"Update API endpoints\",\n      \"author\": {\n        \"name\": \"Developer\",\n        \"email\": \"dev@example.com\"\n      }\n    }\n  ]\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/v1/webhooks/vercel/gitlab",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "webhooks",
                    "vercel",
                    "gitlab"
                  ]
                },
                "description": "GitLab webhook for triggering Vercel deployments on push events"
              }
            },
            {
              "name": "Bitbucket Webhook",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "X-Event-Key",
                    "value": "repo:push"
                  },
                  {
                    "key": "X-Request-UUID",
                    "value": "12345678-1234-1234-1234-123456789012"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"push\": {\n    \"changes\": [\n      {\n        \"new\": {\n          \"name\": \"main\",\n          \"target\": {\n            \"hash\": \"def456ghi789\",\n            \"message\": \"Fix responsive design issues\"\n          }\n        },\n        \"old\": {\n          \"target\": {\n            \"hash\": \"abc123def456\"\n          }\n        }\n      }\n    ]\n  },\n  \"repository\": {\n    \"uuid\": \"{12345678-1234-1234-1234-123456789012}\",\n    \"name\": \"my-project\",\n    \"full_name\": \"username/my-project\",\n    \"links\": {\n      \"html\": {\n        \"href\": \"https://bitbucket.org/username/my-project\"\n      }\n    }\n  }\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/v1/webhooks/vercel/bitbucket",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "webhooks",
                    "vercel",
                    "bitbucket"
                  ]
                },
                "description": "Bitbucket webhook for triggering Vercel deployments on push events"
              }
            }
          ],
          "description": "Webhook endpoints for Git repository integration"
        },
        {
          "name": "Environment Variables",
          "item": [
            {
              "name": "Get Environment Variables",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC signature for GET request",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const path = '/v1/integrations/vercel/env';",
                      "",
                      "const crypto = require('crypto-js');",
                      "const canonical = '' + path;  // Empty body for GET",
                      "const signature = crypto.HmacSHA256(canonical, secret).toString();",
                      "",
                      "pm.request.headers.add({",
                      "    key: 'x-sheen-signature',",
                      "    value: signature",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}"
                  },
                  {
                    "key": "X-User-Id",
                    "value": "{{userId}}"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/v1/integrations/vercel/env?project_id={{projectId}}&environment=production",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "integrations",
                    "vercel",
                    "env"
                  ],
                  "query": [
                    {
                      "key": "project_id",
                      "value": "{{projectId}}",
                      "description": "Filter by project ID"
                    },
                    {
                      "key": "environment",
                      "value": "production",
                      "description": "Filter by environment: production, preview, development",
                      "disabled": true
                    }
                  ]
                },
                "description": "Get environment variables for Vercel projects"
              }
            },
            {
              "name": "Sync Environment Variables",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC signature for request",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const body = pm.request.body.raw;",
                      "const path = '/v1/integrations/vercel/env/sync';",
                      "",
                      "const crypto = require('crypto-js');",
                      "const canonical = body + path;",
                      "const signature = crypto.HmacSHA256(canonical, secret).toString();",
                      "",
                      "pm.request.headers.add({",
                      "    key: 'x-sheen-signature',",
                      "    value: signature",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{accessToken}}"
                  },
                  {
                    "key": "X-User-Id",
                    "value": "{{userId}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"project_id\": \"{{projectId}}\",\n  \"vercel_project_id\": \"prj_abc123def456\",\n  \"environment_variables\": {\n    \"API_BASE_URL\": \"https://api.example.com\",\n    \"DATABASE_URL\": \"postgresql://...\",\n    \"REDIS_URL\": \"redis://...\"\n  },\n  \"environments\": [\"production\", \"preview\"],\n  \"overwrite\": false\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/v1/integrations/vercel/env/sync",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "integrations",
                    "vercel",
                    "env",
                    "sync"
                  ]
                },
                "description": "Sync environment variables from Claude project to Vercel"
              }
            }
          ],
          "description": "Manage environment variables sync between Claude and Vercel"
        },
        {
          "name": "Admin Endpoints",
          "item": [
            {
              "name": "Get All Connections (Admin)",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC signature for GET request",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const path = '/v1/admin/integrations/vercel/connections';",
                      "",
                      "const crypto = require('crypto-js');",
                      "const canonical = '' + path;  // Empty body for GET",
                      "const signature = crypto.HmacSHA256(canonical, secret).toString();",
                      "",
                      "pm.request.headers.add({",
                      "    key: 'x-sheen-signature',",
                      "    value: signature",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{adminAccessToken}}"
                  },
                  {
                    "key": "X-Admin-User-Id",
                    "value": "{{adminUserId}}"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/v1/admin/integrations/vercel/connections?limit=50&status=active",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "admin",
                    "integrations",
                    "vercel",
                    "connections"
                  ],
                  "query": [
                    {
                      "key": "limit",
                      "value": "50",
                      "description": "Number of connections to return (1-100)"
                    },
                    {
                      "key": "offset",
                      "value": "0",
                      "description": "Pagination offset",
                      "disabled": true
                    },
                    {
                      "key": "status",
                      "value": "active",
                      "description": "Filter by status: active, inactive, error",
                      "disabled": true
                    },
                    {
                      "key": "user_id",
                      "value": "",
                      "description": "Filter by user ID",
                      "disabled": true
                    }
                  ]
                },
                "description": "Admin endpoint to view all Vercel connections across users"
              }
            },
            {
              "name": "Get Deployment Stats (Admin)",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC signature for GET request",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const path = '/v1/admin/integrations/vercel/deployments/stats';",
                      "",
                      "const crypto = require('crypto-js');",
                      "const canonical = '' + path;  // Empty body for GET",
                      "const signature = crypto.HmacSHA256(canonical, secret).toString();",
                      "",
                      "pm.request.headers.add({",
                      "    key: 'x-sheen-signature',",
                      "    value: signature",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{adminAccessToken}}"
                  },
                  {
                    "key": "X-Admin-User-Id",
                    "value": "{{adminUserId}}"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/v1/admin/integrations/vercel/deployments/stats?period=7d&group_by=status",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "admin",
                    "integrations",
                    "vercel",
                    "deployments",
                    "stats"
                  ],
                  "query": [
                    {
                      "key": "period",
                      "value": "7d",
                      "description": "Stats period: 1d, 7d, 30d, 90d"
                    },
                    {
                      "key": "group_by",
                      "value": "status",
                      "description": "Group stats by: status, user, project"
                    },
                    {
                      "key": "project_id",
                      "value": "",
                      "description": "Filter by specific project",
                      "disabled": true
                    }
                  ]
                },
                "description": "Admin endpoint to get deployment statistics and analytics"
              }
            }
          ],
          "description": "Administrative endpoints for Vercel integration management"
        }
      ],
      "description": "Vercel Integration provides seamless deployment and management of Claude projects to Vercel hosting platform.\\n\\n**Key Features:**\\n- OAuth authentication with Vercel\\n- Project mapping and deployment automation\\n- Environment variable synchronization\\n- Git repository webhook support (GitHub, GitLab, Bitbucket)\\n- Real-time deployment status tracking\\n- Admin tools for monitoring and management\\n\\n**Supported Git Providers:**\\n- GitHub (with webhook signature verification)\\n- GitLab (with token authentication)\\n- Bitbucket (with UUID-based identification)\\n\\n**Environment Support:**\\n- Production deployments\\n- Preview/staging deployments\\n- Development environment sync\\n\\n**Security:**\\n- HMAC signature validation for all requests\\n- OAuth 2.0 flow with secure token storage\\n- Webhook signature verification\\n- Admin-only endpoints for sensitive operations\\n\\n**Rate Limits:**\\n- 50 requests/hour per user for OAuth operations\\n- 200 requests/hour per project for deployments\\n- 1000 requests/hour for webhook endpoints\\n- Admin endpoints: 500 requests/hour"
    },
    {
      "name": "Error Examples",
      "item": [
        {
          "name": "Invalid Signature (401)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-sheen-signature",
                "value": "invalid-signature",
                "description": "Intentionally invalid signature"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"userId\":\"{{userId}}\",\"projectId\":\"{{projectId}}\",\"prompt\":\"Test invalid signature\"}"
            },
            "url": {
              "raw": "{{baseUrl}}/generate",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "generate"
              ]
            },
            "description": "Example of invalid signature error"
          }
        },
        {
          "name": "Missing Parameters (400)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"userId\":\"{{userId}}\"}"
            },
            "url": {
              "raw": "{{baseUrl}}/generate",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "generate"
              ]
            },
            "description": "Example of missing required parameters"
          }
        }
      ]
    },
    {
      "name": "Debug & Testing",
      "item": [
        {
          "name": "Test HMAC Signatures",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"test\": \"data\",\n  \"timestamp\": \"{{$timestamp}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/admin/hmac/test-signature",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "admin",
                "hmac",
                "test-signature"
              ]
            },
            "description": "Test HMAC signature generation. This endpoint validates your signatures and returns diagnostic information."
          },
          "response": []
        }
      ]
    },
    {
      "name": "üöÄ Cloudflare Three-Lane Deployment",
      "description": "Intelligent Cloudflare deployment with automatic lane selection (Pages Static, Pages Edge, Workers Node.js) based on runtime requirements and Supabase integration.",
      "item": [
        {
          "name": "Detect Deployment Target",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-sheen-signature",
                "value": "{{$randomAlphaNumeric}}",
                "description": "HMAC-SHA256 signature will be calculated automatically"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"projectPath\": \"/path/to/project\",\n  \"userId\": \"{{userId}}\",\n  \"sheenProjectId\": \"{{projectId}}\",\n  \"projectId\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"versionId\": \"{{versionId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/cloudflare/detect-target",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "cloudflare",
                "detect-target"
              ]
            },
            "description": "üéØ **Detect Optimal Cloudflare Deployment Target**\n\n**What it does:**\n- Analyzes project code patterns (Next.js version, API routes, Node.js imports, ISR)\n- Detects Supabase integration requirements (OAuth vs manual, service-role needs)\n- Selects optimal deployment lane: Pages Static, Pages Edge, or Workers Node.js\n- Saves detection manifest to `.sheenapps/deploy-target.json`\n- Updates database with deployment lane information\n\n**Parameters:**\n- `projectPath` (required): Absolute path to project directory\n- `userId` (optional): For Supabase OAuth integration\n- `sheenProjectId` (optional): For Supabase OAuth integration\n- `projectId` (optional): UUID for database updates\n- `versionId` (optional): Version ID for database updates\n\n**Detection Logic:**\n1. Manual override (`.sheenapps/config.json`) takes precedence\n2. PPR (Partial Prerendering) ‚Üí Workers\n3. Next.js 15 ‚Üí Workers (by policy)\n4. Static export ‚Üí Pages Static\n5. Node.js patterns/ISR ‚Üí Workers\n6. Supabase service-role needs ‚Üí Workers\n7. API routes without edge flag ‚Üí Workers\n8. Default: Pages Edge or Static\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"detection\": {\n    \"target\": \"workers-node\",\n    \"reasons\": [\"Supabase server-side patterns require Workers\"],\n    \"origin\": \"detection\",\n    \"supabaseIntegration\": {\n      \"hasSupabase\": true,\n      \"needsServiceRole\": true\n    }\n  },\n  \"manifestSaved\": true\n}\n```"
          },
          "response": []
        },
        {
          "name": "Deploy Project (Three-Lane)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-sheen-signature",
                "value": "{{$randomAlphaNumeric}}",
                "description": "HMAC-SHA256 signature will be calculated automatically"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"projectPath\": \"/path/to/project\",\n  \"userId\": \"{{userId}}\",\n  \"sheenProjectId\": \"{{projectId}}\",\n  \"projectId\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"versionId\": \"{{versionId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/cloudflare/deploy",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "cloudflare",
                "deploy"
              ]
            },
            "description": "üöÄ **Deploy Project with Three-Lane Strategy**\n\n**What it does:**\n- Reads deployment target from `.sheenapps/deploy-target.json` manifest\n- Injects Supabase environment variables based on OAuth integration\n- Monitors build logs for Edge-incompatible patterns\n- Automatically switches targets if needed (e.g., Edge ‚Üí Workers)\n- Captures deployment URL and runs post-deploy validation\n- Updates database with final deployment results\n\n**Prerequisites:**\n- Run \"Detect Deployment Target\" first to generate manifest\n- Ensure Cloudflare environment variables are set:\n  - `CF_ACCOUNT_ID`\n  - `CLOUDFLARE_API_TOKEN` or `CF_API_TOKEN_WORKERS`\n\n**Deployment Lanes:**\n- **Pages Static**: Static sites, JAMstack, client-only apps\n- **Pages Edge**: SSR with Edge Runtime, Web APIs only\n- **Workers Node.js**: Full Node.js, ISR, service keys, complex logic\n\n**Environment Variable Security:**\n- Pages Static: Only `NEXT_PUBLIC_*` variables\n- Pages Edge: Public + limited server variables\n- Workers: Full environment access including service-role keys\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"deployment\": {\n    \"deployedUrl\": \"https://app.pages.dev\",\n    \"target\": \"workers-node\",\n    \"switched\": false\n  },\n  \"validationPassed\": true\n}\n```\n\n**Target Switching:**\nIf build logs detect Edge-incompatible code, the system automatically switches from Pages Edge to Workers Node.js."
          },
          "response": []
        },
        {
          "name": "Validate Deployment",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-sheen-signature",
                "value": "{{$randomAlphaNumeric}}",
                "description": "HMAC-SHA256 signature will be calculated automatically"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"deployedUrl\": \"https://your-app.pages.dev\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/cloudflare/validate-deployment",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "cloudflare",
                "validate-deployment"
              ]
            },
            "description": "‚úÖ **Validate Deployed Application**\n\n**What it does:**\n- Runs lightweight smoke tests on deployed application\n- Tests homepage accessibility (required)\n- Tests API health endpoint (optional)\n- Tests Next.js image optimization (optional)\n- Provides deployment health confirmation\n\n**Validation Tests:**\n1. **Homepage (/)** - Required test\n2. **API Health (/api/health)** - Optional\n3. **Image Optimization** - Optional Next.js feature test\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"validationPassed\": true,\n  \"message\": \"Deployment validation passed\"\n}\n```\n\n**Notes:**\n- Optional tests don't fail the validation\n- Timeouts are handled gracefully\n- Provides quick confidence that deployment is accessible"
          },
          "response": []
        },
        {
          "name": "Get Deployment History & Analytics",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "x-sheen-signature",
                "value": "{{$randomAlphaNumeric}}",
                "description": "HMAC-SHA256 signature will be calculated automatically"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/v1/cloudflare/deployment-history?limit=20&target=workers-node",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "cloudflare",
                "deployment-history"
              ],
              "query": [
                {
                  "key": "limit",
                  "value": "20",
                  "description": "Number of recent deployments (1-100)"
                },
                {
                  "key": "target",
                  "value": "workers-node",
                  "description": "Filter by deployment lane",
                  "disabled": true
                }
              ]
            },
            "description": "üìä **Get Deployment Lane History & Analytics**\n\n**What it returns:**\n- Recent deployment lane selections from database\n- Analytics on target distribution\n- Switch rate and manual override statistics\n- Performance metrics for deployment intelligence\n\n**Query Parameters:**\n- `limit` (optional): Number of deployments to return (1-100, default: 20)\n- `target` (optional): Filter by specific deployment lane\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"deployments\": [\n    {\n      \"timestamp\": \"2025-08-20T18:02:31.100Z\",\n      \"target\": \"workers-node\",\n      \"reasons\": [\"Supabase server-side patterns\"],\n      \"switched\": false\n    }\n  ],\n  \"analytics\": {\n    \"total\": 45,\n    \"targetDistribution\": {\n      \"workers-node\": 27,\n      \"pages-static\": 12,\n      \"pages-edge\": 6\n    },\n    \"switchRate\": 8.9,\n    \"manualOverrideRate\": 15.6\n  }\n}\n```\n\n**Analytics Insights:**\n- **Target Distribution**: Which lanes are most commonly selected\n- **Switch Rate**: Percentage of deployments that changed targets during build\n- **Manual Override Rate**: Percentage of manual vs automatic detection"
          },
          "response": []
        },
        {
          "name": "Get Deployment Guidance",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/v1/cloudflare/deployment-guidance",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "cloudflare",
                "deployment-guidance"
              ]
            },
            "description": "üìö **Get Deployment Lane Guidance & Documentation**\n\n**What it returns:**\n- Detailed information about each deployment lane\n- Use cases and limitations for each target\n- Detection criteria and pattern examples\n- Best practices for deployment configuration\n\n**No authentication required** - this is a documentation endpoint.\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"guidance\": {\n    \"lanes\": [\n      {\n        \"target\": \"pages-static\",\n        \"name\": \"Pages Static\",\n        \"description\": \"Static site generation with no server-side functionality\",\n        \"useCases\": [\"Static websites\", \"JAMstack applications\"],\n        \"limitations\": [\"No server-side rendering\", \"No API routes\"]\n      }\n    ],\n    \"detectionCriteria\": {\n      \"patterns\": [\n        {\n          \"pattern\": \"export const revalidate\",\n          \"target\": \"workers-node\",\n          \"reason\": \"ISR requires Node.js runtime\"\n        }\n      ]\n    }\n  }\n}\n```\n\n**Use Cases:**\n- Understanding deployment lane capabilities\n- Troubleshooting deployment target selection\n- Planning application architecture for optimal deployment\n- Learning about detection patterns and criteria"
          },
          "response": []
        }
      ]
    },
    {
      "name": "üì± Persistent Chat (NEW)",
      "item": [
        {
          "name": "Send Message",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-user-id",
                "value": "{{userId}}",
                "description": "UUID of user sending message"
              },
              {
                "key": "x-user-type",
                "value": "client",
                "description": "User type: client|assistant|advisor"
              },
              {
                "key": "x-sheen-locale",
                "value": "en",
                "description": "Locale code: en|ar|fr|es|de (optional)"
              },
              {
                "key": "x-sheen-signature",
                "value": "{{$randomAlphaNumeric}}",
                "description": "HMAC-SHA256 signature will be calculated automatically"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"text\": \"Hello team! Let's add a login page to our app.\",\n  \"mode\": \"unified\",\n  \"client_msg_id\": \"{{$guid}}\",\n  \"locale\": \"en-US\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/projects/{{projectId}}/chat/messages",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "projects",
                "{{projectId}}",
                "chat",
                "messages"
              ]
            },
            "description": "üí¨ **Send Message to Persistent Chat**\n\n**Features:**\n- ‚úÖ **Idempotency**: Use client_msg_id to prevent duplicates\n- üî¢ **Sequence-based**: Messages get atomic sequence numbers\n- üåç **i18n Support**: Locale-aware system messages\n- üì± **Cross-device sync**: Messages persist across sessions"
          },
          "response": []
        },
        {
          "name": "SSE Stream (Real-time)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "text/event-stream",
                "description": "Enable Server-Sent Events"
              },
              {
                "key": "x-user-id",
                "value": "{{userId}}",
                "description": "UUID of requesting user"
              },
              {
                "key": "x-sheen-locale",
                "value": "en",
                "description": "Locale code: en|ar|fr|es|de (optional)"
              },
              {
                "key": "x-sheen-signature",
                "value": "{{$randomAlphaNumeric}}",
                "description": "HMAC-SHA256 signature will be calculated automatically"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/v1/projects/{{projectId}}/chat/stream?from_seq=0",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "projects",
                "{{projectId}}",
                "chat",
                "stream"
              ],
              "query": [
                {
                  "key": "from_seq",
                  "value": "0",
                  "description": "Start streaming from sequence number"
                }
              ]
            },
            "description": "üîÑ **Real-time Message Streaming with Connection Limits**\n\n**‚ö†Ô∏è CONNECTION LIMITS (NEW):**\n- **Maximum**: 5 SSE connections per user/project\n- **429 Response**: When limit exceeded\n- **Fallback**: Use BroadcastChannel follower mode\n- **Recovery**: Automatic leader election when tabs close"
          },
          "response": []
        },
        {
          "name": "Get Message History",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "x-user-id",
                "value": "{{userId}}"
              },
              {
                "key": "x-sheen-signature",
                "value": "{{$randomAlphaNumeric}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/v1/projects/{{projectId}}/chat/messages?limit=20&order=desc",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "projects",
                "{{projectId}}",
                "chat",
                "messages"
              ],
              "query": [
                {
                  "key": "limit",
                  "value": "20",
                  "description": "Number of messages (1-100, default: 20)"
                },
                {
                  "key": "order",
                  "value": "desc",
                  "description": "asc|desc (default: desc)"
                }
              ]
            },
            "description": "üìú **Get Message History with Sequence-Based Pagination**\n\n**Features:**\n- üî¢ **Sequence-based pagination**: No race conditions\n- ‚ôæÔ∏è **Infinite scroll ready**: Perfect for chat UIs\n- üéØ **Flexible filtering**: By sequence range, mode, actor type"
          },
          "response": []
        },
        {
          "name": "Debug SSE Connections",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "x-user-id",
                "value": "{{userId}}"
              },
              {
                "key": "x-sheen-signature",
                "value": "{{$randomAlphaNumeric}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/v1/debug/sse-connections/{{projectId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "debug",
                "sse-connections",
                "{{projectId}}"
              ]
            },
            "description": "üîß **Debug SSE Connection Limits (Internal)**\n\n**NEW FEATURE**: Monitor SSE connection usage:\n- üìä **Active connections**: See all live SSE streams\n- üî¢ **Connection counts**: Current vs maximum allowed\n- üè• **Health status**: Redis connection manager health"
          },
          "response": []
        }
      ],
      "description": "üì± **Persistent Chat System - Production-Ready Real-Time Collaboration**\n\nüöÄ **NEW: SSE Connection Limits (Aug 24, 2025):**\n- ‚úÖ **Max 5 connections** per user/project (DoS protection)\n- üõ°Ô∏è **429 rate limiting** with graceful fallback\n- üì° **BroadcastChannel follower mode** for excess tabs\n- üîÑ **Automatic leader election** when leader tabs close\n\nüí¨ **Core Features:**\n- üî¢ **Sequence-based pagination**: No race conditions\n- üÜî **Idempotency protection**: Prevent duplicate messages\n- üì± **Cross-device sync**: Messages persist everywhere\n- üåç **i18n system messages**: Multi-language support\n- üì° **Real-time SSE**: WebSocket-free streaming\n- üë• **Presence & typing**: TTL-based indicators\n- üîç **Full-text search**: PostgreSQL FTS\n- ‚úÖ **Read receipts**: Cross-device read status\n\n‚ö†Ô∏è **Connection Limit Handling:**\nWhen SSE connection limit exceeded (5 per user/project):\n```json\n{\n  \"error\": \"too_many_connections\",\n  \"current_connections\": 5,\n  \"max_connections\": 5,\n  \"retry_after_ms\": 10000,\n  \"recommendation\": \"Close other chat windows or switch this tab to follower mode\"\n}\n```\n\nüéØ **Client Implementation:**\n1. **Try SSE connection** ‚Üí Handle 429 gracefully\n2. **On 429**: Switch to BroadcastChannel follower mode\n3. **Leader detection**: Automatic promotion when leader closes\n4. **Cross-tab sharing**: One connection serves multiple tabs\n\nSee `docs/CLIENT_SSE_CONNECTION_LIMITS.md` for complete implementation guide."
    },
    {
      "name": "üí≥ Stripe Payments (NEW)",
      "item": [
        {
          "name": "Create Checkout Session",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Generate HMAC signature for Stripe payments",
                  "const secret = pm.variables.get('sharedSecret');",
                  "const body = pm.request.body.raw;",
                  "const path = '/v1/payments/checkout';",
                  "",
                  "const crypto = require('crypto-js');",
                  "",
                  "// Generate timestamp and nonce",
                  "const timestamp = Math.floor(Date.now() / 1000);",
                  "const nonce = Math.random().toString(36).substring(7);",
                  "",
                  "// Create v1 signature (timestamp + body)",
                  "const v1Data = timestamp + body;",
                  "const v1Signature = crypto.HmacSHA256(v1Data, secret).toString(crypto.enc.Base64);",
                  "",
                  "// Create v2 signature (METHOD\\nPATH\\nTIMESTAMP\\nNONCE\\nBODY)",
                  "const v2Data = 'POST\\n' + path + '\\n' + timestamp + '\\n' + nonce + '\\n' + body;",
                  "const v2Signature = crypto.HmacSHA256(v2Data, secret).toString(crypto.enc.Base64);",
                  "",
                  "// Set headers",
                  "pm.request.headers.add({",
                  "  key: 'x-sheen-timestamp',",
                  "  value: timestamp.toString()",
                  "});",
                  "",
                  "pm.request.headers.add({",
                  "  key: 'x-sheen-nonce',",
                  "  value: nonce",
                  "});",
                  "",
                  "pm.request.headers.add({",
                  "  key: 'x-sheen-signature',",
                  "  value: v1Signature",
                  "});",
                  "",
                  "pm.request.headers.add({",
                  "  key: 'x-sheen-sig-v2',",
                  "  value: v2Signature",
                  "});",
                  "",
                  "// Generate mock claims for testing",
                  "const claims = {",
                  "  userId: pm.variables.get('userId'),",
                  "  email: 'test@example.com',",
                  "  roles: ['user'],",
                  "  issued: timestamp,",
                  "  expires: timestamp + 300",
                  "};",
                  "",
                  "pm.request.headers.add({",
                  "  key: 'x-sheen-claims',",
                  "  value: btoa(JSON.stringify(claims))",
                  "});",
                  "",
                  "pm.request.headers.add({",
                  "  key: 'x-idempotency-key',",
                  "  value: 'test-' + nonce + '-' + timestamp",
                  "});",
                  "",
                  "pm.request.headers.add({",
                  "  key: 'x-sheen-locale',",
                  "  value: 'en'",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"planId\": \"starter\",\n  \"trial\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/payments/checkout",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "payments",
                "checkout"
              ]
            },
            "description": "üí≥ **Create Stripe Checkout Session**\n\n**Features:**\n- ‚úÖ **Plan Selection**: starter, growth, scale plans\n- üÜì **Free Trials**: Optional 14-day trial period\n- üîí **HMAC Authentication**: Secure request signing\n- üîÑ **Idempotency**: Prevent duplicate checkout sessions\n- üåç **i18n Support**: Locale-aware checkout pages\n- üõ°Ô∏è **Price Validation**: Server-side allowlist protection\n\n**Response includes:**\n- `url`: Stripe checkout URL to redirect user\n- `sessionId`: Stripe session ID for tracking\n- `correlationId`: Request correlation ID"
          },
          "response": []
        },
        {
          "name": "Create Billing Portal Session",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Generate HMAC signature for billing portal",
                  "const secret = pm.variables.get('sharedSecret');",
                  "const body = pm.request.body.raw;",
                  "const path = '/v1/payments/portal';",
                  "",
                  "const crypto = require('crypto-js');",
                  "",
                  "// Generate timestamp and nonce",
                  "const timestamp = Math.floor(Date.now() / 1000);",
                  "const nonce = Math.random().toString(36).substring(7);",
                  "",
                  "// Create v1 signature",
                  "const v1Data = timestamp + body;",
                  "const v1Signature = crypto.HmacSHA256(v1Data, secret).toString(crypto.enc.Base64);",
                  "",
                  "// Create v2 signature",
                  "const v2Data = 'POST\\n' + path + '\\n' + timestamp + '\\n' + nonce + '\\n' + body;",
                  "const v2Signature = crypto.HmacSHA256(v2Data, secret).toString(crypto.enc.Base64);",
                  "",
                  "// Set headers",
                  "pm.request.headers.add({",
                  "  key: 'x-sheen-timestamp',",
                  "  value: timestamp.toString()",
                  "});",
                  "",
                  "pm.request.headers.add({",
                  "  key: 'x-sheen-nonce',",
                  "  value: nonce",
                  "});",
                  "",
                  "pm.request.headers.add({",
                  "  key: 'x-sheen-signature',",
                  "  value: v1Signature",
                  "});",
                  "",
                  "pm.request.headers.add({",
                  "  key: 'x-sheen-sig-v2',",
                  "  value: v2Signature",
                  "});",
                  "",
                  "// Generate mock claims",
                  "const claims = {",
                  "  userId: pm.variables.get('userId'),",
                  "  email: 'test@example.com',",
                  "  roles: ['user'],",
                  "  issued: timestamp,",
                  "  expires: timestamp + 300",
                  "};",
                  "",
                  "pm.request.headers.add({",
                  "  key: 'x-sheen-claims',",
                  "  value: btoa(JSON.stringify(claims))",
                  "});",
                  "",
                  "pm.request.headers.add({",
                  "  key: 'x-sheen-locale',",
                  "  value: 'en'",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"returnUrl\": \"https://yourapp.com/billing\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/payments/portal",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "payments",
                "portal"
              ]
            },
            "description": "üèõÔ∏è **Create Stripe Billing Portal Session**\n\n**Features:**\n- üí≥ **Manage Payment Methods**: Update cards and billing info\n- üìÑ **Download Invoices**: Access billing history\n- üîÑ **Manage Subscriptions**: Upgrade, downgrade, cancel\n- üåç **i18n Support**: Locale-aware portal\n- üîí **Secure Access**: Customer must have active subscription\n\n**Use Cases:**\n- User clicks \"Manage Billing\" in app\n- Customer needs to update payment method\n- Access to billing history and receipts"
          },
          "response": []
        },
        {
          "name": "Cancel Subscription",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Generate HMAC signature for subscription cancellation",
                  "const secret = pm.variables.get('sharedSecret');",
                  "const body = pm.request.body.raw;",
                  "const path = '/v1/payments/cancel';",
                  "",
                  "const crypto = require('crypto-js');",
                  "",
                  "// Generate timestamp and nonce",
                  "const timestamp = Math.floor(Date.now() / 1000);",
                  "const nonce = Math.random().toString(36).substring(7);",
                  "",
                  "// Create signatures",
                  "const v1Data = timestamp + body;",
                  "const v1Signature = crypto.HmacSHA256(v1Data, secret).toString(crypto.enc.Base64);",
                  "",
                  "const v2Data = 'POST\\n' + path + '\\n' + timestamp + '\\n' + nonce + '\\n' + body;",
                  "const v2Signature = crypto.HmacSHA256(v2Data, secret).toString(crypto.enc.Base64);",
                  "",
                  "// Set headers",
                  "pm.request.headers.add({",
                  "  key: 'x-sheen-timestamp',",
                  "  value: timestamp.toString()",
                  "});",
                  "",
                  "pm.request.headers.add({",
                  "  key: 'x-sheen-nonce',",
                  "  value: nonce",
                  "});",
                  "",
                  "pm.request.headers.add({",
                  "  key: 'x-sheen-signature',",
                  "  value: v1Signature",
                  "});",
                  "",
                  "pm.request.headers.add({",
                  "  key: 'x-sheen-sig-v2',",
                  "  value: v2Signature",
                  "});",
                  "",
                  "// Generate mock claims",
                  "const claims = {",
                  "  userId: pm.variables.get('userId'),",
                  "  email: 'test@example.com',",
                  "  roles: ['user'],",
                  "  issued: timestamp,",
                  "  expires: timestamp + 300",
                  "};",
                  "",
                  "pm.request.headers.add({",
                  "  key: 'x-sheen-claims',",
                  "  value: btoa(JSON.stringify(claims))",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"immediately\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/payments/cancel",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "payments",
                "cancel"
              ]
            },
            "description": "‚ùå **Cancel Subscription**\n\n**Features:**\n- üïê **End of Period**: Default cancellation at period end\n- ‚ö° **Immediate**: Optional immediate cancellation\n- üîí **User Authorization**: Can only cancel own subscription\n- üìä **Status Tracking**: Returns cancellation status\n\n**Cancellation Types:**\n- `immediately: false` ‚Üí Cancel at period end (recommended)\n- `immediately: true` ‚Üí Cancel immediately (prorates refund)"
          },
          "response": []
        },
        {
          "name": "Get Subscription Status",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Generate HMAC signature for status check",
                  "const secret = pm.variables.get('sharedSecret');",
                  "const userId = pm.variables.get('userId');",
                  "const path = '/v1/payments/status/' + userId;",
                  "const body = '';",
                  "",
                  "const crypto = require('crypto-js');",
                  "",
                  "// Generate timestamp and nonce",
                  "const timestamp = Math.floor(Date.now() / 1000);",
                  "const nonce = Math.random().toString(36).substring(7);",
                  "",
                  "// Create signatures (empty body for GET)",
                  "const v1Data = timestamp + body;",
                  "const v1Signature = crypto.HmacSHA256(v1Data, secret).toString(crypto.enc.Base64);",
                  "",
                  "const v2Data = 'GET\\n' + path + '\\n' + timestamp + '\\n' + nonce + '\\n' + body;",
                  "const v2Signature = crypto.HmacSHA256(v2Data, secret).toString(crypto.enc.Base64);",
                  "",
                  "// Set headers",
                  "pm.request.headers.add({",
                  "  key: 'x-sheen-timestamp',",
                  "  value: timestamp.toString()",
                  "});",
                  "",
                  "pm.request.headers.add({",
                  "  key: 'x-sheen-nonce',",
                  "  value: nonce",
                  "});",
                  "",
                  "pm.request.headers.add({",
                  "  key: 'x-sheen-signature',",
                  "  value: v1Signature",
                  "});",
                  "",
                  "pm.request.headers.add({",
                  "  key: 'x-sheen-sig-v2',",
                  "  value: v2Signature",
                  "});",
                  "",
                  "// Generate mock claims",
                  "const claims = {",
                  "  userId: userId,",
                  "  email: 'test@example.com',",
                  "  roles: ['user'],",
                  "  issued: timestamp,",
                  "  expires: timestamp + 300",
                  "};",
                  "",
                  "pm.request.headers.add({",
                  "  key: 'x-sheen-claims',",
                  "  value: btoa(JSON.stringify(claims))",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/v1/payments/status/{{userId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "payments",
                "status",
                "{{userId}}"
              ]
            },
            "description": "üìä **Get Subscription Status**\n\n**Features:**\n- üîç **Current Status**: Active, trialing, past_due, canceled\n- üìÖ **Period Info**: Current period end date\n- üí∞ **Plan Details**: Plan name and pricing info\n- üö´ **Cancellation Status**: Whether canceling at period end\n- üîí **User Security**: Can only check own subscription status\n\n**Response includes:**\n```json\n{\n  \"hasSubscription\": true,\n  \"status\": \"active\",\n  \"planName\": \"Growth Plan\",\n  \"currentPeriodEnd\": \"2025-09-25T12:00:00Z\",\n  \"cancelAtPeriodEnd\": false\n}\n```"
          },
          "response": []
        },
        {
          "name": "Stripe Webhook",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "stripe-signature",
                "value": "t=1629123456,v1=signature_here"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"evt_test_webhook\",\n  \"object\": \"event\",\n  \"api_version\": \"2020-08-27\",\n  \"created\": 1629123456,\n  \"data\": {\n    \"object\": {\n      \"id\": \"cs_test_session\",\n      \"object\": \"checkout.session\",\n      \"mode\": \"subscription\",\n      \"payment_status\": \"paid\",\n      \"subscription\": \"sub_test_123\",\n      \"client_reference_id\": \"user_123\",\n      \"metadata\": {\n        \"user_id\": \"user_123\",\n        \"plan_id\": \"starter\"\n      }\n    }\n  },\n  \"livemode\": false,\n  \"pending_webhooks\": 1,\n  \"request\": {\n    \"id\": \"req_test_123\",\n    \"idempotency_key\": null\n  },\n  \"type\": \"checkout.session.completed\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/payments/webhooks",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "payments",
                "webhooks"
              ]
            },
            "description": "üîó **Stripe Webhook Endpoint**\n\n**Features:**\n- ‚úÖ **Signature Verification**: Multi-secret webhook validation\n- ‚ö° **Fast Response**: <100ms acknowledgment to Stripe\n- üîÑ **Async Processing**: Background queue processing\n- üÜî **Deduplication**: Prevents duplicate event processing\n- üõ°Ô∏è **Security Validation**: Price allowlist enforcement\n- üìä **Event Coverage**: All subscription and payment events\n\n**‚ö†Ô∏è NO HMAC AUTHENTICATION**\nThis endpoint uses Stripe's signature verification instead of HMAC.\n\n**Supported Events:**\n- `checkout.session.completed`\n- `checkout.session.async_payment_succeeded`\n- `checkout.session.async_payment_failed`\n- `customer.subscription.updated`\n- `invoice.payment_succeeded`\n- `invoice.payment_failed`\n\n**Response:** Always returns 200 OK for valid signatures"
          },
          "response": []
        },
        {
          "name": "Payments Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/v1/payments/health",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "payments",
                "health"
              ]
            },
            "description": "üè• **Payments System Health Check**\n\n**Features:**\n- ‚úÖ **Environment Validation**: All required Stripe env vars\n- üîß **Configuration Status**: Price allowlist validation\n- üóÑÔ∏è **Database Connectivity**: Payment tables accessible\n- üîÑ **Queue Status**: Webhook processing queue health\n- üìä **Metrics**: Connection counts and processing stats\n\n**No Authentication Required**\nPublic health endpoint for monitoring systems.\n\n**Response:**\n```json\n{\n  \"status\": \"healthy\",\n  \"stripe\": {\n    \"configured\": true,\n    \"environment\": \"test\",\n    \"priceCount\": 3\n  },\n  \"database\": {\n    \"connected\": true,\n    \"migrations\": \"up-to-date\"\n  },\n  \"queue\": {\n    \"active\": true,\n    \"pending\": 0,\n    \"failed\": 0\n  }\n}\n```"
          },
          "response": []
        }
      ],
      "description": "üí≥ **Stripe Payments Integration - Production-Ready Payment Processing**\n\nüöÄ **NEW: Complete Payment System (Aug 25, 2025):**\n- üí∏ **Checkout Sessions**: Secure plan selection with trials\n- üèõÔ∏è **Billing Portal**: Customer self-service management\n- ‚ùå **Subscription Control**: Immediate or end-of-period cancellation\n- üìä **Status Tracking**: Real-time subscription monitoring\n- üîó **Webhook Processing**: Async event handling with deduplication\n\nüõ°Ô∏è **Security Features:**\n- üîí **HMAC Authentication**: Dual signature validation (v1/v2)\n- üõ°Ô∏è **Price Allowlist**: Server-side plan validation\n- üîÑ **Idempotency**: Prevent duplicate transactions\n- üë§ **User Authorization**: Claims-based access control\n- üéØ **Race Protection**: Unique constraints and advisory locks\n\nüí∞ **Supported Plans:**\n- üöÄ **Starter Plan**: Basic tier with optional trial\n- üìà **Growth Plan**: Mid-tier with advanced features\n- üèÜ **Scale Plan**: Enterprise tier with full access\n\nüåç **Internationalization:**\n- üá∫üá∏ **USD Pricing**: Primary currency support\n- üó£Ô∏è **Locale Support**: EN/AR/FR checkout and portal\n- üîÑ **Future Ready**: Multi-currency expansion path\n\n‚ö†Ô∏è **Authentication Notes:**\n- üîë **Payment Endpoints**: Require HMAC + Claims headers\n- üîó **Webhook Endpoint**: Uses Stripe signature verification only\n- üè• **Health Endpoint**: Public access for monitoring\n\nüìã **Required Headers for Payment Endpoints:**\n```\nx-sheen-signature: [HMAC v1 signature]\nx-sheen-sig-v2: [HMAC v2 signature]\nx-sheen-timestamp: [Unix timestamp]\nx-sheen-nonce: [Random replay protection]\nx-sheen-claims: [Base64 encoded user claims]\nx-idempotency-key: [Unique operation key]\nx-sheen-locale: [Optional locale code]\n```\n\nüéØ **Testing Workflow:**\n1. **Environment**: Configure Stripe test keys and price IDs\n2. **Health Check**: Verify system configuration\n3. **Checkout Flow**: Create session ‚Üí User pays ‚Üí Webhook confirms\n4. **Management**: Check status ‚Üí Access portal ‚Üí Cancel if needed\n5. **Monitoring**: Watch webhook processing and queue metrics\n\n‚ö° **Performance:**\n- **Checkout Creation**: <200ms response time\n- **Webhook Processing**: <100ms acknowledgment\n- **Status Queries**: <50ms database lookup\n- **Portal Sessions**: <150ms Stripe API call"
    },
    {
      "name": "üìù Sanity CMS Integration",
      "item": [
        {
          "name": "Connection Management",
          "item": [
            {
              "name": "Create Sanity Connection",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Generate HMAC signature for Sanity API",
                      "const secret = pm.variables.get('sharedSecret');",
                      "const body = pm.request.body.raw;",
                      "const timestamp = Math.floor(Date.now() / 1000).toString();",
                      "const method = 'POST';",
                      "const path = '/api/integrations/sanity/connect';",
                      "",
                      "const crypto = require('crypto-js');",
                      "const message = method + '\\n' + path + '\\n' + body + '\\n' + timestamp;",
                      "const signature = crypto.HmacSHA256(message, secret).toString();",
                      "",
                      "pm.request.headers.upsert({",
                      "    key: 'X-Signature',",
                      "    value: 'hmac-sha256=' + signature",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'X-Timestamp',",
                      "    value: timestamp",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"projectId\": \"{{projectId}}\",\n  \"sanityProjectId\": \"abcd1234\",\n  \"datasetName\": \"production\",\n  \"projectTitle\": \"My Sanity Project\",\n  \"authToken\": \"sanity-auth-token-here\",\n  \"robotToken\": \"sanity-robot-token-optional\",\n  \"tokenType\": \"personal\",\n  \"apiVersion\": \"2023-05-03\",\n  \"useCdn\": true,\n  \"perspective\": \"published\",\n  \"realtimeEnabled\": false,\n  \"webhookSecret\": \"webhook-secret-optional\",\n  \"i18nStrategy\": \"document\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/integrations/sanity/connect",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "integrations",
                    "sanity",
                    "connect"
                  ]
                }
              }
            },
            {
              "name": "List Sanity Connections",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "const secret = pm.variables.get('sharedSecret');",
                      "const timestamp = Math.floor(Date.now() / 1000).toString();",
                      "const method = 'GET';",
                      "const path = '/api/integrations/sanity/connections';",
                      "const body = '';",
                      "",
                      "const crypto = require('crypto-js');",
                      "const message = method + '\\n' + path + '\\n' + body + '\\n' + timestamp;",
                      "const signature = crypto.HmacSHA256(message, secret).toString();",
                      "",
                      "pm.request.headers.upsert({",
                      "    key: 'X-Signature',",
                      "    value: 'hmac-sha256=' + signature",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'X-Timestamp',",
                      "    value: timestamp",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/integrations/sanity/connections?userId={{userId}}&limit=50&offset=0",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "integrations",
                    "sanity",
                    "connections"
                  ],
                  "query": [
                    {
                      "key": "userId",
                      "value": "{{userId}}"
                    },
                    {
                      "key": "limit",
                      "value": "50"
                    },
                    {
                      "key": "offset",
                      "value": "0"
                    }
                  ]
                }
              }
            },
            {
              "name": "Get Connection Details",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "const secret = pm.variables.get('sharedSecret');",
                      "const timestamp = Math.floor(Date.now() / 1000).toString();",
                      "const method = 'GET';",
                      "const connectionId = pm.variables.get('sanityConnectionId') || 'uuid-here';",
                      "const path = '/api/integrations/sanity/connections/' + connectionId;",
                      "const body = '';",
                      "",
                      "const crypto = require('crypto-js');",
                      "const message = method + '\\n' + path + '\\n' + body + '\\n' + timestamp;",
                      "const signature = crypto.HmacSHA256(message, secret).toString();",
                      "",
                      "pm.request.headers.upsert({",
                      "    key: 'X-Signature',",
                      "    value: 'hmac-sha256=' + signature",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'X-Timestamp',",
                      "    value: timestamp",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/integrations/sanity/connections/{{sanityConnectionId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "integrations",
                    "sanity",
                    "connections",
                    "{{sanityConnectionId}}"
                  ]
                }
              }
            },
            {
              "name": "Update Connection",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "const secret = pm.variables.get('sharedSecret');",
                      "const body = pm.request.body.raw;",
                      "const timestamp = Math.floor(Date.now() / 1000).toString();",
                      "const method = 'PUT';",
                      "const connectionId = pm.variables.get('sanityConnectionId') || 'uuid-here';",
                      "const path = '/api/integrations/sanity/connections/' + connectionId;",
                      "",
                      "const crypto = require('crypto-js');",
                      "const message = method + '\\n' + path + '\\n' + body + '\\n' + timestamp;",
                      "const signature = crypto.HmacSHA256(message, secret).toString();",
                      "",
                      "pm.request.headers.upsert({",
                      "    key: 'X-Signature',",
                      "    value: 'hmac-sha256=' + signature",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'X-Timestamp',",
                      "    value: timestamp",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"projectTitle\": \"Updated Sanity Project\",\n  \"apiVersion\": \"2023-05-03\",\n  \"useCdn\": false,\n  \"perspective\": \"previewDrafts\",\n  \"realtimeEnabled\": true,\n  \"i18nStrategy\": \"field\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/integrations/sanity/connections/{{sanityConnectionId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "integrations",
                    "sanity",
                    "connections",
                    "{{sanityConnectionId}}"
                  ]
                }
              }
            },
            {
              "name": "Delete Connection",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "const secret = pm.variables.get('sharedSecret');",
                      "const timestamp = Math.floor(Date.now() / 1000).toString();",
                      "const method = 'DELETE';",
                      "const connectionId = pm.variables.get('sanityConnectionId') || 'uuid-here';",
                      "const path = '/api/integrations/sanity/connections/' + connectionId;",
                      "const body = '';",
                      "",
                      "const crypto = require('crypto-js');",
                      "const message = method + '\\n' + path + '\\n' + body + '\\n' + timestamp;",
                      "const signature = crypto.HmacSHA256(message, secret).toString();",
                      "",
                      "pm.request.headers.upsert({",
                      "    key: 'X-Signature',",
                      "    value: 'hmac-sha256=' + signature",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'X-Timestamp',",
                      "    value: timestamp",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "DELETE",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/integrations/sanity/connections/{{sanityConnectionId}}?userId={{userId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "integrations",
                    "sanity",
                    "connections",
                    "{{sanityConnectionId}}"
                  ],
                  "query": [
                    {
                      "key": "userId",
                      "value": "{{userId}}"
                    }
                  ]
                }
              }
            }
          ]
        },
        {
          "name": "Testing & Health",
          "item": [
            {
              "name": "Test Connection",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "const secret = pm.variables.get('sharedSecret');",
                      "const body = pm.request.body.raw;",
                      "const timestamp = Math.floor(Date.now() / 1000).toString();",
                      "const method = 'POST';",
                      "const path = '/api/integrations/sanity/test-connection';",
                      "",
                      "const crypto = require('crypto-js');",
                      "const message = method + '\\n' + path + '\\n' + body + '\\n' + timestamp;",
                      "const signature = crypto.HmacSHA256(message, secret).toString();",
                      "",
                      "pm.request.headers.upsert({",
                      "    key: 'X-Signature',",
                      "    value: 'hmac-sha256=' + signature",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'X-Timestamp',",
                      "    value: timestamp",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"sanityProjectId\": \"abcd1234\",\n  \"datasetName\": \"production\",\n  \"authToken\": \"sanity-token-here\",\n  \"apiVersion\": \"2023-05-03\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/integrations/sanity/test-connection",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "integrations",
                    "sanity",
                    "test-connection"
                  ]
                }
              }
            },
            {
              "name": "Health Check",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "const secret = pm.variables.get('sharedSecret');",
                      "const timestamp = Math.floor(Date.now() / 1000).toString();",
                      "const method = 'POST';",
                      "const connectionId = pm.variables.get('sanityConnectionId') || 'uuid-here';",
                      "const path = '/api/integrations/sanity/connections/' + connectionId + '/health-check';",
                      "const body = '';",
                      "",
                      "const crypto = require('crypto-js');",
                      "const message = method + '\\n' + path + '\\n' + body + '\\n' + timestamp;",
                      "const signature = crypto.HmacSHA256(message, secret).toString();",
                      "",
                      "pm.request.headers.upsert({",
                      "    key: 'X-Signature',",
                      "    value: 'hmac-sha256=' + signature",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'X-Timestamp',",
                      "    value: timestamp",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/integrations/sanity/connections/{{sanityConnectionId}}/health-check",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "integrations",
                    "sanity",
                    "connections",
                    "{{sanityConnectionId}}",
                    "health-check"
                  ]
                }
              }
            }
          ]
        },
        {
          "name": "Preview System",
          "item": [
            {
              "name": "Create Preview",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "const secret = pm.variables.get('sharedSecret');",
                      "const body = pm.request.body.raw;",
                      "const timestamp = Math.floor(Date.now() / 1000).toString();",
                      "const method = 'POST';",
                      "const connectionId = pm.variables.get('sanityConnectionId') || 'uuid-here';",
                      "const path = '/api/integrations/sanity/connections/' + connectionId + '/preview';",
                      "",
                      "const crypto = require('crypto-js');",
                      "const message = method + '\\n' + path + '\\n' + body + '\\n' + timestamp;",
                      "const signature = crypto.HmacSHA256(message, secret).toString();",
                      "",
                      "pm.request.headers.upsert({",
                      "    key: 'X-Signature',",
                      "    value: 'hmac-sha256=' + signature",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'X-Timestamp',",
                      "    value: timestamp",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"documentIds\": [\n    \"doc1\",\n    \"doc2\"\n  ],\n  \"expiresIn\": 3600,\n  \"allowedOrigins\": [\n    \"https://app.example.com\"\n  ],\n  \"previewMode\": \"draft\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/integrations/sanity/connections/{{sanityConnectionId}}/preview",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "integrations",
                    "sanity",
                    "connections",
                    "{{sanityConnectionId}}",
                    "preview"
                  ]
                }
              }
            },
            {
              "name": "Validate Preview",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/integrations/sanity/preview/{{sanityPreviewId}}/validate?secret={{previewSecret}}&origin=https://app.example.com",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "integrations",
                    "sanity",
                    "preview",
                    "{{sanityPreviewId}}",
                    "validate"
                  ],
                  "query": [
                    {
                      "key": "secret",
                      "value": "{{previewSecret}}"
                    },
                    {
                      "key": "origin",
                      "value": "https://app.example.com"
                    }
                  ]
                }
              }
            },
            {
              "name": "Get Preview Content",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/integrations/sanity/preview/{{sanityPreviewId}}/content?secret={{previewSecret}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "integrations",
                    "sanity",
                    "preview",
                    "{{sanityPreviewId}}",
                    "content"
                  ],
                  "query": [
                    {
                      "key": "secret",
                      "value": "{{previewSecret}}"
                    }
                  ]
                }
              }
            }
          ]
        },
        {
          "name": "üö® Breakglass Recovery (Admin Only)",
          "item": [
            {
              "name": "Check Breakglass Status",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "const secret = pm.variables.get('sharedSecret');",
                      "const timestamp = Math.floor(Date.now() / 1000).toString();",
                      "const method = 'GET';",
                      "const connectionId = pm.variables.get('sanityConnectionId') || 'uuid-here';",
                      "const path = '/api/integrations/sanity/breakglass/' + connectionId + '/status';",
                      "const body = '';",
                      "",
                      "const crypto = require('crypto-js');",
                      "const message = method + '\\n' + path + '\\n' + body + '\\n' + timestamp;",
                      "const signature = crypto.HmacSHA256(message, secret).toString();",
                      "",
                      "pm.request.headers.upsert({",
                      "    key: 'X-Signature',",
                      "    value: 'hmac-sha256=' + signature",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'X-Timestamp',",
                      "    value: timestamp",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/integrations/sanity/breakglass/{{sanityConnectionId}}/status",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "integrations",
                    "sanity",
                    "breakglass",
                    "{{sanityConnectionId}}",
                    "status"
                  ]
                }
              }
            },
            {
              "name": "Emergency Credential Access",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "const secret = pm.variables.get('sharedSecret');",
                      "const body = pm.request.body.raw;",
                      "const timestamp = Math.floor(Date.now() / 1000).toString();",
                      "const method = 'POST';",
                      "const connectionId = pm.variables.get('sanityConnectionId') || 'uuid-here';",
                      "const path = '/api/integrations/sanity/breakglass/' + connectionId + '/access';",
                      "",
                      "const crypto = require('crypto-js');",
                      "const message = method + '\\n' + path + '\\n' + body + '\\n' + timestamp;",
                      "const signature = crypto.HmacSHA256(message, secret).toString();",
                      "",
                      "pm.request.headers.upsert({",
                      "    key: 'X-Signature',",
                      "    value: 'hmac-sha256=' + signature",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'X-Timestamp',",
                      "    value: timestamp",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"adminId\": \"{{adminId}}\",\n  \"justification\": \"Production emergency - encrypted tokens corrupted, need immediate access to resolve customer-facing issue\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/integrations/sanity/breakglass/{{sanityConnectionId}}/access",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "integrations",
                    "sanity",
                    "breakglass",
                    "{{sanityConnectionId}}",
                    "access"
                  ]
                }
              }
            }
          ]
        },
        {
          "name": "Webhooks",
          "item": [
            {
              "name": "Sanity Webhook (No HMAC Auth)",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Sanity-Webhook-Signature",
                    "value": "sanity-signature-here"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"_type\": \"document\",\n  \"_id\": \"doc-123\",\n  \"operation\": \"update\",\n  \"document\": {\n    \"_id\": \"doc-123\",\n    \"_type\": \"article\",\n    \"title\": \"Updated Article\",\n    \"_updatedAt\": \"2025-09-08T12:00:00Z\"\n  }\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/integrations/sanity/webhook/{{sanityConnectionId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "integrations",
                    "sanity",
                    "webhook",
                    "{{sanityConnectionId}}"
                  ]
                }
              }
            },
            {
              "name": "Get Webhook History",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "const secret = pm.variables.get('sharedSecret');",
                      "const timestamp = Math.floor(Date.now() / 1000).toString();",
                      "const method = 'GET';",
                      "const connectionId = pm.variables.get('sanityConnectionId') || 'uuid-here';",
                      "const path = '/api/integrations/sanity/connections/' + connectionId + '/webhooks';",
                      "const body = '';",
                      "",
                      "const crypto = require('crypto-js');",
                      "const message = method + '\\n' + path + '\\n' + body + '\\n' + timestamp;",
                      "const signature = crypto.HmacSHA256(message, secret).toString();",
                      "",
                      "pm.request.headers.upsert({",
                      "    key: 'X-Signature',",
                      "    value: 'hmac-sha256=' + signature",
                      "});",
                      "pm.request.headers.upsert({",
                      "    key: 'X-Timestamp',",
                      "    value: timestamp",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/integrations/sanity/connections/{{sanityConnectionId}}/webhooks?limit=50&offset=0",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "integrations",
                    "sanity",
                    "connections",
                    "{{sanityConnectionId}}",
                    "webhooks"
                  ],
                  "query": [
                    {
                      "key": "limit",
                      "value": "50"
                    },
                    {
                      "key": "offset",
                      "value": "0"
                    }
                  ]
                }
              }
            }
          ]
        }
      ]
    },
    {
      "name": "üëë Admin Panel API (v1.0)",
      "item": [
        {
          "name": "üîê Token Exchange",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"supabase_access_token\": \"your_supabase_access_token_here\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/admin/auth/exchange",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "admin",
                "auth",
                "exchange"
              ]
            },
            "description": "üîê **Admin Authentication Token Exchange**\n\n**NEW SECURE FLOW**: Exchange Supabase access token for Admin JWT\n\n**Features:**\n- üîí **Supabase Integration**: Validates access token via JWKS\n- üõ°Ô∏è **MFA Verification**: Requires enrolled and verified MFA\n- üëë **Admin Privilege Check**: Validates admin permissions in database\n- ‚è±Ô∏è **Short-Lived JWT**: 12-minute expiration with session tracking\n- üìä **Audit Logging**: Complete authentication trail\n\n**Requirements:**\n- Valid Supabase access token from authenticated session\n- MFA enrolled and verified on account\n- Admin privileges granted in user_admin_status table\n- Active Supabase session with proper scope\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"admin_jwt\": \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...\",\n  \"expires_at\": \"2025-08-31T10:42:00Z\",\n  \"expires_in\": 720,\n  \"session_id\": \"admin_1693478400_xyz789\",\n  \"permissions\": [\"users.read\", \"users.write\", \"finance.refund\"],\n  \"user\": {\n    \"id\": \"user_uuid\",\n    \"email\": \"admin@example.com\",\n    \"role\": \"admin\"\n  }\n}\n```\n\n**Security Features:**\n- JWT signed with HS256 and server secret\n- Session tracking for audit and revocation\n- IP and user agent logging\n- Automatic session cleanup\n\n**Error Responses:**\n- 400: Missing supabase_access_token\n- 401: Invalid or expired Supabase token\n- 403: MFA not enrolled or insufficient privileges\n- 500: Server error during verification"
          },
          "response": []
        },
        {
          "name": "üîë Direct Login",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admindev@sheenapps.com\",\n  \"password\": \"TestAdminSheenApps481!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/admin/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "admin",
                "auth",
                "login"
              ]
            },
            "description": "üîë **Admin Direct Login**\n\n**DEVELOPMENT/TEST FLOW**: Login directly with email and password\n\n**Features:**\n- üîí **Direct Authentication**: Email/password login for development\n- üëë **Admin Privilege Check**: Validates admin permissions in database or JWT metadata\n- ‚è±Ô∏è **Short-Lived JWT**: 12-minute expiration with session tracking\n- üìä **Session Management**: Complete session tracking\n\n**Requirements:**\n- Valid admin user credentials\n- Admin privileges in user_admin_status table OR auth.users metadata\n- No MFA requirement for development flow\n\n**Request:**\n```json\n{\n  \"email\": \"admindev@sheenapps.com\",\n  \"password\": \"your_password_here\"\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"admin_jwt\": \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...\",\n  \"expires_at\": \"2025-08-31T10:42:00Z\",\n  \"expires_in\": 720,\n  \"session_id\": \"admin_1693478400_xyz789\",\n  \"permissions\": [\"admin:*\", \"user:*\", \"promotion:*\"],\n  \"user\": {\n    \"id\": \"550c8bfe-8ff4-48f6-b63d-3e29a78436ab\",\n    \"email\": \"admindev@sheenapps.com\",\n    \"role\": \"admin\"\n  },\n  \"correlationId\": \"req_1735920720456_xyz789\"\n}\n```\n\n**Test Credentials (Development Only):**\n- Email: `admindev@sheenapps.com`\n- Password: `TestAdminSheenApps481!`\n\n**Security Notes:**\n- Use Token Exchange endpoint for production with MFA\n- This endpoint is primarily for development/testing\n- Still validates admin privileges in database\n\n**Error Responses:**\n- 400: Missing email or password\n- 401: Invalid credentials\n- 403: User lacks admin privileges\n- 500: Server error during authentication"
          },
          "response": []
        },
        {
          "name": "üîÑ JWT Refresh",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_jwt}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/admin/auth/refresh",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "admin",
                "auth",
                "refresh"
              ]
            },
            "description": "Refresh admin JWT token before expiration. Includes 2-minute grace period after token expiry. Returns new JWT valid for 12 minutes."
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{}"
                },
                "url": {
                  "raw": "{{baseUrl}}/v1/admin/auth/refresh",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "admin",
                    "auth",
                    "refresh"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [],
              "body": "{\n  \"token\": \"eyJhbGciOiJIUzI1NiIs...\",\n  \"expiresIn\": 720,\n  \"expiresAt\": \"2025-09-07T18:30:00Z\"\n}"
            }
          ]
        },
        {
          "name": "üìä Dashboard",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_jwt}}",
                "description": "Admin JWT from /v1/admin/auth/exchange"
              },
              {
                "key": "x-correlation-id",
                "value": "{{$randomUUID}}",
                "description": "Correlation ID for request tracking"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/v1/admin/dashboard",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "admin",
                "dashboard"
              ]
            },
            "description": "üìä **Admin Control Center Dashboard**\n\n**Features:**\n- üîí **Admin Authentication Required**\n- üìà Key performance indicators (KPIs)\n- üö® System health status monitoring\n- ‚è∞ Real-time metrics display\n- üéØ Operational overview for decision making\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"kpis\": {\n    \"open_tickets\": 12,\n    \"due_2h\": 3,\n    \"pending_advisors\": 8,\n    \"revenue_today\": 2450.00,\n    \"build_errors_24h\": 2,\n    \"critical_alerts\": 0\n  },\n  \"health_status\": {\n    \"tickets\": \"warning\",\n    \"advisors\": \"good\",\n    \"alerts\": \"good\"\n  },\n  \"correlation_id\": \"corr_abc123\",\n  \"timestamp\": \"2025-08-31T10:30:00Z\"\n}\n```"
          },
          "response": []
        },
        {
          "name": "üë§ Search Users",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_jwt}}",
                "description": "Admin JWT from /v1/admin/auth/exchange"
              },
              {
                "key": "x-correlation-id",
                "value": "{{$randomUUID}}",
                "description": "Correlation ID for request tracking"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/v1/admin/users?search=user@example.com&status=active&exclude_admin_users=true&exclude_advisor_users=true&limit=50&offset=0",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "admin",
                "users"
              ],
              "query": [
                {
                  "key": "search",
                  "value": "user@example.com",
                  "description": "Search by email, name, or ID"
                },
                {
                  "key": "status",
                  "value": "active",
                  "description": "Filter by status: active, suspended, banned"
                },
                {
                  "key": "exclude_admin_users",
                  "value": "true",
                  "description": "Exclude users with admin roles/permissions"
                },
                {
                  "key": "exclude_advisor_users",
                  "value": "true",
                  "description": "Exclude users with advisor roles or profiles"
                },
                {
                  "key": "limit",
                  "value": "50",
                  "description": "Results per page (default: 50)"
                },
                {
                  "key": "offset",
                  "value": "0",
                  "description": "Pagination offset"
                }
              ]
            },
            "description": "üë§ **Search and List Users**\n\n**Features:**\n- üîí **Requires Permission**: users.read\n- üîç Search by email, name, or user ID\n- üìä Filter by user status\n- üö´ **NEW**: Exclude admin/advisor users with role-based filtering\n- üìÑ Pagination support\n- üí∞ Spending and activity metrics\n\n**New Query Parameters:**\n- `exclude_admin_users=true` - Excludes users with admin roles/permissions\n- `exclude_advisor_users=true` - Excludes users with advisor roles or profiles\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"users\": [{\n    \"id\": \"user_123\",\n    \"email\": \"user@example.com\",\n    \"created_at\": \"2025-08-15T10:00:00Z\",\n    \"last_active\": \"2025-08-30T15:30:00Z\",\n    \"status\": \"active\",\n    \"project_count\": 5,\n    \"total_spent\": 45.00\n  }],\n  \"correlation_id\": \"corr_def456\",\n  \"timestamp\": \"2025-08-31T10:30:00Z\"\n}\n```"
          },
          "response": []
        },
        {
          "name": "üö´ Suspend User",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{admin_jwt}}",
                "description": "Admin JWT from /v1/admin/auth/exchange"
              },
              {
                "key": "x-admin-reason",
                "value": "[T02] Multiple harassment reports confirmed by different users",
                "description": "Required reason with violation code"
              },
              {
                "key": "x-correlation-id",
                "value": "{{$randomUUID}}",
                "description": "Correlation ID for request tracking"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"action\": \"suspend\",\n  \"duration_days\": 7,\n  \"reason\": \"Policy violation - multiple harassment reports\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/admin/users/user_123/status",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "admin",
                "users",
                "user_123",
                "status"
              ]
            },
            "description": "üö´ **Suspend/Ban/Activate User**\n\n**Features:**\n- üîí **Requires Permission**: users.write\n- üìù **Mandatory Reason**: Structured violation codes\n- ‚è∞ **Duration Control**: Set suspension periods\n- üìã **Audit Trail**: All actions logged automatically\n- üîÑ **Status Options**: suspend, ban, activate\n\n**Violation Codes:**\n- `T01`: Spam or promotional content\n- `T02`: Harassment or abusive behavior\n- `T03`: Fraud or chargeback risk\n- `T04`: Policy evasion\n- `T05`: Illegal content\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"User suspended successfully\",\n  \"user\": {\n    \"id\": \"user_123\",\n    \"status\": \"suspended\",\n    \"suspended_until\": \"2025-09-07T10:30:00Z\"\n  },\n  \"admin_action\": {\n    \"admin_id\": \"admin_456\",\n    \"reason\": \"[T02] Multiple harassment reports confirmed\"\n  },\n  \"correlation_id\": \"corr_ghi789\"\n}\n```"
          },
          "response": []
        },
        {
          "name": "üìã List Support Tickets",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_jwt}}",
                "description": "Admin JWT from /v1/admin/auth/exchange"
              },
              {
                "key": "x-correlation-id",
                "value": "{{$randomUUID}}",
                "description": "Correlation ID for request tracking"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/v1/admin/support/tickets?status=open&priority=high&limit=50",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "admin",
                "support",
                "tickets"
              ],
              "query": [
                {
                  "key": "status",
                  "value": "open",
                  "description": "Filter by: open, assigned, resolved, closed"
                },
                {
                  "key": "priority",
                  "value": "high",
                  "description": "Filter by: low, medium, high, urgent"
                },
                {
                  "key": "assigned_to",
                  "value": "",
                  "disabled": true,
                  "description": "Filter by assigned admin"
                },
                {
                  "key": "limit",
                  "value": "50",
                  "description": "Results per page"
                }
              ]
            },
            "description": "List support tickets with filtering, sorting, and SLA metrics. Includes average response time, resolution time, and SLA compliance rates."
          },
          "response": []
        },
        {
          "name": "üí∞ Financial Overview",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_jwt}}",
                "description": "Admin JWT from /v1/admin/auth/exchange"
              },
              {
                "key": "x-correlation-id",
                "value": "{{$randomUUID}}",
                "description": "Correlation ID for request tracking"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/v1/admin/finance/overview",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "admin",
                "finance",
                "overview"
              ]
            },
            "description": "üí∞ **Financial Operations Overview**\n\n**Features:**\n- üîí **Requires Permission**: finance.read\n- üìä **Revenue Metrics**: Daily and monthly totals\n- üí∏ **Payout Tracking**: Pending advisor payments\n- üîÑ **Refund Monitoring**: Request queue management\n- üìà **Growth Analytics**: Financial KPIs\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"overview\": {\n    \"revenue_today\": 2450.00,\n    \"revenue_month\": 58900.00,\n    \"pending_payouts\": {\n      \"count\": 12,\n      \"total_amount\": 3400.00\n    },\n    \"refund_requests\": 3\n  },\n  \"correlation_id\": \"corr_stu901\"\n}\n```"
          },
          "response": []
        },
        {
          "name": "üí∏ Process Refund",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{admin_jwt}}",
                "description": "Admin JWT from /v1/admin/auth/exchange"
              },
              {
                "key": "x-admin-reason",
                "value": "[F02] Customer dissatisfaction with service quality",
                "description": "Required structured reason code"
              },
              {
                "key": "x-correlation-id",
                "value": "{{$randomUUID}}",
                "description": "Correlation ID for request tracking"
              },
              {
                "key": "idempotency-key",
                "value": "{{$randomUUID}}",
                "description": "Prevents duplicate refund processing"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"invoice_id\": \"inv_abc123\",\n  \"amount\": 45.00,\n  \"reason\": \"Customer dissatisfaction with service quality\",\n  \"notify_user\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/admin/finance/refunds",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "admin",
                "finance",
                "refunds"
              ]
            },
            "description": "üí∏ **Process Customer Refund**\n\n**Features:**\n- üîí **Requires Permission**: finance.refund\n- üìù **Mandatory Reason**: Financial operation codes\n- üîÑ **Idempotency**: Prevents duplicate refunds\n- üë• **Two-Person Rule**: High-value refunds need approval\n- üìß **Notifications**: Optional customer email alerts\n- üîç **Audit Trail**: Complete refund history\n\n**Financial Reason Codes:**\n- `F01`: Duplicate charge or billing error\n- `F02`: Customer dissatisfaction\n- `F03`: Fraud reversal or chargeback\n\n**Response (‚â§$500 - Immediate):**\n```json\n{\n  \"success\": true,\n  \"message\": \"Refund processed successfully\",\n  \"refund\": {\n    \"invoice_id\": \"inv_abc123\",\n    \"amount\": 45.00,\n    \"processed_by\": \"admin_456\",\n    \"processed_at\": \"2025-08-31T10:30:00Z\"\n  },\n  \"correlation_id\": \"corr_vwx234\"\n}\n```\n\n**Response (>$500 - Pending Approval):**\n```json\n{\n  \"status\": \"pending_approval\",\n  \"request_id\": \"refund_def456\",\n  \"requires_approval_from\": \"super_admin\",\n  \"expires_at\": \"2025-09-01T10:30:00Z\",\n  \"correlation_id\": \"corr_yza567\"\n}\n```"
          },
          "response": []
        },
        {
          "name": "üéì List Advisor Applications",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_jwt}}",
                "description": "Admin JWT from /v1/admin/auth/exchange"
              },
              {
                "key": "x-correlation-id",
                "value": "{{$randomUUID}}",
                "description": "Correlation ID for request tracking"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/v1/admin/advisors/applications?status=pending&limit=50",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "admin",
                "advisors",
                "applications"
              ],
              "query": [
                {
                  "key": "status",
                  "value": "pending",
                  "description": "Filter by: pending, under_review, completed"
                },
                {
                  "key": "limit",
                  "value": "50",
                  "description": "Results per page"
                }
              ]
            },
            "description": "üéì **Advisor Application Review**\n\n**Features:**\n- üîí **Requires Permission**: advisors.approve\n- üìã **Application Queue**: Pending reviews management\n- üë§ **Candidate Info**: Skills, experience, qualifications\n- üåç **Multi-language**: Support for international advisors\n- ‚è∞ **Review Tracking**: Timeline and status management\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"applications\": [{\n    \"id\": \"app_789\",\n    \"user_email\": \"advisor@example.com\",\n    \"expertise\": [\"Business Strategy\", \"Marketing\"],\n    \"languages\": [\"en\", \"ar\"],\n    \"status\": \"pending\",\n    \"submitted_at\": \"2025-08-30T14:00:00Z\",\n    \"experience_years\": 8\n  }],\n  \"correlation_id\": \"corr_jkl012\"\n}\n```"
          },
          "response": []
        },
        {
          "name": "‚úÖ Approve Advisor Application",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{admin_jwt}}",
                "description": "Admin JWT from /v1/admin/auth/exchange"
              },
              {
                "key": "x-admin-reason",
                "value": "Strong qualifications and experience verified",
                "description": "Required approval reason"
              },
              {
                "key": "x-correlation-id",
                "value": "{{$randomUUID}}",
                "description": "Correlation ID for request tracking"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"action\": \"approve\",\n  \"notes\": \"Excellent background in target markets with strong communication skills\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/admin/advisors/app_789/review",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "admin",
                "advisors",
                "app_789",
                "review"
              ]
            },
            "description": "‚úÖ **Approve/Reject Advisor Applications**\n\n**Features:**\n- üîí **Requires Permission**: advisors.approve\n- ‚úÖ **Approval Workflow**: Approve qualified candidates\n- ‚ùå **Rejection Process**: Decline unsuitable applications\n- üìù **Admin Notes**: Detailed feedback for decisions\n- üìß **Notifications**: Automatic applicant notifications\n- üìã **Audit Trail**: Complete review history\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Advisor application approved successfully\",\n  \"advisor\": {\n    \"id\": \"adv_123\",\n    \"status\": \"approved\",\n    \"approved_at\": \"2025-08-31T10:30:00Z\"\n  },\n  \"admin_action\": {\n    \"admin_id\": \"admin_456\",\n    \"action\": \"approve\",\n    \"notes\": \"Excellent background verified\"\n  },\n  \"correlation_id\": \"corr_mno345\"\n}\n```"
          },
          "response": []
        },
        {
          "name": "üìã List Pending Approvals",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_jwt}}",
                "description": "Admin JWT from /v1/admin/auth/exchange"
              },
              {
                "key": "x-correlation-id",
                "value": "{{$randomUUID}}",
                "description": "Correlation ID for request tracking"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/v1/admin/approvals/pending?limit=50",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "admin",
                "approvals",
                "pending"
              ],
              "query": [
                {
                  "key": "limit",
                  "value": "50",
                  "description": "Results per page (default: 20, max: 100)"
                },
                {
                  "key": "offset",
                  "value": "0",
                  "description": "Pagination offset",
                  "disabled": true
                }
              ]
            },
            "description": "üìã **List Pending Two-Person Approvals**\n\n**Features:**\n- üîí **Requires Permission**: admin.approve\n- üë• **Two-Person Rule**: High-value operations requiring dual approval\n- üí∞ **Financial Operations**: Refunds >$500 automatically queued\n- ‚è∞ **Time-Sensitive**: Shows age and urgency of pending requests\n- üîç **Complete Context**: Full request details for informed decisions\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"pending_approvals\": [\n    {\n      \"id\": \"tp_abc123\",\n      \"action\": \"refund.issue\",\n      \"resource_type\": \"invoice\",\n      \"resource_id\": \"inv_xyz789\",\n      \"payload\": {\n        \"amount\": 750.00,\n        \"reason\": \"Customer chargeback risk\",\n        \"notify_user\": true\n      },\n      \"threshold\": 500,\n      \"requested_by\": \"admin_456\",\n      \"requested_by_email\": \"admin@company.com\",\n      \"correlation_id\": \"corr_def456\",\n      \"created_at\": \"2025-08-31T10:15:00Z\",\n      \"expires_at\": \"2025-09-02T10:15:00Z\",\n      \"age_hours\": 2.5\n    }\n  ],\n  \"total_count\": 3,\n  \"correlation_id\": \"corr_ghi789\"\n}\n```"
          },
          "response": []
        },
        {
          "name": "‚úÖ Approve Two-Person Request",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{admin_jwt}}",
                "description": "Admin JWT from /v1/admin/auth/exchange"
              },
              {
                "key": "x-admin-reason",
                "value": "Verified legitimate customer complaint with documentation",
                "description": "Required approval reason (‚â•10 characters)"
              },
              {
                "key": "x-correlation-id",
                "value": "{{$randomUUID}}",
                "description": "Correlation ID for request tracking"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reason\": \"Customer provided valid documentation supporting refund request. Amount justified based on service delivery issues.\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/admin/approvals/tp_abc123/approve",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "admin",
                "approvals",
                "tp_abc123",
                "approve"
              ]
            },
            "description": "‚úÖ **Approve Two-Person Request (Dual Authorization)**\n\n**Features:**\n- üîí **Requires Permission**: admin.approve\n- üë• **Different Admin Rule**: Approver must be different from requester\n- ‚ö° **Immediate Execution**: Approved requests execute automatically\n- üìù **Mandatory Justification**: Detailed approval reason required\n- üîç **Complete Audit Trail**: Both approval and execution logged\n- üí∞ **Financial Processing**: Stripe operations with correlation tracking\n\n**Security:**\n- **Atomic Operation**: Approval and execution in single transaction\n- **Idempotency Protection**: Cannot approve same request twice\n- **Role Verification**: Confirms approver has sufficient permissions\n\n**Response (Success):**\n```json\n{\n  \"success\": true,\n  \"message\": \"Request approved and executed successfully\",\n  \"approval\": {\n    \"id\": \"tp_abc123\",\n    \"approved_by\": \"admin_789\",\n    \"approved_at\": \"2025-08-31T12:30:00Z\",\n    \"reason\": \"Customer provided valid documentation...\"\n  },\n  \"execution_result\": {\n    \"refund_id\": \"re_stripe_xyz\",\n    \"amount\": 750.00,\n    \"processed_at\": \"2025-08-31T12:30:01Z\"\n  },\n  \"correlation_id\": \"corr_jkl012\"\n}\n```"
          },
          "response": []
        },
        {
          "name": "‚ùå Reject Two-Person Request",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{admin_jwt}}",
                "description": "Admin JWT from /v1/admin/auth/exchange"
              },
              {
                "key": "x-admin-reason",
                "value": "Insufficient documentation provided - customer complaint lacks supporting evidence",
                "description": "Required rejection reason (‚â•10 characters)"
              },
              {
                "key": "x-correlation-id",
                "value": "{{$randomUUID}}",
                "description": "Correlation ID for request tracking"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reason\": \"Request lacks sufficient supporting documentation. Customer complaint does not meet our refund policy criteria for amounts exceeding $500.\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/admin/approvals/tp_abc123/reject",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "admin",
                "approvals",
                "tp_abc123",
                "reject"
              ]
            },
            "description": "‚ùå **Reject Two-Person Request (Dual Authorization)**\n\n**Features:**\n- üîí **Requires Permission**: admin.approve\n- üë• **Different Admin Rule**: Rejector must be different from requester\n- üìù **Mandatory Justification**: Detailed rejection reason required\n- üö´ **Final Decision**: Rejected requests cannot be re-submitted\n- üîç **Complete Audit Trail**: Rejection decision permanently logged\n- üìß **Notifications**: Requester notified of rejection decision\n\n**Security:**\n- **Atomic Operation**: Rejection recorded in single transaction\n- **Idempotency Protection**: Cannot reject same request twice\n- **Role Verification**: Confirms rejector has sufficient permissions\n\n**Response (Success):**\n```json\n{\n  \"success\": true,\n  \"message\": \"Request rejected successfully\",\n  \"rejection\": {\n    \"id\": \"tp_abc123\",\n    \"rejected_by\": \"admin_789\",\n    \"rejected_at\": \"2025-08-31T12:35:00Z\",\n    \"reason\": \"Request lacks sufficient supporting documentation...\"\n  },\n  \"correlation_id\": \"corr_mno345\"\n}\n```"
          },
          "response": []
        },
        {
          "name": "üéØ Promotion Management",
          "item": [
            {
              "name": "Get Provider Availability",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}",
                    "description": "Admin JWT from /v1/admin/auth/exchange"
                  },
                  {
                    "key": "x-correlation-id",
                    "value": "{{$randomUUID}}",
                    "description": "Correlation ID for request tracking"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/admin/providers/availability",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "admin",
                    "providers",
                    "availability"
                  ]
                },
                "description": "üè¶ **Get Payment Provider Capabilities**\n\n**Features:**\n- üîí **Requires Permission**: promotion:read\n- üí≥ **5 Providers**: Stripe, Fawry, Paymob, STC Pay, PayTabs\n- üí± **Multi-Currency**: USD, EUR, GBP, EGP, SAR\n- üåç **Regional Support**: Coverage maps for each provider\n- üìä **Feature Matrix**: Discount types and limits per provider\n- ‚ö° **Cached Response**: 5-minute TTL for performance\n\n**Response:**\n```json\n{\n  \"providers\": [\n    {\n      \"key\": \"stripe\",\n      \"name\": \"Stripe\",\n      \"supported_currencies\": [\"USD\", \"EUR\", \"GBP\"],\n      \"supported_regions\": [\"us\", \"ca\", \"gb\", \"eu\"],\n      \"checkout_types\": [\"redirect\"],\n      \"status\": \"active\",\n      \"features\": {\n        \"supports_percentage_discount\": true,\n        \"supports_fixed_discount\": true,\n        \"supports_minimum_order\": true,\n        \"max_discount_percentage\": 100\n      }\n    },\n    {\n      \"key\": \"fawry\",\n      \"name\": \"Fawry\",\n      \"supported_currencies\": [\"EGP\"],\n      \"supported_regions\": [\"eg\"],\n      \"checkout_types\": [\"voucher\"],\n      \"status\": \"active\"\n    }\n  ]\n}\n```"
              },
              "response": []
            },
            {
              "name": "Validate Promotion",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}",
                    "description": "Admin JWT from /v1/admin/auth/exchange"
                  },
                  {
                    "key": "x-correlation-id",
                    "value": "{{$randomUUID}}",
                    "description": "Correlation ID for request tracking"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"promotion_config\": {\n    \"name\": \"Summer Sale\",\n    \"discount_type\": \"percentage\",\n    \"discount_value\": 20,\n    \"currency\": null,\n    \"codes\": [\"SUMMER20\"],\n    \"supported_providers\": [\"stripe\", \"fawry\"],\n    \"checkout_type_restrictions\": [\"redirect\"],\n    \"minimum_order_amount\": 5000,\n    \"minimum_order_currency\": \"USD\"\n  },\n  \"test_scenarios\": [\n    {\n      \"region\": \"us\",\n      \"currency\": \"USD\",\n      \"order_amount\": 10000,\n      \"provider\": \"stripe\"\n    }\n  ]\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/admin/promotions/validate",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "admin",
                    "promotions",
                    "validate"
                  ]
                },
                "description": "‚úÖ **Validate Promotion Configuration**\n\n**Features:**\n- üîí **Requires Permission**: promotion:read\n- üß™ **Scenario Testing**: Test different customer contexts\n- ‚ö†Ô∏è **Smart Warnings**: Configuration optimization hints\n- üéØ **Eligibility Engine**: Real-time qualification checks\n- üí∞ **Discount Calculator**: Precise amount calculations\n- üåç **Regional Validation**: Provider availability by region\n\n**Validation Checks:**\n- Provider-currency compatibility\n- Regional coverage gaps\n- Minimum order thresholds\n- Code uniqueness and format\n- Date range validity\n\n**Response:**\n```json\n{\n  \"valid\": true,\n  \"warnings\": [\"Consider adding Paymob for Egyptian market\"],\n  \"errors\": [],\n  \"scenario_results\": [\n    {\n      \"scenario\": {\n        \"region\": \"us\",\n        \"currency\": \"USD\",\n        \"order_amount\": 10000,\n        \"provider\": \"stripe\"\n      },\n      \"eligible\": true,\n      \"discount_amount\": 2000,\n      \"final_amount\": 8000,\n      \"selected_provider\": \"stripe\"\n    }\n  ]\n}\n```"
              },
              "response": []
            },
            {
              "name": "Create Multi-Provider Promotion",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}",
                    "description": "Admin JWT from /v1/admin/auth/exchange"
                  },
                  {
                    "key": "x-admin-reason",
                    "value": "Summer campaign for global markets",
                    "description": "Required reason for audit trail"
                  },
                  {
                    "key": "x-correlation-id",
                    "value": "{{$randomUUID}}",
                    "description": "Correlation ID for request tracking"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"Global Summer Campaign\",\n  \"description\": \"20% off for all regions\",\n  \"discount_type\": \"percentage\",\n  \"discount_value\": 20,\n  \"currency\": null,\n  \"codes\": [\"GLOBAL20\", \"SUMMER2025\"],\n  \"max_total_uses\": 1000,\n  \"max_uses_per_user\": 1,\n  \"valid_from\": \"2025-09-01T00:00:00Z\",\n  \"valid_until\": \"2025-09-30T23:59:59Z\",\n  \"supported_providers\": [\"stripe\", \"fawry\", \"paymob\"],\n  \"minimum_order_amount\": 5000,\n  \"minimum_order_currency\": \"USD\",\n  \"regional_configs\": [\n    {\n      \"region_code\": \"eg\",\n      \"preferred_providers\": [\"fawry\", \"paymob\"],\n      \"localized_name\": {\n        \"en\": \"Egypt Summer Sale\",\n        \"ar\": \"ÿ™ÿÆŸÅŸäÿ∂ÿßÿ™ ÿßŸÑÿµŸäŸÅ ŸÖÿµÿ±\"\n      },\n      \"min_order_override\": 10000\n    }\n  ]\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/admin/promotions/multi-provider",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "admin",
                    "promotions",
                    "multi-provider"
                  ]
                },
                "description": "üéØ **Create Multi-Provider Promotion**\n\n**Features:**\n- üîí **Requires Permission**: promotion:write or promotion:provider_config\n- üåç **Global Campaigns**: Single promotion across all regions\n- üí≥ **Provider Routing**: Automatic best provider selection\n- üåê **Regional Overrides**: Customize by market needs\n- üìù **Audit Trail**: Complete creation history\n- üîÑ **Idempotency**: Safe retry with correlation ID\n\n**Advanced Features:**\n- **Regional Configurations**: Localized names and rules\n- **Provider Preferences**: Ordered fallback chains\n- **Currency Mapping**: Automatic conversion rules\n- **Minimum Order Overrides**: Market-specific thresholds\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"promotion_id\": \"promo_abc123\",\n  \"warnings\": [],\n  \"correlation_id\": \"corr_xyz789\",\n  \"codes_created\": [\"GLOBAL20\", \"SUMMER2025\"],\n  \"regional_configs_applied\": 1\n}\n```"
              },
              "response": []
            },
            {
              "name": "Update Promotion Providers",
              "request": {
                "method": "PATCH",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}",
                    "description": "Admin JWT from /v1/admin/auth/exchange"
                  },
                  {
                    "key": "x-admin-reason",
                    "value": "Adding PayTabs for Saudi market expansion",
                    "description": "Required reason for audit trail"
                  },
                  {
                    "key": "x-correlation-id",
                    "value": "{{$randomUUID}}",
                    "description": "Correlation ID for request tracking"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"supported_providers\": [\"stripe\", \"paytabs\"],\n  \"currency\": \"USD\",\n  \"checkout_type_restrictions\": [\"redirect\"]\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/admin/promotions/promo_abc123/providers",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "admin",
                    "promotions",
                    "promo_abc123",
                    "providers"
                  ]
                },
                "description": "üîÑ **Update Promotion Provider Configuration**\n\n**Features:**\n- üîí **Requires Permission**: promotion:provider_config\n- üîß **Hot Configuration**: Update without disruption\n- üìä **Change Tracking**: Provider modification history\n- ‚ö° **Instant Effect**: Changes apply immediately\n- üîç **Audit Compliance**: Full change documentation\n\n**Updateable Fields:**\n- supported_providers: Active provider list\n- currency: For fixed amount promotions\n- checkout_type_restrictions: Payment flow types\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"promotion\": {\n    \"id\": \"promo_abc123\",\n    \"name\": \"Global Summer Campaign\",\n    \"supported_providers\": [\"stripe\", \"paytabs\"],\n    \"currency\": \"USD\",\n    \"checkout_type_restrictions\": [\"redirect\"]\n  },\n  \"changes_applied\": {\n    \"providers_added\": [\"paytabs\"],\n    \"providers_removed\": [\"fawry\", \"paymob\"]\n  },\n  \"correlation_id\": \"corr_def456\"\n}\n```"
              },
              "response": []
            },
            {
              "name": "Get Promotion Analytics",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}",
                    "description": "Admin JWT from /v1/admin/auth/exchange"
                  },
                  {
                    "key": "x-correlation-id",
                    "value": "{{$randomUUID}}",
                    "description": "Correlation ID for request tracking"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/admin/promotions/promo_abc123/provider-analytics",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "admin",
                    "promotions",
                    "promo_abc123",
                    "provider-analytics"
                  ]
                },
                "description": "üìä **Promotion Provider Analytics**\n\n**Features:**\n- üîí **Requires Permission**: promotion:analytics\n- üìà **Performance Metrics**: Redemption rates by provider\n- üí∞ **Financial Impact**: Total discounts and revenue\n- üåç **Geographic Distribution**: Usage by region\n- üìä **Provider Breakdown**: Detailed performance stats\n- ‚è∞ **Real-Time Data**: Live metrics from database\n\n**Metrics Included:**\n- Total redemptions and unique users\n- Provider-specific usage counts\n- Currency distribution analysis\n- Utilization percentage vs limits\n- Active reservation tracking\n\n**Response:**\n```json\n{\n  \"promotion_id\": \"promo_abc123\",\n  \"name\": \"Global Summer Campaign\",\n  \"status\": \"active\",\n  \"discount_type\": \"percentage\",\n  \"discount_value\": 20,\n  \"metrics\": {\n    \"total_redemptions\": 150,\n    \"unique_users\": 120,\n    \"total_discount_given\": 3000000,\n    \"utilization_percentage\": 15.0,\n    \"active_reservations\": 5\n  },\n  \"provider_breakdown\": {\n    \"stripe\": 100,\n    \"fawry\": 50\n  },\n  \"currency_breakdown\": {\n    \"USD\": 100,\n    \"EGP\": 50\n  },\n  \"correlation_id\": \"corr_ghi789\"\n}\n```"
              },
              "response": []
            },
            {
              "name": "Get Regional Defaults",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}",
                    "description": "Admin JWT from /v1/admin/auth/exchange"
                  },
                  {
                    "key": "x-correlation-id",
                    "value": "{{$randomUUID}}",
                    "description": "Correlation ID for request tracking"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/admin/promotions/regional-defaults?region=eg",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "admin",
                    "promotions",
                    "regional-defaults"
                  ],
                  "query": [
                    {
                      "key": "region",
                      "value": "eg",
                      "description": "Region code: us, ca, gb, eu, eg, sa"
                    }
                  ]
                },
                "description": "üåç **Get Regional Smart Defaults**\n\n**Features:**\n- üîí **Requires Permission**: promotion:read\n- üéØ **Smart Suggestions**: Region-optimized settings\n- üí≥ **Provider Recommendations**: Best providers per market\n- üí± **Currency Defaults**: Local currency preferences\n- üì± **Checkout Types**: Popular payment flows by region\n\n**Supported Regions:**\n- **us**: United States (Stripe, USD)\n- **ca**: Canada (Stripe, USD/CAD)\n- **gb**: United Kingdom (Stripe, GBP)\n- **eu**: European Union (Stripe, EUR)\n- **eg**: Egypt (Fawry/Paymob, EGP)\n- **sa**: Saudi Arabia (STC Pay/PayTabs, SAR)\n\n**Response:**\n```json\n{\n  \"region\": \"eg\",\n  \"defaults\": {\n    \"providers\": [\"fawry\", \"paymob\"],\n    \"currency\": \"EGP\",\n    \"checkoutTypes\": [\"voucher\", \"redirect\"],\n    \"suggested_min_order\": 10000,\n    \"popular_discount_type\": \"percentage\"\n  },\n  \"market_insights\": {\n    \"cash_preference\": 65,\n    \"mobile_wallet_adoption\": 35\n  }\n}\n```"
              },
              "response": []
            },
            {
              "name": "Validate Promotion Configuration",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}",
                    "type": "text"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  },
                  {
                    "key": "X-Correlation-Id",
                    "value": "{{$guid}}",
                    "type": "text"
                  },
                  {
                    "key": "X-Admin-Reason",
                    "value": "Scenario testing for promotion configuration",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"promotion_config\": {\n    \"name\": \"Black Friday Sale\",\n    \"discount_type\": \"percentage\",\n    \"discount_value\": 20,\n    \"minimum_order_amount\": 5000,\n    \"minimum_order_currency\": \"USD\",\n    \"supported_providers\": [\n      \"stripe\",\n      \"fawry\",\n      \"paymob\"\n    ]\n  },\n  \"test_scenarios\": [\n    {\n      \"region\": \"us\",\n      \"currency\": \"USD\",\n      \"order_amount\": 10000,\n      \"provider\": \"stripe\"\n    },\n    {\n      \"region\": \"eg\",\n      \"currency\": \"EGP\",\n      \"order_amount\": 2000,\n      \"provider\": \"fawry\"\n    }\n  ]\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{base_url}}/v1/admin/promotions/validate",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "v1",
                    "admin",
                    "promotions",
                    "validate"
                  ]
                },
                "description": "Validate promotion configurations with test scenarios before deployment. Supports up to 10 test scenarios per request with multi-currency calculations and minimum order validation."
              },
              "response": []
            }
          ]
        },
        {
          "name": "üí∞ Admin Billing & Customer Analytics",
          "item": [
            {
              "name": "üìä Billing Overview",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}",
                    "description": "Admin JWT from /v1/admin/auth/exchange"
                  },
                  {
                    "key": "x-correlation-id",
                    "value": "{{$randomUUID}}",
                    "description": "Correlation ID for request tracking"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/v1/admin/billing/overview",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "admin",
                    "billing",
                    "overview"
                  ]
                },
                "description": "üìä **Multi-Currency Billing Overview Dashboard**\n\n**Features:**\n- üîí **Requires Permission**: finance.read\n- üí∞ **Multi-Currency Support**: USD/EUR/GBP/EGP/SAR with live conversion\n- üìà **Key Metrics**: MRR/ARR tracking with provider attribution\n- üè¶ **Provider Performance**: Stripe/Fawry/Paymob/STC Pay/PayTabs analytics\n- üéØ **Health Scoring**: Customer financial wellness indicators\n- üìä **Real-Time Data**: Live materialized view refresh\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"overview\": {\n    \"mrr_usd\": 125400.50,\n    \"arr_usd\": 1504806.00,\n    \"active_subscriptions\": 1247,\n    \"churn_rate_percent\": 2.3,\n    \"provider_distribution\": {\n      \"stripe\": {\"count\": 890, \"mrr_usd\": 89250.75},\n      \"fawry\": {\"count\": 201, \"mrr_usd\": 18150.25},\n      \"paymob\": {\"count\": 156, \"mrr_usd\": 18000.50}\n    },\n    \"currency_breakdown\": {\n      \"USD\": 89250.75,\n      \"EUR\": 15420.30,\n      \"EGP\": 20729.45\n    }\n  }\n}\n```"
              },
              "response": []
            },
            {
              "name": "üë§ Customer Financial Profile",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}",
                    "description": "Admin JWT from /v1/admin/auth/exchange"
                  },
                  {
                    "key": "x-correlation-id",
                    "value": "{{$randomUUID}}",
                    "description": "Correlation ID for request tracking"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/v1/admin/billing/customers/{{userId}}/financial-profile",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "admin",
                    "billing",
                    "customers",
                    "{{userId}}",
                    "financial-profile"
                  ]
                },
                "description": "üë§ **Customer 360 Financial Intelligence**\n\n**Features:**\n- üîí **Requires Permission**: finance.read\n- üí° **Health Scoring**: 0-100 transparent customer wellness score\n- üìä **Payment Patterns**: Success rates and provider performance\n- üí∞ **Lifetime Value**: Historical and projected revenue analytics\n- üö® **Risk Assessment**: Churn prediction and intervention triggers\n- üîÑ **Multi-Provider**: Complete payment ecosystem view\n\n**Health Score Formula (Transparent 0-100):**\n- Payment Success Rate: 40 points\n- Subscription Longevity: 25 points\n- Support Engagement: 20 points\n- Account Completeness: 15 points\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"customer_profile\": {\n    \"user_id\": \"user_123\",\n    \"health_score\": 87,\n    \"risk_level\": \"low\",\n    \"lifetime_value_usd\": 450.75,\n    \"payment_success_rate\": 94.2,\n    \"avg_monthly_spend_usd\": 45.50,\n    \"subscription_months\": 14,\n    \"preferred_provider\": \"stripe\",\n    \"currency_preference\": \"USD\"\n  }\n}\n```"
              },
              "response": []
            },
            {
              "name": "üìà Revenue Analytics",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}",
                    "description": "Admin JWT from /v1/admin/auth/exchange"
                  },
                  {
                    "key": "x-correlation-id",
                    "value": "{{$randomUUID}}",
                    "description": "Correlation ID for request tracking"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/v1/admin/billing/analytics/revenue?period=30d&currency=USD&provider=all",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "admin",
                    "billing",
                    "analytics",
                    "revenue"
                  ],
                  "query": [
                    {
                      "key": "period",
                      "value": "30d",
                      "description": "7d|30d|90d|12m (default: 30d)"
                    },
                    {
                      "key": "currency",
                      "value": "USD",
                      "description": "USD|EUR|GBP|EGP|SAR (default: USD)"
                    },
                    {
                      "key": "provider",
                      "value": "all",
                      "description": "stripe|fawry|paymob|stc_pay|paytabs|all (default: all)"
                    }
                  ]
                },
                "description": "üìà **Advanced Revenue Analytics with Multi-Currency Support**\n\n**Features:**\n- üîí **Requires Permission**: finance.read\n- üí± **Multi-Currency**: Real-time exchange rate conversion to reporting currency\n- üè¶ **Provider Attribution**: Track revenue by payment provider\n- üìä **Trend Analysis**: MRR/ARR growth patterns with projections\n- üîç **Cohort Analysis**: Revenue retention by customer segments\n- ‚ö° **Performance Optimization**: Identify top-performing provider/currency combinations\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"analytics\": {\n    \"period\": \"30d\",\n    \"total_revenue_usd\": 67890.50,\n    \"mrr_change_percent\": 8.3,\n    \"arr_projection_usd\": 814686.00,\n    \"provider_performance\": [\n      {\"provider\": \"stripe\", \"revenue_usd\": 48720.30, \"share_percent\": 71.8},\n      {\"provider\": \"fawry\", \"revenue_usd\": 12540.20, \"share_percent\": 18.5}\n    ],\n    \"currency_breakdown\": {\n      \"USD\": 48720.30,\n      \"EUR\": 12450.75,\n      \"EGP\": 6719.45\n    },\n    \"trends\": {\n      \"daily_average_usd\": 2262.89,\n      \"growth_velocity_percent\": 12.4\n    }\n  }\n}\n```"
              },
              "response": []
            },
            {
              "name": "‚ö†Ô∏è At-Risk Customers",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}",
                    "description": "Admin JWT from /v1/admin/auth/exchange"
                  },
                  {
                    "key": "x-correlation-id",
                    "value": "{{$randomUUID}}",
                    "description": "Correlation ID for request tracking"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/v1/admin/billing/customers/at-risk?threshold=40&limit=50",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "admin",
                    "billing",
                    "customers",
                    "at-risk"
                  ],
                  "query": [
                    {
                      "key": "threshold",
                      "value": "40",
                      "description": "Health score threshold (0-100, default: 50)"
                    },
                    {
                      "key": "limit",
                      "value": "50",
                      "description": "Results per page (default: 20)"
                    }
                  ]
                },
                "description": "‚ö†Ô∏è **At-Risk Customer Intelligence & Intervention**\n\n**Features:**\n- üîí **Requires Permission**: finance.read\n- üö® **Health-Based Targeting**: Configurable health score thresholds\n- üéØ **Churn Prevention**: Proactive customer retention intelligence\n- üí∞ **Revenue Protection**: Identify high-value accounts at risk\n- üìä **Intervention Prioritization**: Risk level and LTV-based sorting\n- üîÑ **Multi-Provider Context**: Cross-platform payment failure patterns\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"at_risk_customers\": [\n    {\n      \"user_id\": \"user_456\",\n      \"email\": \"customer@example.com\",\n      \"health_score\": 23,\n      \"risk_level\": \"critical\",\n      \"lifetime_value_usd\": 1250.75,\n      \"payment_failures_30d\": 3,\n      \"last_successful_payment\": \"2025-08-15T10:30:00Z\",\n      \"primary_issue\": \"payment_failures\",\n      \"suggested_intervention\": \"payment_method_update\"\n    }\n  ],\n  \"total_at_risk\": 47,\n  \"risk_distribution\": {\n    \"critical\": 12,\n    \"high\": 18,\n    \"medium\": 17\n  }\n}\n```"
              },
              "response": []
            },
            {
              "name": "üè¶ Provider Performance",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}",
                    "description": "Admin JWT from /v1/admin/auth/exchange"
                  },
                  {
                    "key": "x-correlation-id",
                    "value": "{{$randomUUID}}",
                    "description": "Correlation ID for request tracking"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/v1/admin/billing/providers/performance?period=30d",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "admin",
                    "billing",
                    "providers",
                    "performance"
                  ],
                  "query": [
                    {
                      "key": "period",
                      "value": "30d",
                      "description": "7d|30d|90d (default: 30d)"
                    }
                  ]
                },
                "description": "üè¶ **Multi-Provider Payment Performance Analytics**\n\n**Features:**\n- üîí **Requires Permission**: finance.read\n- üéØ **Comparative Analysis**: Side-by-side provider performance metrics\n- üí∞ **Success Rate Optimization**: Identify best-performing providers by region/currency\n- ‚ö° **Latency Monitoring**: Payment processing speed analysis\n- üö® **Error Pattern Analysis**: Failed payment categorization and trends\n- üîÑ **Regional Insights**: Provider performance by geographic market\n\n**Supported Providers:**\n- **Stripe**: Global coverage with strong USD/EUR performance\n- **Fawry**: Egypt market leader with EGP optimization\n- **Paymob**: MENA region specialist\n- **STC Pay**: Saudi Arabia digital wallet integration\n- **PayTabs**: Gulf region payment gateway\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"provider_performance\": [\n    {\n      \"provider\": \"stripe\",\n      \"success_rate_percent\": 94.7,\n      \"avg_processing_time_ms\": 1850,\n      \"total_volume_usd\": 45670.30,\n      \"transaction_count\": 1247,\n      \"primary_currencies\": [\"USD\", \"EUR\", \"GBP\"],\n      \"failure_categories\": {\n        \"card_declined\": 3.2,\n        \"insufficient_funds\": 1.8,\n        \"technical_error\": 0.3\n      }\n    },\n    {\n      \"provider\": \"fawry\",\n      \"success_rate_percent\": 91.3,\n      \"avg_processing_time_ms\": 2340,\n      \"total_volume_usd\": 12890.45,\n      \"transaction_count\": 356,\n      \"primary_currencies\": [\"EGP\"],\n      \"failure_categories\": {\n        \"wallet_limit_exceeded\": 5.2,\n        \"authentication_failed\": 2.8,\n        \"network_timeout\": 0.7\n      }\n    }\n  ],\n  \"best_performer\": {\n    \"provider\": \"stripe\",\n    \"metric\": \"success_rate\",\n    \"value\": 94.7\n  }\n}\n```"
              },
              "response": []
            },
            {
              "name": "üì¶ Package Analytics",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}",
                    "description": "Admin JWT from /v1/admin/auth/exchange"
                  },
                  {
                    "key": "x-correlation-id",
                    "value": "{{$randomUUID}}",
                    "description": "Correlation ID for request tracking"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/v1/admin/billing/analytics/packages",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "admin",
                    "billing",
                    "analytics",
                    "packages"
                  ]
                },
                "description": "üì¶ **Subscription Package Performance Analytics**\n\n**Features:**\n- üîí **Requires Permission**: finance.read\n- üí∞ **Revenue Attribution**: Track MRR/ARR by subscription tier\n- üéØ **Conversion Optimization**: Analyze trial-to-paid conversion rates\n- üìä **Usage Patterns**: Understand feature adoption by package tier\n- üîÑ **Upgrade/Downgrade Trends**: Customer journey flow analysis\n- üåç **Regional Preferences**: Package popularity by geographic market\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"package_analytics\": [\n    {\n      \"package_name\": \"starter\",\n      \"active_subscriptions\": 567,\n      \"mrr_contribution_usd\": 28350.00,\n      \"arr_projection_usd\": 340200.00,\n      \"avg_lifetime_months\": 8.3,\n      \"trial_conversion_rate_percent\": 23.5,\n      \"upgrade_rate_percent\": 18.7,\n      \"churn_rate_percent\": 4.2\n    },\n    {\n      \"package_name\": \"growth\",\n      \"active_subscriptions\": 423,\n      \"mrr_contribution_usd\": 63450.00,\n      \"arr_projection_usd\": 761400.00,\n      \"avg_lifetime_months\": 12.1,\n      \"trial_conversion_rate_percent\": 34.2,\n      \"upgrade_rate_percent\": 8.9,\n      \"churn_rate_percent\": 2.1\n    }\n  ],\n  \"insights\": {\n    \"highest_ltv\": \"scale\",\n    \"best_conversion\": \"growth\",\n    \"lowest_churn\": \"scale\"\n  }\n}\n```"
              },
              "response": []
            },
            {
              "name": "üìä Health Distribution",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}",
                    "description": "Admin JWT from /v1/admin/auth/exchange"
                  },
                  {
                    "key": "x-correlation-id",
                    "value": "{{$randomUUID}}",
                    "description": "Correlation ID for request tracking"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/v1/admin/billing/health/distribution",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "admin",
                    "billing",
                    "health",
                    "distribution"
                  ]
                },
                "description": "üìä **Customer Health Score Distribution Analytics**\n\n**Features:**\n- üîí **Requires Permission**: finance.read\n- üéØ **Population Health**: Overall customer base wellness overview\n- üìà **Score Distribution**: Histogram of health scores across customer base\n- üö® **Early Warning**: Identify shifts in customer health patterns\n- üí° **Intervention Opportunities**: Spot trends requiring proactive support\n- üîÑ **Historical Comparison**: Health score evolution over time\n\n**Health Score Bands:**\n- **90-100**: Excellent (Champions)\n- **70-89**: Good (Stable)\n- **50-69**: Fair (Needs Attention)\n- **30-49**: Poor (At Risk)\n- **0-29**: Critical (Immediate Intervention)\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"health_distribution\": {\n    \"total_customers\": 1247,\n    \"average_health_score\": 72.3,\n    \"distribution\": {\n      \"excellent\": {\"count\": 312, \"percent\": 25.0},\n      \"good\": {\"count\": 561, \"percent\": 45.0},\n      \"fair\": {\"count\": 249, \"percent\": 20.0},\n      \"poor\": {\"count\": 87, \"percent\": 7.0},\n      \"critical\": {\"count\": 38, \"percent\": 3.0}\n    },\n    \"trends\": {\n      \"week_over_week_change\": 2.1,\n      \"improving_customers\": 89,\n      \"declining_customers\": 45\n    },\n    \"revenue_impact\": {\n      \"excellent_band_mrr_usd\": 78450.30,\n      \"at_risk_bands_mrr_usd\": 12890.75\n    }\n  }\n}\n```"
              },
              "response": []
            },
            {
              "name": "üîÑ Refresh Analytics Views",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}",
                    "description": "Admin JWT from /v1/admin/auth/exchange"
                  },
                  {
                    "key": "x-correlation-id",
                    "value": "{{$randomUUID}}",
                    "description": "Correlation ID for request tracking"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"views\": [\"customer_health_summary\", \"revenue_analytics_summary\"],\n  \"concurrent\": true\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/v1/admin/billing/maintenance/refresh-views",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "admin",
                    "billing",
                    "maintenance",
                    "refresh-views"
                  ]
                },
                "description": "üîÑ **Manual Analytics View Refresh for Real-Time Data**\n\n**Features:**\n- üîí **Requires Permission**: finance.write\n- ‚ö° **Concurrent Refresh**: Use CONCURRENTLY for zero-downtime updates\n- üéØ **Selective Refresh**: Target specific views or refresh all\n- üìä **Progress Tracking**: Monitor refresh status and performance\n- üîÑ **Fallback Support**: Automatic retry on concurrent refresh failures\n- üõ°Ô∏è **Safety Checks**: Validate views exist before refresh attempts\n\n**Supported Views:**\n- `customer_health_summary`: Customer 360 and health scores\n- `revenue_analytics_summary`: MRR/ARR and provider performance\n- `package_performance_summary`: Subscription tier analytics\n\n**Response (Success):**\n```json\n{\n  \"success\": true,\n  \"message\": \"Analytics views refreshed successfully\",\n  \"refreshed_views\": [\n    {\n      \"view_name\": \"customer_health_summary\",\n      \"refresh_duration_ms\": 2340,\n      \"row_count\": 1247,\n      \"concurrent\": true\n    },\n    {\n      \"view_name\": \"revenue_analytics_summary\",\n      \"refresh_duration_ms\": 1890,\n      \"row_count\": 356,\n      \"concurrent\": true\n    }\n  ],\n  \"total_duration_ms\": 2340,\n  \"next_auto_refresh\": \"2025-09-02T06:00:00Z\"\n}\n```\n\n**Response (Partial Failure):**\n```json\n{\n  \"success\": false,\n  \"message\": \"Some views failed to refresh\",\n  \"results\": [\n    {\n      \"view_name\": \"customer_health_summary\",\n      \"success\": true,\n      \"duration_ms\": 2340\n    },\n    {\n      \"view_name\": \"revenue_analytics_summary\",\n      \"success\": false,\n      \"error\": \"Concurrent refresh failed, retrying without CONCURRENTLY\",\n      \"fallback_attempted\": true\n    }\n  ]\n}\n```"
              },
              "response": []
            }
          ],
          "description": "Admin billing dashboard with comprehensive pricing analytics and customer metrics"
        },
        {
          "name": "üõ°Ô∏è Trust & Safety",
          "item": [
            {
              "name": "üõ°Ô∏è Trust & Safety Risk Scores",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/v1/admin/trust-safety/risk-scores?limit=20&offset=0&minScore=50",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "admin",
                    "trust-safety",
                    "risk-scores"
                  ],
                  "query": [
                    {
                      "key": "limit",
                      "value": "20",
                      "description": "Number of results per page"
                    },
                    {
                      "key": "offset",
                      "value": "0",
                      "description": "Pagination offset"
                    },
                    {
                      "key": "minScore",
                      "value": "50",
                      "description": "Minimum risk score filter (0-100)"
                    }
                  ]
                },
                "description": "Get user risk scores with detailed factor breakdown. Returns weighted risk assessment including chargebacks, failed payments, disputes, security events, violations, and suspicious activity."
              },
              "response": [
                {
                  "name": "Success Response",
                  "originalRequest": {
                    "method": "GET",
                    "header": [
                      {
                        "key": "Authorization",
                        "value": "Bearer {{admin_jwt}}",
                        "type": "text"
                      }
                    ],
                    "url": {
                      "raw": "{{baseUrl}}/v1/admin/trust-safety/risk-scores?limit=20&offset=0",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "v1",
                        "admin",
                        "trust-safety",
                        "risk-scores"
                      ],
                      "query": [
                        {
                          "key": "limit",
                          "value": "20"
                        },
                        {
                          "key": "offset",
                          "value": "0"
                        }
                      ]
                    }
                  },
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "json",
                  "header": [],
                  "body": "{\n  \"data\": [\n    {\n      \"user_id\": \"user_123\",\n      \"email\": \"user@example.com\",\n      \"risk_score\": 75,\n      \"risk_level\": \"high\",\n      \"last_activity\": \"2025-09-07T10:00:00Z\",\n      \"account_age_days\": 45,\n      \"total_spent\": 1500.00,\n      \"risk_factors\": {\n        \"chargebacks\": 2,\n        \"failed_payments\": 5,\n        \"disputes\": 1,\n        \"security_events\": 3,\n        \"violations\": 0,\n        \"suspicious_activity\": 2\n      },\n      \"recommendations\": [\n        \"Review payment history\",\n        \"Monitor account activity\",\n        \"Consider payment method restrictions\"\n      ]\n    }\n  ],\n  \"pagination\": {\n    \"limit\": 20,\n    \"offset\": 0,\n    \"total\": 150\n  },\n  \"summary\": {\n    \"total_high_risk\": 25,\n    \"total_medium_risk\": 50,\n    \"total_low_risk\": 75,\n    \"average_risk_score\": 35.5\n  }\n}"
                }
              ]
            }
          ]
        },
        {
          "name": "üîç Admin Build Logs",
          "description": "Admin-only access to per-build Claude agent logs for debugging. Requires `read_logs` permission.",
          "item": [
            {
              "name": "Stream Build Logs",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Admin JWT Authentication - Replace with actual admin JWT",
                      "const adminJwt = pm.variables.get('adminJwt') || 'your-admin-jwt-here';",
                      "pm.request.headers.add({",
                      "    key: 'Authorization',",
                      "    value: `Bearer ${adminJwt}`",
                      "});"
                    ]
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/v1/admin/builds/{{buildId}}/logs?bytes=-1024",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "admin",
                    "builds",
                    "{{buildId}}",
                    "logs"
                  ],
                  "query": [
                    {
                      "key": "bytes",
                      "value": "-1024",
                      "description": "Get last 1KB (tail functionality). Remove for full log."
                    }
                  ]
                }
              },
              "response": [
                {
                  "name": "Success - NDJSON Stream",
                  "originalRequest": {
                    "method": "GET",
                    "header": [],
                    "url": {
                      "raw": "{{baseUrl}}/v1/admin/builds/{{buildId}}/logs",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "v1",
                        "admin",
                        "builds",
                        "{{buildId}}",
                        "logs"
                      ]
                    }
                  },
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "json",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "application/x-ndjson; charset=utf-8"
                    },
                    {
                      "key": "Accept-Ranges",
                      "value": "bytes"
                    }
                  ],
                  "cookie": [],
                  "body": "{\"kind\":\"meta\",\"buildId\":\"01HZ8X9J2K3L4M5N6P7Q8R9S0T\",\"userId\":\"123\",\"projectId\":\"456\",\"startedAt\":\"2025-09-13T02:48:00.000Z\",\"version\":\"1.0.0\"}\n{\"kind\":\"line\",\"ts\":1726196880123,\"seq\":1,\"src\":\"stdout\",\"buildId\":\"01HZ8X9J2K3L4M5N6P7Q8R9S0T\",\"msg\":\"[Claude] Starting build...\"}\n{\"kind\":\"line\",\"ts\":1726196880124,\"seq\":2,\"src\":\"stderr\",\"buildId\":\"01HZ8X9J2K3L4M5N6P7Q8R9S0T\",\"msg\":\"[Claude] Debug info\"}\n{\"kind\":\"meta\",\"buildId\":\"01HZ8X9J2K3L4M5N6P7Q8R9S0T\",\"endedAt\":\"2025-09-13T02:49:00.000Z\"}"
                }
              ]
            },
            {
              "name": "Get Build Info",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Admin JWT Authentication",
                      "const adminJwt = pm.variables.get('adminJwt') || 'your-admin-jwt-here';",
                      "pm.request.headers.add({",
                      "    key: 'Authorization',",
                      "    value: `Bearer ${adminJwt}`",
                      "});"
                    ]
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/v1/admin/builds/{{buildId}}/info",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "admin",
                    "builds",
                    "{{buildId}}",
                    "info"
                  ]
                }
              },
              "response": [
                {
                  "name": "Success - Build Metadata",
                  "originalRequest": {
                    "method": "GET",
                    "header": [],
                    "url": {
                      "raw": "{{baseUrl}}/v1/admin/builds/{{buildId}}/info",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "v1",
                        "admin",
                        "builds",
                        "{{buildId}}",
                        "info"
                      ]
                    }
                  },
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "json",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "application/json"
                    }
                  ],
                  "cookie": [],
                  "body": "{\n  \"buildId\": \"01HZ8X9J2K3L4M5N6P7Q8R9S0T\",\n  \"projectId\": \"01HZ8X9J2K3L4M5N6P7Q8R9S0U\",\n  \"userId\": \"12345678-1234-1234-1234-123456789012\",\n  \"userEmail\": \"user@example.com\",\n  \"status\": \"completed\",\n  \"createdAt\": \"2025-09-13T02:45:00.000Z\",\n  \"updatedAt\": \"2025-09-13T02:50:00.000Z\",\n  \"buildDurationMs\": 300000,\n  \"totalLinesProcessed\": 1247,\n  \"claudeRequests\": 23,\n  \"memoryPeakMb\": 512,\n  \"errorMessage\": null,\n  \"logExists\": true,\n  \"logSizeBytes\": 45320,\n  \"correlation_id\": \"550e8400-e29b-41d4-a716-446655440000\"\n}"
                }
              ]
            },
            {
              "name": "List Recent Builds",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "// Admin JWT Authentication",
                      "const adminJwt = pm.variables.get('adminJwt') || 'your-admin-jwt-here';",
                      "pm.request.headers.add({",
                      "    key: 'Authorization',",
                      "    value: `Bearer ${adminJwt}`",
                      "});"
                    ]
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/v1/admin/builds?limit=20&status=failed",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "admin",
                    "builds"
                  ],
                  "query": [
                    {
                      "key": "limit",
                      "value": "20",
                      "description": "Number of builds to return (max 100)"
                    },
                    {
                      "key": "offset",
                      "value": "0",
                      "description": "Pagination offset",
                      "disabled": true
                    },
                    {
                      "key": "status",
                      "value": "failed",
                      "description": "Filter by build status (building, completed, failed)"
                    },
                    {
                      "key": "userId",
                      "value": "",
                      "description": "Filter by user UUID",
                      "disabled": true
                    },
                    {
                      "key": "projectId",
                      "value": "",
                      "description": "Filter by project UUID",
                      "disabled": true
                    }
                  ]
                }
              },
              "response": [
                {
                  "name": "Success - Build List",
                  "originalRequest": {
                    "method": "GET",
                    "header": [],
                    "url": {
                      "raw": "{{baseUrl}}/v1/admin/builds?limit=20",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "v1",
                        "admin",
                        "builds"
                      ],
                      "query": [
                        {
                          "key": "limit",
                          "value": "20"
                        }
                      ]
                    }
                  },
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "json",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "application/json"
                    }
                  ],
                  "cookie": [],
                  "body": "{\n  \"builds\": [\n    {\n      \"build_id\": \"01HZ8X9J2K3L4M5N6P7Q8R9S0T\",\n      \"project_id\": \"01HZ8X9J2K3L4M5N6P7Q8R9S0U\",\n      \"user_id\": \"12345678-1234-1234-1234-123456789012\",\n      \"user_email\": \"user@example.com\",\n      \"status\": \"completed\",\n      \"created_at\": \"2025-09-13T02:45:00.000Z\",\n      \"updated_at\": \"2025-09-13T02:50:00.000Z\",\n      \"build_duration_ms\": 300000,\n      \"error_message\": null,\n      \"logExists\": true\n    }\n  ],\n  \"pagination\": {\n    \"limit\": 20,\n    \"offset\": 0,\n    \"total\": 1\n  },\n  \"correlation_id\": \"550e8400-e29b-41d4-a716-446655440000\"\n}"
                }
              ]
            }
          ]
        }
      ],
      "description": "üëë **Admin Panel API - Comprehensive Administrative Control**\n\nüöÄ **NEW: Complete Admin Panel (Aug 31, 2025):**\n- üìä **Control Dashboard**: Real-time KPIs and system health monitoring\n- üë§ **User Management**: Search, suspend, ban, and activate users\n- üìã **Support System**: Ticket management with SLA tracking\n- üí∞ **Financial Operations**: Revenue oversight and refund processing\n- üéì **Advisor Management**: Application review and approval workflow\n- üõ°Ô∏è **Trust & Safety**: Policy enforcement and violation tracking\n\nüîê **NEW: Secure Authentication Flow:**\n- üîÑ **Token Exchange**: Convert Supabase token to Admin JWT\n- üõ°Ô∏è **MFA Required**: Multi-factor authentication mandatory\n- ‚è±Ô∏è **Short-Lived JWTs**: 12-minute expiration for security\n- üìä **Session Tracking**: Complete audit trail with revocation\n- üîç **Supabase Integration**: Direct JWKS validation\n\nüîê **Security-First Architecture:**\n- üîë **JWT Authentication**: Admin role-based access control\n- üìù **Mandatory Reasons**: Structured violation and action codes\n- üîÑ **Idempotency**: Financial operations protected from duplicates\n- üë• **Two-Person Rule**: High-value operations require approval\n- üìä **Audit Logging**: Complete admin action tracking\n- üîç **Correlation IDs**: Full request tracing for troubleshooting\n\nüõ°Ô∏è **Permission System:**\n- `users.read` / `users.write`: User account management\n- `advisors.approve`: Advisor application workflow\n- `support.read` / `support.write`: Support ticket system\n- `finance.read` / `finance.refund`: Financial operations\n- `violations.enforce`: Trust & safety policy enforcement\n- `admin.audit`: Administrative audit log access\n\nüìã **Authentication Steps:**\n1. **Get Supabase Token**: Authenticate with Supabase (with MFA)\n2. **Exchange Token**: Call `/v1/admin/auth/exchange` with Supabase token\n3. **Set admin_jwt Variable**: Copy JWT from response to {{admin_jwt}}\n4. **Use Admin APIs**: All endpoints use Authorization: Bearer {{admin_jwt}}\n\nüìã **Required Headers for Admin Endpoints:**\n```\nAuthorization: Bearer {{admin_jwt}} [From token exchange]\nx-correlation-id: [UUID for request tracking]\nx-admin-reason: [Required for sensitive operations]\nidempotency-key: [Required for financial operations]\n```\n\nüéØ **Structured Reason Codes:**\n\n**Trust & Safety:**\n- `T01`: Spam or promotional content\n- `T02`: Harassment or abusive behavior\n- `T03`: Fraud or chargeback risk\n- `T04`: Policy evasion or circumvention\n- `T05`: Illegal content or activity\n\n**Financial Operations:**\n- `F01`: Duplicate charge or billing error\n- `F02`: Customer dissatisfaction or complaint\n- `F03`: Fraud reversal or chargeback\n\n‚ö° **Operational Features:**\n- üîÑ **Real-Time Monitoring**: Live system health indicators\n- üìä **Advanced Filtering**: Multi-criteria search and sorting\n- ‚è∞ **SLA Management**: Automated due time calculations\n- üí∏ **Smart Refunds**: Automatic two-person rule enforcement\n- üéØ **Role-Based UI**: Permission-aware interface hints\n\nüö® **Emergency Controls:**\n- üõë **Immediate Suspension**: Critical user account actions\n- üí∞ **Refund Processing**: Customer satisfaction management\n- üîç **Audit Trail**: Compliance and security monitoring\n- üìû **Support Escalation**: Priority ticket management\n\n‚ö†Ô∏è **Rate Limits:**\n- **Standard Operations**: 60 requests/minute per admin\n- **Financial Operations**: 20 requests/minute per admin\n- **Bulk Operations**: 10 requests/minute per admin\n\nüéØ **Testing Workflow:**\n1. **Dashboard**: Verify system health and KPI display\n2. **User Management**: Search, suspend, and reactivate test users\n3. **Support System**: Create and manage support tickets\n4. **Financial Operations**: Process refunds with proper reason codes\n5. **Advisor Management**: Review and approve test applications\n6. **Audit Trail**: Verify all actions are properly logged\n\nüîç **Troubleshooting:**\n- Use correlation IDs for request tracing\n- Check admin JWT claims and permissions\n- Verify structured reason codes format\n- Monitor rate limit headers in responses\n- Review audit logs for action history\n\nThis comprehensive admin panel provides enterprise-grade administrative control with security, compliance, and operational excellence built-in."
    },
    {
      "name": "üí∞ Advanced Revenue Metrics",
      "item": [
        {
          "name": "üìä Complete Revenue Dashboard",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_jwt}}",
                "description": "Admin JWT from /v1/admin/auth/exchange"
              },
              {
                "key": "x-correlation-id",
                "value": "{{$randomUUID}}",
                "description": "Correlation ID for request tracking"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/v1/admin/metrics/revenue",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "admin",
                "metrics",
                "revenue"
              ]
            },
            "description": "üìä **Complete Revenue Metrics Dashboard**\\n\\n**Features:**\\n- üîí **Requires Permission**: finance.read\\n- üí∞ **MRR/ARR Analytics**: Monthly and annual recurring revenue with growth metrics\\n- üë• **Customer Lifetime Value**: LTV calculations by plan and cohort\\n- üìà **Average Revenue Per User**: ARPU segmented by plan and region\\n- üöÄ **Growth Analytics**: Month-over-month, quarter-over-quarter, year-over-year\\n- üìä **Multi-dimensional Breakdowns**: By plan, gateway, currency, and country\\n- üí± **Multi-currency Support**: USD-normalized with exchange rate conversion\\n\\n**Response includes all revenue metrics in the format expected by frontend team.**"
          },
          "response": []
        },
        {
          "name": "üìà MRR Analytics",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_jwt}}",
                "description": "Admin JWT from /v1/admin/auth/exchange"
              },
              {
                "key": "x-correlation-id",
                "value": "{{$randomUUID}}",
                "description": "Correlation ID for request tracking"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/v1/admin/metrics/mrr",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "admin",
                "metrics",
                "mrr"
              ]
            },
            "description": "üìà **Monthly Recurring Revenue (MRR) Analytics**\\n\\n**Features:**\\n- üí∞ **Total MRR**: USD-normalized monthly recurring revenue\\n- üìä **Multi-dimensional Breakdowns**: By plan, payment gateway, currency\\n- üöÄ **Growth Components**: New business, expansion, contraction, churn\\n- üìà **Growth Rate**: Month-over-month growth percentage\\n- üí± **Currency Conversion**: Real-time exchange rate normalization"
          },
          "response": []
        },
        {
          "name": "üë• Customer LTV Analytics",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_jwt}}",
                "description": "Admin JWT from /v1/admin/auth/exchange"
              },
              {
                "key": "x-correlation-id",
                "value": "{{$randomUUID}}",
                "description": "Correlation ID for request tracking"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/v1/admin/metrics/ltv",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "admin",
                "metrics",
                "ltv"
              ]
            },
            "description": "üë• **Customer Lifetime Value (LTV) Analytics**\\n\\n**Features:**\\n- üí∞ **Overall LTV**: Average customer lifetime value\\n- üìä **Plan Segmentation**: LTV breakdown by subscription tier\\n- üìÖ **Cohort Analysis**: LTV tracking by customer acquisition month\\n- ‚è±Ô∏è **Customer Lifetime**: Average customer retention in months"
          },
          "response": []
        },
        {
          "name": "üíµ ARPU Analytics",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_jwt}}",
                "description": "Admin JWT from /v1/admin/auth/exchange"
              },
              {
                "key": "x-correlation-id",
                "value": "{{$randomUUID}}",
                "description": "Correlation ID for request tracking"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/v1/admin/metrics/arpu",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "admin",
                "metrics",
                "arpu"
              ]
            },
            "description": "üíµ **Average Revenue Per User (ARPU) Analytics**\\n\\n**Features:**\\n- üí∞ **Overall ARPU**: Average monthly revenue per active customer\\n- üìä **Plan Breakdown**: ARPU by subscription tier\\n- üåç **Geographic Analysis**: ARPU by country/region\\n- üë• **Customer Count**: Total active customer base"
          },
          "response": []
        },
        {
          "name": "üöÄ Growth Analytics",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_jwt}}",
                "description": "Admin JWT from /v1/admin/auth/exchange"
              },
              {
                "key": "x-correlation-id",
                "value": "{{$randomUUID}}",
                "description": "Correlation ID for request tracking"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/v1/admin/metrics/growth",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "admin",
                "metrics",
                "growth"
              ]
            },
            "description": "üöÄ **Revenue Growth Analytics**\\n\\n**Features:**\\n- üìä **Multi-timeframe Analysis**: Month-over-month, quarter-over-quarter, year-over-year\\n- üìà **Growth Rate Calculation**: Percentage growth metrics\\n- üí∞ **Current vs Previous**: Revenue comparison across periods\\n- üìâ **Trend Identification**: Growth acceleration or deceleration detection"
          },
          "response": []
        },
        {
          "name": "üîÑ Refresh Revenue Views",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_jwt}}",
                "description": "Admin JWT from /v1/admin/auth/exchange"
              },
              {
                "key": "x-correlation-id",
                "value": "{{$randomUUID}}",
                "description": "Correlation ID for request tracking"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/v1/admin/metrics/refresh",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "admin",
                "metrics",
                "refresh"
              ]
            },
            "description": "üîÑ **Manual Revenue Views Refresh**\\n\\n**Features:**\\n- üîÑ **On-demand Refresh**: Manually trigger materialized view updates\\n- ‚ö° **Concurrent Processing**: Non-blocking refresh operation\\n- üìä **All Views Updated**: MRR, LTV, ARPU, and growth metrics\\n- üöÄ **Production Safe**: Uses REFRESH CONCURRENTLY to avoid locks\\n\\n**Note:** Normally views are refreshed automatically daily at 3 AM UTC."
          },
          "response": []
        }
      ],
      "description": "üí∞ **Advanced Revenue Metrics - Enterprise SaaS Analytics**\\n\\nüöÄ **NEW: Complete Revenue Analytics System (Jan 2025):**\\n- üìä **MRR/ARR Tracking**: Monthly and annual recurring revenue with multi-dimensional breakdowns\\n- üë• **Customer Lifetime Value**: LTV calculations by plan, cohort, and acquisition channel\\n- üíµ **ARPU Analytics**: Average revenue per user with geographic and plan segmentation\\n- üìà **Growth Metrics**: Multi-timeframe growth analysis (MoM, QoQ, YoY)\\n- üí± **Multi-Currency Support**: USD normalization with real-time exchange rates\\n- üîÑ **Automated Updates**: Daily materialized view refresh with CONCURRENTLY for zero downtime\\n\\nüí° **Revenue Intelligence Features:**\\n- **MRR Breakdown**: Total MRR with attribution by plan, gateway, currency, and country\\n- **Growth Components**: New business, expansion, contraction, and churn analysis\\n- **LTV Segmentation**: Customer lifetime value by subscription tier and acquisition cohort\\n- **ARPU Analysis**: Revenue per user metrics for pricing optimization\\n- **Exchange Rate Integration**: Real-time currency conversion for global operations\\n\\nüéØ **API Performance:**\\n- **Complete Dashboard**: <200ms for comprehensive revenue overview\\n- **Individual Metrics**: <100ms for specific MRR, LTV, ARPU, or growth data\\n- **View Refresh**: <3s concurrent refresh for production datasets\\n\\nüîê **Security & Access:**\\n- **Admin JWT Required**: All endpoints require admin authentication\\n- **Permission Check**: finance.read permission required\\n- **Rate Limiting**: 30 requests/minute for financial metrics\\n\\nThis advanced revenue metrics system provides comprehensive SaaS analytics with multi-currency support, automated updates, and enterprise-grade performance optimizations."
    },
    {
      "name": "üéØ Advisor Network",
      "item": [
        {
          "name": "üìã Public APIs",
          "item": [
            {
              "name": "Get Platform Pricing",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/v1/consultations/pricing?advisor_id={{advisorId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "v1",
                    "consultations",
                    "pricing"
                  ],
                  "query": [
                    {
                      "key": "advisor_id",
                      "value": "{{advisorId}}",
                      "description": "Required: Advisor ID (use 'id' field from advisor profile API) to get specific pricing with free consultation info"
                    }
                  ]
                },
                "description": "üí∞ **Get Consultation Pricing (Platform & Advisor-Specific)**\n\n**Features:**\n- üìä Platform rates: $9 (15min), $19 (30min), $35 (60min)\n- üÜì **NEW**: Advisor-specific free consultations\n- üéØ 30% platform fee\n- üíµ USD-only for MVP\n- üö´ **No Authentication Required**\n\n**Query Parameters:**\n- `advisor_id` (required): Advisor ID (use 'id' field from advisor profile API) to get specific pricing with free consultation info\n\n**Response (General):**\n```json\n{\n  \"success\": true,\n  \"pricing\": {\n    \"15\": { \"price_cents\": 900, \"price_display\": \"$9.00\" },\n    \"30\": { \"price_cents\": 1900, \"price_display\": \"$19.00\" },\n    \"60\": { \"price_cents\": 3500, \"price_display\": \"$35.00\" }\n  },\n  \"platform_fee_percentage\": 30\n}\n```\n\n**Response (With Free Consultations):**\n```json\n{\n  \"success\": true,\n  \"pricing\": {\n    \"15\": { \"price_cents\": 0, \"price_display\": \"Free\" },\n    \"30\": { \"price_cents\": 1900, \"price_display\": \"$19.00\" },\n    \"60\": { \"price_cents\": 3500, \"price_display\": \"$35.00\" }\n  },\n  \"platform_fee_percentage\": 30,\n  \"advisor_pricing_model\": \"hybrid\",\n  \"free_consultations_available\": {\n    \"15\": true, \"30\": false, \"60\": false\n  }\n}\n```"
              },
              "response": []
            },
            {
              "name": "Search Advisors",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/v1/advisors/search?specialty=frontend&limit=20",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "v1",
                    "advisors",
                    "search"
                  ],
                  "query": [
                    {
                      "key": "specialty",
                      "value": "frontend",
                      "description": "Filter by specialty: frontend, fullstack, ecommerce"
                    },
                    {
                      "key": "language",
                      "value": "English",
                      "disabled": true,
                      "description": "Filter by spoken language"
                    },
                    {
                      "key": "rating_min",
                      "value": "4",
                      "disabled": true,
                      "description": "Minimum rating (0-5)"
                    },
                    {
                      "key": "limit",
                      "value": "20",
                      "description": "Results limit (default: 20, max: 50)"
                    },
                    {
                      "key": "offset",
                      "value": "0",
                      "disabled": true,
                      "description": "Pagination offset"
                    }
                  ]
                },
                "description": "üîç **Discover Advisors**\n\n**Features:**\n- üéØ Filter by specialty, language, rating\n- ‚≠ê Shows rating and review count\n- üì± Pagination support\n- üö´ **No Authentication Required**\n- ‚úÖ Only shows approved advisors accepting bookings\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"advisors\": [{\n    \"id\": \"uuid\",\n    \"display_name\": \"Expert Developer\",\n    \"bio\": \"React/Node.js specialist\",\n    \"skills\": [\"React\", \"Node.js\"],\n    \"specialties\": [\"frontend\"],\n    \"languages\": [\"English\"],\n    \"rating\": 4.8,\n    \"review_count\": 23,\n    \"approval_status\": \"approved\",\n    \"is_accepting_bookings\": true,\n    \"country_code\": \"US\"\n  }]\n}\n```"
              },
              "response": []
            },
            {
              "name": "Get Advisor Profile",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/v1/advisors/{{advisorId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "v1",
                    "advisors",
                    "{{advisorId}}"
                  ],
                  "variable": [
                    {
                      "key": "advisorId",
                      "value": "advisor-uuid-123"
                    }
                  ]
                },
                "description": "üë§ **Get Advisor Profile**\n\n**Features:**\n- üìã Complete advisor profile\n- ‚≠ê Rating and review metrics\n- üîó Cal.com booking URL\n- üö´ **No Authentication Required**\n- ‚úÖ Only shows approved advisors\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"advisor\": {\n    \"id\": \"uuid\",\n    \"display_name\": \"Expert Developer\",\n    \"bio\": \"10+ years React experience\",\n    \"avatar_url\": \"https://...\",\n    \"skills\": [\"React\", \"TypeScript\"],\n    \"specialties\": [\"frontend\"],\n    \"languages\": [\"English\"],\n    \"rating\": 4.8,\n    \"review_count\": 23,\n    \"cal_com_event_type_url\": \"https://cal.com/...\",\n    \"approval_status\": \"approved\",\n    \"is_accepting_bookings\": true,\n    \"country_code\": \"US\"\n  }\n}\n```"
              },
              "response": []
            }
          ],
          "description": "üåê **Public Advisor Discovery**\n\nNo authentication required. Perfect for:\n- üîç Advisor marketplace discovery\n- üí∞ Pricing display\n- üë§ Profile browsing"
        },
        {
          "name": "üë®‚Äçüíº Advisor Management",
          "item": [
            {
              "name": "Apply to Become Advisor",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"display_name\": \"John Expert\",\n  \"bio\": \"Senior React developer with 8+ years experience building scalable web applications. Specialized in modern React patterns, state management, and performance optimization.\",\n  \"avatar_url\": \"https://example.com/avatar.jpg\",\n  \"skills\": [\"React\", \"TypeScript\", \"Node.js\", \"Next.js\"],\n  \"specialties\": [\"frontend\", \"fullstack\"],\n  \"languages\": [\"English\", \"Arabic\"],\n  \"cal_com_event_type_url\": \"https://cal.com/johnexpert/consultation\",\n  \"country_code\": \"US\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/v1/advisors/apply",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "v1",
                    "advisors",
                    "apply"
                  ]
                },
                "description": "üìù **Submit Advisor Application**\n\n**Features:**\n- üîí **HMAC + Claims Authentication Required**\n- ‚úÖ Complete profile submission\n- üåç Country code for Stripe Connect\n- üìÖ Cal.com integration ready\n- ‚ö†Ô∏è One application per user\n\n**Required Fields:**\n- `display_name`: Public advisor name\n- `country_code`: For payment processing (e.g., 'US', 'GB')\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"application_id\": \"uuid\",\n  \"status\": \"pending\",\n  \"message\": \"Advisor application submitted successfully\"\n}\n```"
              },
              "response": []
            },
            {
              "name": "Get Own Advisor Profile",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/v1/advisors/profile",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "v1",
                    "advisors",
                    "profile"
                  ]
                },
                "description": "üîç **Get Own Advisor Profile**\n\n**Features:**\n- üîí **HMAC + Claims Authentication Required**\n- üìä Full profile with private fields\n- ‚úÖ Application status tracking\n- üí∞ Stripe Connect status\n- üéõÔ∏è Booking availability toggle\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"profile\": {\n    \"id\": \"uuid\",\n    \"display_name\": \"John Expert\",\n    \"approval_status\": \"approved\",\n    \"stripe_connect_account_id\": \"acct_...\",\n    \"is_accepting_bookings\": true,\n    \"rating\": 4.8,\n    \"review_count\": 23,\n    \"created_at\": \"2025-08-20T10:00:00Z\",\n    \"approved_at\": \"2025-08-21T15:30:00Z\"\n  }\n}\n```"
              },
              "response": []
            },
            {
              "name": "Update Advisor Profile",
              "request": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"bio\": \"Updated bio with more details about my expertise in React and modern web development.\",\n  \"skills\": [\"React\", \"TypeScript\", \"Node.js\", \"Next.js\", \"GraphQL\"],\n  \"cal_com_event_type_url\": \"https://cal.com/johnexpert/updated-consultation\",\n  \"is_accepting_bookings\": true\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/v1/advisors/profile",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "v1",
                    "advisors",
                    "profile"
                  ]
                },
                "description": "‚úèÔ∏è **Update Advisor Profile**\n\n**Features:**\n- üîí **HMAC + Claims Authentication Required**\n- ‚úÖ Approved advisors only\n- üéØ Partial updates supported\n- üîÑ Real-time profile changes\n\n**Updatable Fields:**\n- `display_name`, `bio`, `avatar_url`\n- `skills`, `specialties`, `languages`\n- `cal_com_event_type_url`\n- `is_accepting_bookings`\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Profile updated successfully\",\n  \"advisor\": {\n    \"id\": \"uuid\",\n    \"display_name\": \"Updated Name\",\n    \"updated_at\": \"2025-08-25T12:00:00Z\"\n  }\n}\n```"
              },
              "response": []
            },
            {
              "name": "Toggle Booking Availability",
              "request": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"is_accepting_bookings\": false\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/v1/advisors/booking-status",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "v1",
                    "advisors",
                    "booking-status"
                  ]
                },
                "description": "üéõÔ∏è **Toggle Booking Availability**\n\n**Features:**\n- üîí **HMAC + Claims Authentication Required**\n- ‚ö° Quick availability toggle\n- üö´ Pause bookings temporarily\n- ‚úÖ Resume bookings when ready\n\n**Use Cases:**\n- üèñÔ∏è Going on vacation\n- üîÑ Managing workload\n- ‚ö° Emergency pause\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Booking availability disabled\",\n  \"is_accepting_bookings\": false\n}\n```"
              },
              "response": []
            },
            {
              "name": "Get Monthly Earnings",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/v1/advisors/earnings?year=2025&month=8",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "v1",
                    "advisors",
                    "earnings"
                  ],
                  "query": [
                    {
                      "key": "year",
                      "value": "2025",
                      "description": "Year (default: current year)"
                    },
                    {
                      "key": "month",
                      "value": "8",
                      "description": "Month 1-12 (default: current month)"
                    }
                  ]
                },
                "description": "üí∞ **Get Monthly Earnings Report**\n\n**Features:**\n- üîí **HMAC + Claims Authentication Required**\n- üìä Consultation count and earnings\n- ‚ûñ Refund/chargeback adjustments\n- üíµ Total payout calculation\n- üìÖ Specific month/year filtering\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"period\": { \"year\": 2025, \"month\": 8 },\n  \"earnings\": {\n    \"consultations_count\": 12,\n    \"earned_cents\": 15960,\n    \"adjustments_cents\": -630,\n    \"total_earnings_cents\": 15330,\n    \"total_earnings_display\": \"$153.30\"\n  }\n}\n```"
              },
              "response": []
            }
          ],
          "description": "üë®‚Äçüíº **Advisor Account Management**\n\nFor advisors to manage their profiles and track earnings:\n- üìù Application submission\n- ‚úèÔ∏è Profile management\n- üí∞ Earnings tracking"
        },
        {
          "name": "üìÖ Consultation Management",
          "item": [
            {
              "name": "Book Consultation",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"advisor_id\": \"advisor-uuid-123\",\n  \"duration_minutes\": 30,\n  \"project_id\": \"my-react-project\",\n  \"cal_booking_id\": \"cal_booking_abcd1234\",\n  \"locale\": \"en-us\",\n  \"client_timezone\": \"America/New_York\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/v1/consultations/book",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "v1",
                    "consultations",
                    "book"
                  ]
                },
                "description": "üìÖ **Book Consultation with Payment**\n\n**Features:**\n- üîí **HMAC + Claims Authentication Required**\n- üí≥ Creates Stripe payment intent\n- ‚è∞ Platform-fixed pricing (15/30/60 min only)\n- üì± Cal.com integration ready\n- üåç Timezone and locale support\n\n**Required Fields:**\n- `advisor_id`: Target advisor UUID\n- `duration_minutes`: Must be 15, 30, or 60\n- `cal_booking_id`: From Cal.com booking widget\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"consultation\": {\n    \"id\": \"consultation-uuid\",\n    \"advisor_name\": \"John Expert\",\n    \"duration_minutes\": 30,\n    \"price_cents\": 1900\n  },\n  \"payment\": {\n    \"payment_intent_id\": \"pi_...\",\n    \"client_secret\": \"pi_..._secret_...\",\n    \"total_amount\": 1900\n  }\n}\n```"
              },
              "response": []
            },
            {
              "name": "Get Consultation Details",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/v1/consultations/{{consultationId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "v1",
                    "consultations",
                    "{{consultationId}}"
                  ],
                  "variable": [
                    {
                      "key": "consultationId",
                      "value": "consultation-uuid-123"
                    }
                  ]
                },
                "description": "üìã **Get Consultation Details**\n\n**Features:**\n- üîí **HMAC + Claims Authentication Required**\n- üîê Privacy protection (advisors see limited client info)\n- üìπ Video call URL from Cal.com\n- üìä Status and timing information\n\n**Privacy Rules:**\n- üë§ **Clients**: See full advisor info\n- üë®‚Äçüíº **Advisors**: See client first name only (no email/phone)\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"consultation\": {\n    \"id\": \"uuid\",\n    \"duration_minutes\": 30,\n    \"status\": \"scheduled\",\n    \"scheduled_at\": \"2025-08-26T15:00:00Z\",\n    \"video_url\": \"https://meet.google.com/...\",\n    \"price_cents\": 1900,\n    \"advisor\": { \"id\": \"uuid\", \"name\": \"John Expert\" },\n    \"client\": { \"first_name\": \"Jane\" }\n  }\n}\n```"
              },
              "response": []
            },
            {
              "name": "Cancel Consultation",
              "request": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"reason\": \"Schedule conflict - need to reschedule\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/v1/consultations/{{consultationId}}/cancel",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "v1",
                    "consultations",
                    "{{consultationId}}",
                    "cancel"
                  ],
                  "variable": [
                    {
                      "key": "consultationId",
                      "value": "consultation-uuid-123"
                    }
                  ]
                },
                "description": "‚ùå **Cancel Consultation with Refund Policy**\n\n**Features:**\n- üîí **HMAC + Claims Authentication Required**\n- ‚è∞ **Automatic Refund Policy Enforcement**\n- üí∞ >24h before = Full refund\n- üö´ ‚â§24h before = No refund (advisor keeps earnings)\n- üë• Both client and advisor can cancel\n\n**Refund Policy:**\n- ‚úÖ **Cancel >24 hours**: Full refund to client\n- ‚ùå **Cancel ‚â§24 hours**: No refund, advisor keeps 70%\n- üîÑ Automatic Stripe refund processing\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Consultation cancelled successfully\",\n  \"consultation\": {\n    \"id\": \"uuid\",\n    \"status\": \"cancelled\",\n    \"cancelled_at\": \"2025-08-25T12:00:00Z\"\n  },\n  \"refund\": {\n    \"will_be_refunded\": true,\n    \"refund_amount_cents\": 1900,\n    \"refund_reason\": \"Cancelled more than 24 hours before consultation\"\n  }\n}\n```"
              },
              "response": []
            },
            {
              "name": "Submit Review",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"rating\": 5,\n  \"review_text\": \"Excellent consultation! John provided clear explanations and practical solutions for my React component architecture. Very knowledgeable and helpful.\",\n  \"expertise_rating\": 5,\n  \"communication_rating\": 5,\n  \"helpfulness_rating\": 5\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/v1/consultations/{{consultationId}}/review",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "v1",
                    "consultations",
                    "{{consultationId}}",
                    "review"
                  ],
                  "variable": [
                    {
                      "key": "consultationId",
                      "value": "consultation-uuid-123"
                    }
                  ]
                },
                "description": "‚≠ê **Submit Advisor Review**\n\n**Features:**\n- üîí **HMAC + Claims Authentication Required**\n- üë§ **Clients only** - after completed consultations\n- ‚≠ê Required overall rating (1-5)\n- üìù Optional text review\n- üìä Optional detailed ratings (expertise, communication, helpfulness)\n- üö´ One review per consultation\n\n**Validation:**\n- ‚úÖ Must be completed consultation\n- ‚úÖ Client must have attended\n- ‚ùå Cannot review twice\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Review submitted successfully\",\n  \"review\": {\n    \"id\": \"review-uuid\",\n    \"rating\": 5,\n    \"submitted_at\": \"2025-08-26T16:30:00Z\"\n  }\n}\n```"
              },
              "response": []
            }
          ],
          "description": "üìÖ **Consultation Lifecycle Management**\n\nEnd-to-end consultation management:\n- üí≥ Booking with payment\n- üìã Details viewing\n- ‚ùå Cancellation with refunds\n- ‚≠ê Review submission"
        },
        {
          "name": "üëë Admin Management",
          "item": [
            {
              "name": "List Advisor Applications",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/v1/admin/advisor-applications?status=pending&limit=50",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "v1",
                    "admin",
                    "advisor-applications"
                  ],
                  "query": [
                    {
                      "key": "status",
                      "value": "pending",
                      "description": "Filter by status: pending, approved, rejected"
                    },
                    {
                      "key": "limit",
                      "value": "50",
                      "description": "Results limit (default: 50)"
                    },
                    {
                      "key": "offset",
                      "value": "0",
                      "disabled": true,
                      "description": "Pagination offset"
                    }
                  ]
                },
                "description": "üìã **List Advisor Applications (Admin Only)**\n\n**Features:**\n- üîí **Admin Authentication Required**\n- üìä Filter by approval status\n- üìß Includes applicant email for admin review\n- üì± Pagination support\n\n**Admin Access:**\n- üëÄ Full applicant information\n- üìß Email addresses visible\n- üîç Skills and experience review\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"applications\": [{\n    \"id\": \"uuid\",\n    \"display_name\": \"John Expert\",\n    \"bio\": \"React specialist...\",\n    \"skills\": [\"React\", \"TypeScript\"],\n    \"specialties\": [\"frontend\"],\n    \"country_code\": \"US\",\n    \"approval_status\": \"pending\",\n    \"email\": \"john@example.com\",\n    \"created_at\": \"2025-08-20T10:00:00Z\"\n  }],\n  \"total_returned\": 15\n}\n```"
              },
              "response": []
            },
            {
              "name": "Approve/Reject Advisor",
              "request": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"approval_status\": \"approved\",\n  \"notes\": \"Excellent background in React and strong communication skills. Portfolio demonstrates solid expertise.\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/v1/admin/advisors/{{advisorId}}/approve",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "v1",
                    "admin",
                    "advisors",
                    "{{advisorId}}",
                    "approve"
                  ],
                  "variable": [
                    {
                      "key": "advisorId",
                      "value": "advisor-uuid-123"
                    }
                  ]
                },
                "description": "‚úÖ‚ùå **Approve or Reject Advisor Application**\n\n**Features:**\n- üîí **Admin Authentication Required**\n- ‚úÖ Approve qualified advisors\n- ‚ùå Reject unsuitable applications\n- üìù Optional admin notes\n- üìß Automatic notification (TODO)\n\n**Approval Status:**\n- `approved`: Advisor can start accepting bookings\n- `rejected`: Application denied, user notified\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Advisor application approved\",\n  \"advisor\": {\n    \"id\": \"uuid\",\n    \"display_name\": \"John Expert\",\n    \"approval_status\": \"approved\",\n    \"approved_at\": \"2025-08-25T14:30:00Z\"\n  },\n  \"admin_notes\": \"Excellent qualifications\"\n}\n```"
              },
              "response": []
            }
          ],
          "description": "üëë **Admin Panel Functions**\n\nFor platform administrators:\n- üìã Review advisor applications\n- ‚úÖ Approve qualified advisors\n- ‚ùå Reject unsuitable applications"
        },
        {
          "name": "üìù Phase 2 - Application System",
          "item": [
            {
              "name": "Get Draft Application",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "x-sheen-claims",
                    "value": "eyJ1c2VySWQiOiJ1c2VyMTIzIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIiwicm9sZXMiOlsidXNlciJdLCJpc3N1ZWQiOjE2OTI5ODQzMDAsImV4cGlyZXMiOjE2OTI5ODc5MDB9",
                    "description": "Base64 encoded authentication claims"
                  },
                  {
                    "key": "x-sheen-locale",
                    "value": "en",
                    "description": "Optional locale for i18n support"
                  },
                  {
                    "key": "x-correlation-id",
                    "value": "{{$randomUUID}}",
                    "description": "Optional correlation ID for request tracking"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/advisor/draft",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "advisor",
                    "draft"
                  ]
                },
                "description": "üìã **Get Current Draft Application**\n\n**Features:**\n- üîí **User Authentication Required**\n- üìù Retrieve saved draft application\n- üéØ Auto-save progress tracking\n- üìä Form completion status\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"id\": \"uuid\",\n    \"status\": \"draft\",\n    \"professional_data\": {\n      \"bio\": \"Frontend developer with 5 years experience...\",\n      \"skills\": [\"React\", \"TypeScript\", \"Node.js\"],\n      \"specialties\": [\"frontend\", \"fullstack\"],\n      \"languages\": [\"English\", \"Arabic\"],\n      \"yearsExperience\": 5,\n      \"isComplete\": false,\n      \"completedSections\": [\"basic\", \"skills\"]\n    },\n    \"updated_at\": \"2025-08-27T14:30:00Z\"\n  },\n  \"correlationId\": \"req_123\"\n}\n```"
              },
              "response": []
            },
            {
              "name": "Save Draft (Auto-Save)",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "x-sheen-claims",
                    "value": "eyJ1c2VySWQiOiJ1c2VyMTIzIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIiwicm9sZXMiOlsidXNlciJdLCJpc3N1ZWQiOjE2OTI5ODQzMDAsImV4cGlyZXMiOjE2OTI5ODc5MDB9",
                    "description": "Base64 encoded authentication claims"
                  },
                  {
                    "key": "x-correlation-id",
                    "value": "{{$randomUUID}}",
                    "description": "Optional correlation ID for request tracking"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"professionalData\": {\n    \"bio\": \"Experienced frontend developer with expertise in React, TypeScript, and modern web technologies. Passionate about creating intuitive user experiences and helping teams deliver high-quality applications.\",\n    \"skills\": [\"React\", \"TypeScript\", \"JavaScript\", \"Node.js\", \"Next.js\", \"CSS\", \"HTML\"],\n    \"specialties\": [\"frontend\", \"fullstack\", \"ui-ux\"],\n    \"languages\": [\"English\", \"Arabic\"],\n    \"yearsExperience\": 5,\n    \"portfolioUrl\": \"https://johndoe.dev\",\n    \"linkedinUrl\": \"https://linkedin.com/in/johndoe\",\n    \"githubUrl\": \"https://github.com/johndoe\",\n    \"timezone\": \"America/New_York\",\n    \"weeklyAvailabilityHours\": 20,\n    \"preferredSessionDuration\": [30, 60],\n    \"communicationStyle\": \"Clear and patient, adapts to client's technical level\",\n    \"preferredLanguages\": [\"English\"],\n    \"isComplete\": false,\n    \"completedSections\": [\"basic\", \"skills\", \"portfolio\"]\n  }\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/advisor/draft",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "advisor",
                    "draft"
                  ]
                },
                "description": "üíæ **Create/Update Draft Application (Auto-Save)**\n\n**Features:**\n- üîí **User Authentication Required**\n- üíæ Automatic draft saving\n- üîÑ UPSERT pattern prevents conflicts\n- üìä Progress tracking with completedSections\n- ‚úÖ Validation with helpful error messages\n\n**Request Body:**\n- All fields are optional for incremental saves\n- Use `completedSections` array to track form progress\n- Set `isComplete: true` when ready for submission\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"id\": \"uuid\",\n    \"status\": \"draft\",\n    \"professional_data\": { /* updated data */ },\n    \"updated_at\": \"2025-08-27T14:35:00Z\"\n  },\n  \"message\": \"Draft saved successfully\",\n  \"correlationId\": \"req_124\"\n}\n```\n\n**Auto-Save Pattern:**\n```javascript\n// Debounced auto-save every 30 seconds\nconst debouncedSave = debounce(async (data) => {\n  await fetch('/api/advisor/draft', {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify({ professionalData: data })\n  });\n}, 30000);\n```"
              },
              "response": []
            },
            {
              "name": "Submit Application",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "x-sheen-claims",
                    "value": "eyJ1c2VySWQiOiJ1c2VyMTIzIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIiwicm9sZXMiOlsidXNlciJdLCJpc3N1ZWQiOjE2OTI5ODQzMDAsImV4cGlyZXMiOjE2OTI5ODc5MDB9",
                    "description": "Base64 encoded authentication claims"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/advisor/draft/submit",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "advisor",
                    "draft",
                    "submit"
                  ]
                },
                "description": "üöÄ **Submit Application for Review**\n\n**Features:**\n- üîí **User Authentication Required**\n- ‚úÖ Validates application completeness\n- üìù Changes status from 'draft' to 'submitted'\n- üîÑ Creates timeline event for admin workflow\n- ‚ùå Prevents resubmission of already submitted applications\n\n**Validation Requirements:**\n- Bio: Required, max 2000 characters\n- Skills: Minimum 3, maximum 20\n- Specialties: Minimum 1, maximum 10\n- Years Experience: 1-50 range\n- Languages: At least 1 communication language\n\n**Response (Success):**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"id\": \"uuid\",\n    \"status\": \"submitted\",\n    \"submitted_at\": \"2025-08-27T14:40:00Z\",\n    \"professional_data\": { /* complete data */ }\n  },\n  \"message\": \"Application submitted successfully\",\n  \"correlationId\": \"req_125\"\n}\n```\n\n**Response (Validation Error):**\n```json\n{\n  \"success\": false,\n  \"error\": \"Application incomplete: At least 3 skills are required\",\n  \"correlationId\": \"req_126\"\n}\n```"
              },
              "response": []
            },
            {
              "name": "Get Advisor Profile",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "x-sheen-claims",
                    "value": "eyJ1c2VySWQiOiJ1c2VyMTIzIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIiwicm9sZXMiOlsidXNlciJdLCJpc3N1ZWQiOjE2OTI5ODQzMDAsImV4cGlyZXMiOjE2OTI5ODc5MDB9",
                    "description": "Base64 encoded authentication claims"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/advisor/profile",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "advisor",
                    "profile"
                  ]
                },
                "description": "üë§ **Get Advisor Profile**\n\n**Features:**\n- üîí **User Authentication Required**\n- üìã Complete advisor profile information\n- üìä Onboarding steps tracking\n- ‚≠ê Rating and review statistics\n- üéØ Approval status and admin review timeline\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"id\": \"advisor_uuid\",\n    \"display_name\": \"John Doe\",\n    \"bio\": \"Expert frontend developer...\",\n    \"skills\": [\"React\", \"TypeScript\"],\n    \"specialties\": [\"frontend\", \"ui-ux\"],\n    \"languages\": [\"English\", \"Arabic\"],\n    \"rating\": 4.8,\n    \"review_count\": 25,\n    \"approval_status\": \"approved\",\n    \"is_accepting_bookings\": true,\n    \"onboarding_steps\": {\n      \"profile_completed\": true,\n      \"skills_added\": true,\n      \"availability_set\": true,\n      \"stripe_connected\": true,\n      \"cal_connected\": true,\n      \"admin_approved\": true\n    },\n    \"review_started_at\": \"2025-08-20T10:00:00Z\",\n    \"review_completed_at\": \"2025-08-21T15:30:00Z\",\n    \"created_at\": \"2025-08-15T09:00:00Z\"\n  },\n  \"correlationId\": \"req_127\"\n}\n```"
              },
              "response": []
            },
            {
              "name": "Update Advisor Profile",
              "request": {
                "method": "PATCH",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "x-sheen-claims",
                    "value": "eyJ1c2VySWQiOiJ1c2VyMTIzIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIiwicm9sZXMiOlsidXNlciJdLCJpc3N1ZWQiOjE2OTI5ODQzMDAsImV4cGlyZXMiOjE2OTI5ODc5MDB9",
                    "description": "Base64 encoded authentication claims"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"display_name\": \"John Doe - React Expert\",\n  \"bio\": \"Updated bio with more recent experience and specializations...\",\n  \"skills\": [\"React\", \"TypeScript\", \"Next.js\", \"GraphQL\"],\n  \"specialties\": [\"frontend\", \"fullstack\", \"performance\"],\n  \"cal_com_event_type_url\": \"https://cal.com/johndoe/consultation\",\n  \"is_accepting_bookings\": true,\n  \"country_code\": \"US\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/advisor/profile/{{advisorId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "advisor",
                    "profile",
                    "{{advisorId}}"
                  ],
                  "variable": [
                    {
                      "key": "advisorId",
                      "value": "advisor-uuid-123"
                    }
                  ]
                },
                "description": "‚úèÔ∏è **Update Advisor Profile**\n\n**Features:**\n- üîí **User Authentication Required**\n- ‚úÖ Update allowed profile fields\n- üõ°Ô∏è RLS protection prevents admin field modification\n- üìù Creates timeline event for profile updates\n- üîÑ Real-time profile synchronization\n\n**Updateable Fields:**\n- `display_name`: 1-100 characters\n- `bio`: Max 2000 characters\n- `avatar_url`: Valid URL\n- `skills`: Array, max 20 items\n- `specialties`: Array, max 10 items\n- `languages`: Array, max 10 items\n- `cal_com_event_type_url`: Cal.com integration URL\n- `is_accepting_bookings`: Availability toggle\n- `country_code`: 2-character country code\n\n**Protected Fields (Admin Only):**\n- `approval_status`\n- `review_started_at`\n- `review_completed_at`\n- `onboarding_steps`\n- `rating` and `review_count`\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"id\": \"advisor_uuid\",\n    \"display_name\": \"Updated Name\",\n    \"updated_at\": \"2025-08-27T14:45:00Z\"\n    /* ... rest of profile data ... */\n  },\n  \"message\": \"Profile updated successfully\",\n  \"correlationId\": \"req_128\"\n}\n```"
              },
              "response": []
            },
            {
              "name": "Get Event Timeline",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "x-sheen-claims",
                    "value": "eyJ1c2VySWQiOiJ1c2VyMTIzIiwiZW1haWwiOiJ1c2VyQGV4YW1wbGUuY29tIiwicm9sZXMiOlsidXNlciJdLCJpc3N1ZWQiOjE2OTI5ODQzMDAsImV4cGlyZXMiOjE2OTI5ODc5MDB9",
                    "description": "Base64 encoded authentication claims"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/advisor/timeline?limit=50",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "advisor",
                    "timeline"
                  ],
                  "query": [
                    {
                      "key": "limit",
                      "value": "50",
                      "description": "Number of events to retrieve (default: 50)"
                    }
                  ]
                },
                "description": "üìã **Get Application Event Timeline**\n\n**Features:**\n- üîí **User Authentication Required**\n- üìä Complete application history\n- üåê i18n-ready event codes for localization\n- ‚è∞ Chronological event ordering\n- üìù Admin action tracking\n\n**Event Types:**\n- `draft_created`: Initial application creation\n- `draft_updated`: Auto-save or manual updates\n- `profile_updated`: Profile information changes\n- `application_submitted`: Submitted for review\n- `review_started`: Admin began review process\n- `review_completed`: Admin finished review\n- `status_changed`: Approval status updates\n- `admin_note_added`: Admin comments added\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": [\n    {\n      \"id\": \"event_uuid\",\n      \"event_type\": \"application_submitted\",\n      \"event_data\": {\n        \"submittedAt\": \"2025-08-25T14:30:00Z\",\n        \"completedSections\": [\"basic\", \"skills\", \"portfolio\"]\n      },\n      \"event_code\": \"advisor.application.submitted\",\n      \"created_at\": \"2025-08-25T14:30:00Z\"\n    },\n    {\n      \"id\": \"event_uuid_2\",\n      \"event_type\": \"review_started\",\n      \"event_data\": {\n        \"adminUserId\": \"admin_uuid\"\n      },\n      \"event_code\": \"advisor.review.started\",\n      \"created_at\": \"2025-08-26T09:15:00Z\"\n    }\n  ],\n  \"correlationId\": \"req_129\"\n}\n```\n\n**i18n Event Localization:**\n```javascript\nconst EVENT_TRANSLATIONS = {\n  'advisor.application.submitted': {\n    en: 'Application submitted for review',\n    ar: 'ÿ™ŸÖ ÿ™ŸÇÿØŸäŸÖ ÿßŸÑÿ∑ŸÑÿ® ŸÑŸÑŸÖÿ±ÿßÿ¨ÿπÿ©',\n    fr: 'Candidature soumise pour examen'\n  }\n};\n```"
              },
              "response": []
            },
            {
              "name": "[ADMIN] Get Applications for Review",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "x-sheen-claims",
                    "value": "eyJ1c2VySWQiOiJhZG1pbjEyMyIsImVtYWlsIjoiYWRtaW5AZXhhbXBsZS5jb20iLCJyb2xlcyI6WyJhZG1pbiJdLCJpc3N1ZWQiOjE2OTI5ODQzMDAsImV4cGlyZXMiOjE2OTI5ODc5MDB9",
                    "description": "Admin claims with admin/staff role required"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/admin/advisor/applications?status=submitted",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "admin",
                    "advisor",
                    "applications"
                  ],
                  "query": [
                    {
                      "key": "status",
                      "value": "submitted",
                      "description": "Filter by application status (optional)"
                    }
                  ]
                },
                "description": "üëë **[ADMIN] Get Applications for Review**\n\n**Features:**\n- üîí **Admin Authentication Required**\n- üìã List all submitted applications\n- üéØ Filter by status (optional)\n- üìß Include user email for contact\n- ‚è∞ Ordered by submission time (oldest first)\n\n**Admin Role Required:**\n- JWT claims must include `admin` or `staff` role\n- Returns 403 Forbidden for non-admin users\n\n**Status Filters:**\n- `submitted`: Ready for admin review\n- `under_review`: Currently being reviewed\n- `approved`: Approved applications\n- `rejected`: Rejected applications\n- `returned_for_changes`: Needs user modifications\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": [\n    {\n      \"id\": \"draft_uuid\",\n      \"user_id\": \"user_uuid\",\n      \"status\": \"submitted\",\n      \"professional_data\": {\n        \"bio\": \"Experienced developer...\",\n        \"skills\": [\"React\", \"TypeScript\"],\n        \"specialties\": [\"frontend\"],\n        \"yearsExperience\": 5\n      },\n      \"submitted_at\": \"2025-08-25T14:30:00Z\",\n      \"updated_at\": \"2025-08-25T14:30:00Z\"\n    }\n  ],\n  \"correlationId\": \"admin_req_130\"\n}\n```"
              },
              "response": []
            },
            {
              "name": "[ADMIN] Start Review Process",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "x-sheen-claims",
                    "value": "eyJ1c2VySWQiOiJhZG1pbjEyMyIsImVtYWlsIjoiYWRtaW5AZXhhbXBsZS5jb20iLCJyb2xlcyI6WyJhZG1pbiJdLCJpc3N1ZWQiOjE2OTI5ODQzMDAsImV4cGlyZXMiOjE2OTI5ODc5MDB9",
                    "description": "Admin claims with admin/staff role required"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"userId\": \"user-uuid-to-review\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/admin/advisor/review/start",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "admin",
                    "advisor",
                    "review",
                    "start"
                  ]
                },
                "description": "üîç **[ADMIN] Start Review Process**\n\n**Features:**\n- üîí **Admin Authentication Required**\n- üöÄ Marks review as started\n- ‚è∞ Sets review_started_at timestamp\n- üìù Creates timeline event for tracking\n- üîÑ Prevents multiple simultaneous reviews\n\n**Review Workflow:**\n1. Admin calls this endpoint to start review\n2. System timestamps the start\n3. Admin reviews application materials\n4. Admin calls complete review endpoint with decision\n\n**Response (Success):**\n```json\n{\n  \"success\": true,\n  \"message\": \"Review started successfully\",\n  \"correlationId\": \"admin_req_131\"\n}\n```\n\n**Response (Already Started):**\n```json\n{\n  \"success\": false,\n  \"error\": \"Advisor not found or review already started\",\n  \"correlationId\": \"admin_req_132\"\n}\n```\n\n**Timeline Event Created:**\n```json\n{\n  \"event_type\": \"review_started\",\n  \"event_data\": { \"adminUserId\": \"admin_uuid\" },\n  \"event_code\": \"advisor.review.started\"\n}\n```"
              },
              "response": []
            },
            {
              "name": "[ADMIN] Complete Review",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "x-sheen-claims",
                    "value": "eyJ1c2VySWQiOiJhZG1pbjEyMyIsImVtYWlsIjoiYWRtaW5AZXhhbXBsZS5jb20iLCJyb2xlcyI6WyJhZG1pbiJdLCJpc3N1ZWQiOjE2OTI5ODQzMDAsImV4cGlyZXMiOjE2OTI5ODc5MDB9",
                    "description": "Admin claims with admin/staff role required"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"userId\": \"user-uuid-to-review\",\n  \"approved\": true,\n  \"notes\": \"Excellent background in React and strong communication skills. Portfolio demonstrates solid expertise in modern web development.\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/admin/advisor/review/complete",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "admin",
                    "advisor",
                    "review",
                    "complete"
                  ]
                },
                "description": "‚úÖ‚ùå **[ADMIN] Complete Review Process**\n\n**Features:**\n- üîí **Admin Authentication Required**\n- ‚úÖ‚ùå Approve or reject application\n- üìù Optional admin notes\n- ‚è∞ Sets completion timestamp\n- üìß Triggers user notification (future)\n- üìä Updates advisor approval status\n\n**Request Body:**\n- `userId`: UUID of user being reviewed (required)\n- `approved`: Boolean decision (required)\n- `notes`: Admin feedback (optional, max 1000 chars)\n\n**Review Decision Effects:**\n- **Approved**: User becomes advisor, can accept bookings\n- **Rejected**: Application denied, user can reapply\n\n**Response (Success):**\n```json\n{\n  \"success\": true,\n  \"message\": \"Review completed - advisor approved\",\n  \"correlationId\": \"admin_req_133\"\n}\n```\n\n**Response (Not In Review):**\n```json\n{\n  \"success\": false,\n  \"error\": \"Advisor not found or review not in progress\",\n  \"correlationId\": \"admin_req_134\"\n}\n```\n\n**Timeline Events Created:**\n```json\n{\n  \"event_type\": \"review_completed\",\n  \"event_data\": {\n    \"approved\": true,\n    \"adminUserId\": \"admin_uuid\",\n    \"notes\": \"Excellent qualifications\"\n  },\n  \"event_code\": \"advisor.review.approved\"\n}\n```\n\n**Database Updates:**\n- `approval_status`: Set to 'approved' or 'rejected'\n- `review_completed_at`: Current timestamp\n- `approved_by`: Admin user ID\n- `approved_at`: Current timestamp (if approved)"
              },
              "response": []
            }
          ],
          "description": "üìù **Phase 2 - Advanced Application System**\n\nüöÄ **NEW: Multi-Step Application with Auto-Save (Aug 27, 2025):**\n- üíæ **Draft Management**: Auto-save functionality with UPSERT patterns\n- üìã **Event Timeline**: Complete audit trail for admin review workflow\n- üéØ **Profile Management**: Update advisor profiles with RLS security\n- üëë **Admin Workflow**: Review process with start/complete tracking\n- üåê **i18n Ready**: Machine-readable event codes for localization\n\nüõ°Ô∏è **Security Features:**\n- üîí **HMAC Authentication**: All endpoints require signature validation\n- üõ°Ô∏è **RLS Protection**: Field-level security prevents admin field modification\n- üë§ **User Authorization**: JWT claims-based access control\n- üéØ **Role-Based Access**: Admin endpoints check for admin/staff roles\n- üìù **Audit Logging**: Complete timeline of all application changes\n\nüí° **Implementation Features:**\n- ‚ö° **Auto-Save**: Debounced saves every 30 seconds prevent data loss\n- ‚úÖ **Validation**: Comprehensive client and server-side validation\n- üîÑ **UPSERT Patterns**: Expert-validated conflict resolution\n- üìä **Progress Tracking**: completedSections array for form progress\n- üéØ **Status Management**: Clear application state transitions\n\nüìã **Application Statuses:**\n- `draft`: Editable by user, auto-save active\n- `submitted`: Waiting for admin review\n- `under_review`: Admin is currently reviewing\n- `approved`: Approved - user becomes advisor\n- `rejected`: Rejected - user can reapply\n- `returned_for_changes`: Needs user modifications\n\n‚ö° **Performance Optimizations:**\n- üóÇÔ∏è **GIN Indexes**: Fast JSONB queries on professional_data\n- üîç **Event Pagination**: Timeline queries with limit parameter\n- üíæ **Draft Caching**: Local storage prevents form data loss\n- üéØ **Optimistic Updates**: Better UX with immediate feedback\n\nüéØ **Admin Review Workflow:**\n1. **Get Applications**: List submitted applications\n2. **Start Review**: Mark review as started (timestamps)\n3. **Review Process**: Admin evaluates application materials\n4. **Complete Review**: Approve/reject with optional notes\n5. **Timeline Events**: All actions tracked for audit\n\nüì¶ **TypeScript Support:**\nComplete type definitions in `src/services/advisor/types.ts`\n\n**Required Headers:**\n```\nx-sheen-signature: [HMAC v1 signature]\nx-sheen-sig-v2: [HMAC v2 signature]\nx-sheen-timestamp: [Unix timestamp]\nx-sheen-nonce: [Random replay protection]\nx-sheen-claims: [Base64 encoded user claims]\nx-sheen-locale: [Optional locale code]\nx-correlation-id: [Optional request tracking]\n```"
        },
        {
          "name": "üîó Webhook Integration",
          "item": [
            {
              "name": "Cal.com Webhook",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "x-cal-signature",
                    "value": "sha256=webhook_signature_here",
                    "description": "Cal.com webhook signature for verification"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"id\": \"calcom_event_123\",\n  \"type\": \"BOOKING_CREATED\",\n  \"createdAt\": \"2025-08-26T14:00:00Z\",\n  \"data\": {\n    \"booking\": {\n      \"id\": \"cal_booking_456\",\n      \"uid\": \"cal_uid_789\",\n      \"title\": \"30-minute Consultation\",\n      \"startTime\": \"2025-08-26T15:00:00Z\",\n      \"endTime\": \"2025-08-26T15:30:00Z\",\n      \"status\": \"ACCEPTED\",\n      \"attendees\": [{\n        \"email\": \"client@example.com\",\n        \"name\": \"Jane Client\"\n      }],\n      \"organizer\": {\n        \"email\": \"advisor@example.com\",\n        \"name\": \"John Expert\",\n        \"username\": \"johnexpert\"\n      },\n      \"videoCallUrl\": \"https://meet.google.com/abc-def-ghi\",\n      \"metadata\": {\n        \"consultation_id\": \"consultation-uuid-123\",\n        \"advisor_id\": \"advisor-uuid-456\",\n        \"duration_minutes\": \"30\"\n      },\n      \"eventType\": {\n        \"id\": 12345,\n        \"title\": \"Expert Consultation\",\n        \"slug\": \"30min-consultation\"\n      }\n    }\n  }\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/v1/webhooks/calcom",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "v1",
                    "webhooks",
                    "calcom"
                  ]
                },
                "description": "üîó **Cal.com Webhook Integration**\n\n**Features:**\n- üìÖ Booking lifecycle event processing\n- üîê Webhook signature verification\n- ‚ö° Fast 200 OK response (<100ms)\n- üîÑ Async background processing\n- üö´ **No HMAC Authentication** (uses Cal.com signature)\n\n**Supported Events:**\n- `BOOKING_CREATED`: New consultation scheduled\n- `BOOKING_CANCELLED`: Consultation cancelled\n- `BOOKING_RESCHEDULED`: Time changed\n- `BOOKING_CONFIRMED`: Booking confirmed\n\n**Setup Requirements:**\n1. üîó Configure webhook URL in Cal.com\n2. üîê Set `CALCOM_WEBHOOK_SECRET` environment variable\n3. üìã Include consultation metadata in bookings\n4. ‚è∞ Configure event types for 15/30/60 minutes\n\n**Business Logic:**\n- ‚úÖ **BOOKING_CREATED**: Capture payment, send confirmations\n- ‚ùå **BOOKING_CANCELLED**: Apply refund policy (>24h = refund)\n- üîÑ **BOOKING_RESCHEDULED**: Update consultation timing\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Webhook received\",\n  \"correlation_id\": \"uuid\"\n}\n```"
              },
              "response": []
            }
          ],
          "description": "üîó **External Service Integration**\n\nWebhook endpoints for third-party services:\n- üìÖ Cal.com booking lifecycle events\n- üí≥ Automatic payment processing\n- üìß Notification triggers"
        }
      ],
      "description": "üéØ **Advisor Network - Expert Consultation Platform**\n\nüöÄ **NEW: Complete Advisor Network (Aug 25, 2025):**\n- üë®‚Äçüíº **Advisor Management**: Application ‚Üí Approval ‚Üí Profile management\n- üí∞ **Platform-Fixed Pricing**: $9 (15min), $19 (30min), $35 (60min)\n- üìÖ **Consultation Booking**: Cal.com + Stripe integration\n- ‚≠ê **Review System**: Client feedback and ratings\n- üîÑ **Refund Policy**: >24h = refund, ‚â§24h = no refund\n- üí∏ **Monthly Payouts**: 70% to advisors via Stripe Connect\n\nüõ°Ô∏è **Security & Privacy Features:**\n- üîí **HMAC Authentication**: Same security model as payments\n- üîê **Privacy Protection**: Advisors only see client first names\n- üë§ **User Authorization**: Claims-based access control\n- üõ°Ô∏è **Data Segregation**: Role-based information visibility\n- üìä **Audit Logging**: Comprehensive operation tracking\n\nüí∞ **Revenue Model:**\n- üéØ **Platform Share**: 30% of all consultation fees\n- üë®‚Äçüíº **Advisor Share**: 70% of consultation fees\n- üí≥ **Payment Processing**: Handled by existing Stripe integration\n- üìà **Scalable**: Fixed pricing, no negotiation complexity\n\nüìÖ **Consultation Workflow:**\n1. üîç **Discovery**: Client searches approved advisors\n2. üìÖ **Booking**: Client selects time via Cal.com widget\n3. üí≥ **Payment**: Stripe payment intent created automatically\n4. ‚úÖ **Confirmation**: Cal.com webhook triggers payment capture\n5. üé• **Meeting**: Video call via Cal.com integration\n6. ‚≠ê **Review**: Client submits rating and feedback\n7. üí∞ **Payout**: Monthly advisor earnings via Stripe Connect\n\nüë®‚Äçüíº **Advisor Journey:**\n1. üìù **Application**: Submit profile with skills and experience\n2. ‚è≥ **Review**: Admin approval process\n3. ‚úÖ **Approval**: Profile goes live, can accept bookings\n4. üìä **Management**: Update profile, toggle availability\n5. üí∞ **Earnings**: Track monthly income and payouts\n\nüîß **Integration Points:**\n- **Stripe**: Payment processing and Connect payouts\n- **Cal.com**: Scheduling and video call management\n- **Existing Auth**: Uses same HMAC + Claims system\n- **Database**: New tables with proper relationships\n\n‚ö†Ô∏è **Authentication Notes:**\n- üîë **Most Endpoints**: Require HMAC + Claims headers\n- üåê **Public Endpoints**: Advisor discovery and pricing\n- üîó **Webhook**: Uses Cal.com signature verification\n- üëë **Admin Endpoints**: Require admin role in claims\n\nüìã **Required Headers (Authenticated Endpoints):**\n```\nx-sheen-signature: [HMAC v1 signature]\nx-sheen-sig-v2: [HMAC v2 signature]\nx-sheen-timestamp: [Unix timestamp]\nx-sheen-nonce: [Random replay protection]\nx-sheen-claims: [Base64 encoded user claims]\nx-correlation-id: [UUID for tracking]\nx-sheen-locale: [Optional locale]\n```\n\nüéØ **Rate Limits:**\n- **Consultation Booking**: 5/minute per user\n- **Profile Updates**: 10/minute per user\n- **Search**: 30/minute per IP\n- **Reviews**: 2/minute per user\n- **Admin Operations**: 20/minute per admin\n\n‚ö° **Performance Targets:**\n- **Advisor Search**: <50ms database lookup\n- **Consultation Booking**: <300ms (includes Stripe API)\n- **Webhook Processing**: <100ms acknowledgment\n- **Profile Updates**: <100ms response time\n\nüß™ **Testing Workflow:**\n1. **Public APIs**: Test advisor discovery and pricing\n2. **Application**: Submit advisor application\n3. **Admin Approval**: Use admin endpoints to approve\n4. **Booking Flow**: Book consultation with payment\n5. **Lifecycle**: Test cancellation and refund policies\n6. **Review System**: Submit ratings and feedback\n\nThis comprehensive advisor network enables expert consultations with platform-fixed pricing, automated payments, and privacy-protected interactions."
    },
    {
      "name": "Career Portal",
      "item": [
        {
          "name": "Public Endpoints",
          "item": [
            {
              "name": "List Jobs",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "x-sheen-locale",
                    "value": "ar",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/careers/jobs?search=engineer&department=Engineering&limit=20&offset=0",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "careers",
                    "jobs"
                  ],
                  "query": [
                    {
                      "key": "search",
                      "value": "engineer"
                    },
                    {
                      "key": "department",
                      "value": "Engineering"
                    },
                    {
                      "key": "location",
                      "value": "",
                      "disabled": true
                    },
                    {
                      "key": "employment_type",
                      "value": "full_time",
                      "disabled": true
                    },
                    {
                      "key": "experience_level",
                      "value": "senior",
                      "disabled": true
                    },
                    {
                      "key": "is_remote",
                      "value": "true",
                      "disabled": true
                    },
                    {
                      "key": "limit",
                      "value": "20"
                    },
                    {
                      "key": "offset",
                      "value": "0"
                    }
                  ]
                }
              }
            },
            {
              "name": "Get Job Details",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "x-sheen-locale",
                    "value": "en",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/careers/jobs/senior-backend-engineer",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "careers",
                    "jobs",
                    "senior-backend-engineer"
                  ]
                }
              }
            },
            {
              "name": "Submit Application",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "x-sheen-locale",
                    "value": "ar",
                    "type": "text"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"full_name\": \"Ahmed Hassan\",\n  \"email\": \"ahmed@example.com\",\n  \"phone\": \"+201234567890\",\n  \"cover_letter\": \"I am interested in this position because...\",\n  \"linkedin_url\": \"https://linkedin.com/in/ahmed-hassan\",\n  \"portfolio_url\": \"https://ahmed-portfolio.com\",\n  \"years_of_experience\": 5,\n  \"resume_file\": \"data:application/pdf;base64,JVBERi0xLjQKJcfs...\",\n  \"captcha_token\": \"test-captcha-token\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/careers/jobs/{{jobId}}/apply",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "careers",
                    "jobs",
                    "{{jobId}}",
                    "apply"
                  ]
                }
              }
            },
            {
              "name": "List Departments",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "x-sheen-locale",
                    "value": "ar",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/careers/departments",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "careers",
                    "departments"
                  ]
                }
              }
            },
            {
              "name": "Get Sitemap",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/careers/sitemap",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "careers",
                    "sitemap"
                  ]
                }
              }
            }
          ]
        },
        {
          "name": "Admin Endpoints",
          "item": [
            {
              "name": "List All Jobs (Admin)",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "x-admin-user-id",
                    "value": "{{adminUserId}}",
                    "type": "text"
                  },
                  {
                    "key": "x-correlation-id",
                    "value": "{{$guid}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-signature",
                    "value": "{{adminSignature}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/admin/careers/jobs?is_active=true&limit=50",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "admin",
                    "careers",
                    "jobs"
                  ],
                  "query": [
                    {
                      "key": "is_active",
                      "value": "true"
                    },
                    {
                      "key": "search",
                      "value": "",
                      "disabled": true
                    },
                    {
                      "key": "limit",
                      "value": "50"
                    },
                    {
                      "key": "offset",
                      "value": "0",
                      "disabled": true
                    }
                  ]
                }
              }
            },
            {
              "name": "Get Job Details (Admin)",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "x-admin-user-id",
                    "value": "{{adminUserId}}",
                    "type": "text"
                  },
                  {
                    "key": "x-correlation-id",
                    "value": "{{$guid}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-signature",
                    "value": "{{adminSignature}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/admin/careers/jobs/{{jobId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "admin",
                    "careers",
                    "jobs",
                    "{{jobId}}"
                  ]
                }
              }
            },
            {
              "name": "Create Job",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "x-admin-user-id",
                    "value": "{{adminUserId}}",
                    "type": "text"
                  },
                  {
                    "key": "x-admin-reason",
                    "value": "Creating new job posting",
                    "type": "text"
                  },
                  {
                    "key": "x-correlation-id",
                    "value": "{{$guid}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-signature",
                    "value": "{{adminSignature}}",
                    "type": "text"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"multilingual_title\": {\n    \"ar\": \"\\u0645\\u0647\\u0646\\u062f\\u0633 \\u062e\\u0644\\u0641\\u064a\",\n    \"en\": \"Backend Engineer\"\n  },\n  \"multilingual_description\": {\n    \"ar\": \"<p>\\u0648\\u0635\\u0641 \\u0627\\u0644\\u0648\\u0638\\u064a\\u0641\\u0629...</p>\",\n    \"en\": \"<p>Job description...</p>\"\n  },\n  \"multilingual_requirements\": {\n    \"ar\": \"<ul><li>\\u062e\\u0628\\u0631\\u0629 5 \\u0633\\u0646\\u0648\\u0627\\u062a</li></ul>\",\n    \"en\": \"<ul><li>5 years experience</li></ul>\"\n  },\n  \"multilingual_benefits\": {\n    \"ar\": \"<ul><li>\\u062a\\u0623\\u0645\\u064a\\u0646 \\u0635\\u062d\\u064a</li></ul>\",\n    \"en\": \"<ul><li>Health insurance</li></ul>\"\n  },\n  \"multilingual_location\": {\n    \"ar\": \"\\u0627\\u0644\\u0642\\u0627\\u0647\\u0631\\u0629\\u060c \\u0645\\u0635\\u0631\",\n    \"en\": \"Cairo, Egypt\"\n  },\n  \"department\": \"Engineering\",\n  \"employment_type\": \"full_time\",\n  \"experience_level\": \"senior\",\n  \"salary\": {\n    \"min\": 15000,\n    \"max\": 25000,\n    \"currency\": \"EGP\",\n    \"period\": \"monthly\"\n  },\n  \"is_remote\": true,\n  \"is_featured\": false,\n  \"is_active\": true\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/admin/careers/jobs",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "admin",
                    "careers",
                    "jobs"
                  ]
                }
              }
            },
            {
              "name": "Update Job",
              "request": {
                "method": "PUT",
                "header": [
                  {
                    "key": "x-admin-user-id",
                    "value": "{{adminUserId}}",
                    "type": "text"
                  },
                  {
                    "key": "x-admin-reason",
                    "value": "Updating job details",
                    "type": "text"
                  },
                  {
                    "key": "x-correlation-id",
                    "value": "{{$guid}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-signature",
                    "value": "{{adminSignature}}",
                    "type": "text"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"is_featured\": true,\n  \"application_deadline\": \"2025-12-31T23:59:59Z\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/admin/careers/jobs/{{jobId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "admin",
                    "careers",
                    "jobs",
                    "{{jobId}}"
                  ]
                }
              }
            },
            {
              "name": "Delete Job",
              "request": {
                "method": "DELETE",
                "header": [
                  {
                    "key": "x-admin-user-id",
                    "value": "{{adminUserId}}",
                    "type": "text"
                  },
                  {
                    "key": "x-admin-reason",
                    "value": "Position filled",
                    "type": "text"
                  },
                  {
                    "key": "x-correlation-id",
                    "value": "{{$guid}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-signature",
                    "value": "{{adminSignature}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/admin/careers/jobs/{{jobId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "admin",
                    "careers",
                    "jobs",
                    "{{jobId}}"
                  ]
                }
              }
            },
            {
              "name": "List Applications",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "x-admin-user-id",
                    "value": "{{adminUserId}}",
                    "type": "text"
                  },
                  {
                    "key": "x-correlation-id",
                    "value": "{{$guid}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-signature",
                    "value": "{{adminSignature}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/admin/careers/applications?status=new",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "admin",
                    "careers",
                    "applications"
                  ],
                  "query": [
                    {
                      "key": "job_id",
                      "value": "",
                      "disabled": true
                    },
                    {
                      "key": "status",
                      "value": "new"
                    },
                    {
                      "key": "search",
                      "value": "",
                      "disabled": true
                    },
                    {
                      "key": "limit",
                      "value": "50",
                      "disabled": true
                    },
                    {
                      "key": "offset",
                      "value": "0",
                      "disabled": true
                    }
                  ]
                }
              }
            },
            {
              "name": "Get Application Details",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "x-admin-user-id",
                    "value": "{{adminUserId}}",
                    "type": "text"
                  },
                  {
                    "key": "x-correlation-id",
                    "value": "{{$guid}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-signature",
                    "value": "{{adminSignature}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/admin/careers/applications/{{applicationId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "admin",
                    "careers",
                    "applications",
                    "{{applicationId}}"
                  ]
                }
              }
            },
            {
              "name": "Update Application Status",
              "request": {
                "method": "PUT",
                "header": [
                  {
                    "key": "x-admin-user-id",
                    "value": "{{adminUserId}}",
                    "type": "text"
                  },
                  {
                    "key": "x-admin-reason",
                    "value": "Reviewing application",
                    "type": "text"
                  },
                  {
                    "key": "x-correlation-id",
                    "value": "{{$guid}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-signature",
                    "value": "{{adminSignature}}",
                    "type": "text"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"status\": \"shortlisted\",\n  \"reviewer_notes\": \"Strong candidate, schedule interview\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/admin/careers/applications/{{applicationId}}/status",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "admin",
                    "careers",
                    "applications",
                    "{{applicationId}}",
                    "status"
                  ]
                }
              }
            },
            {
              "name": "Get Career Statistics",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "x-admin-user-id",
                    "value": "{{adminUserId}}",
                    "type": "text"
                  },
                  {
                    "key": "x-correlation-id",
                    "value": "{{$guid}}",
                    "type": "text"
                  },
                  {
                    "key": "x-sheen-signature",
                    "value": "{{adminSignature}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/api/admin/careers/stats",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "api",
                    "admin",
                    "careers",
                    "stats"
                  ]
                }
              }
            }
          ]
        }
      ]
    },
    {
      "name": "üÜï Admin Unified Logs API",
      "description": "**New Unified Multi-Tier Logging System**\n\nProvides comprehensive observability across 5 tiers:\n- **system** - Server events (AI time, rate limits, health)\n- **build** - Claude CLI process tracking\n- **deploy** - Cloudflare/Vercel deployment outputs\n- **action** - User actions (project creation, settings)\n- **lifecycle** - High-level project milestones\n\nReplaces legacy build-specific log endpoints with superior functionality.",
      "item": [
        {
          "name": "List Available Log Segments",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_jwt}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/admin/unified-logs/segments?tier=build&startDate=2024-09-13",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "admin",
                "unified-logs",
                "segments"
              ],
              "query": [
                {
                  "key": "tier",
                  "value": "build",
                  "description": "Filter by tier: system|build|deploy|action|lifecycle"
                },
                {
                  "key": "startDate",
                  "value": "2024-09-13",
                  "description": "YYYY-MM-DD format"
                },
                {
                  "key": "endDate",
                  "value": "",
                  "description": "YYYY-MM-DD format",
                  "disabled": true
                },
                {
                  "key": "instanceId",
                  "value": "",
                  "description": "Filter by server instance",
                  "disabled": true
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Stream Unified Logs",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_jwt}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/admin/unified-logs/stream?tier=build&limit=1000",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "admin",
                "unified-logs",
                "stream"
              ],
              "query": [
                {
                  "key": "tier",
                  "value": "build",
                  "description": "Filter by tier: system|build|deploy|action|lifecycle"
                },
                {
                  "key": "format",
                  "value": "raw",
                  "description": "Format: ndjson|raw (default: ndjson)",
                  "disabled": true
                },
                {
                  "key": "limit",
                  "value": "1000",
                  "description": "Max entries, default: 1000, max: 10000"
                },
                {
                  "key": "startDate",
                  "value": "",
                  "description": "YYYY-MM-DD format",
                  "disabled": true
                },
                {
                  "key": "endDate",
                  "value": "",
                  "description": "YYYY-MM-DD format",
                  "disabled": true
                },
                {
                  "key": "instanceId",
                  "value": "",
                  "description": "Filter by server instance",
                  "disabled": true
                },
                {
                  "key": "sortOrder",
                  "value": "desc",
                  "description": "Sort order: asc|desc (default: desc) - Orders by timestamp"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Download Specific Log Segment",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_jwt}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/admin/unified-logs/segments/:segmentId",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "admin",
                "unified-logs",
                "segments",
                ":segmentId"
              ],
              "variable": [
                {
                  "key": "segmentId",
                  "value": "build-14-ABC123-DEF456.ndjson",
                  "description": "Segment filename from /segments endpoint"
                }
              ],
              "query": [
                {
                  "key": "format",
                  "value": "raw",
                  "description": "Format: ndjson|raw (default: ndjson)",
                  "disabled": true
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "üö´ Legacy Build Logs (DEPRECATED)",
      "description": "**‚ö†Ô∏è DEPRECATED**: These endpoints are maintained for backward compatibility but should be migrated to the Unified Logs API above. They will be removed in a future release.\n\n**Migration Guide**: Use `/admin/unified-logs/*` endpoints instead.",
      "item": [
        {
          "name": "Stream Build Logs (DEPRECATED)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_jwt}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v1/admin/builds/:buildId/logs?raw=true",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "v1",
                "admin",
                "builds",
                ":buildId",
                "logs"
              ],
              "variable": [
                {
                  "key": "buildId",
                  "value": "01HZ8X9J2K3L4M5N6P7Q8R9S0T",
                  "description": "ULID format build identifier"
                }
              ],
              "query": [
                {
                  "key": "raw",
                  "value": "true",
                  "description": "Get plain text instead of NDJSON"
                },
                {
                  "key": "bytes",
                  "value": "",
                  "description": "Tail functionality: -1024 for last 1KB",
                  "disabled": true
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Build Metadata (DEPRECATED)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_jwt}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v1/admin/builds/:buildId/info",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "v1",
                "admin",
                "builds",
                ":buildId",
                "info"
              ],
              "variable": [
                {
                  "key": "buildId",
                  "value": "01HZ8X9J2K3L4M5N6P7Q8R9S0T",
                  "description": "ULID format build identifier"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "List Recent Builds (DEPRECATED)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_jwt}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/v1/admin/builds?limit=50&status=failed",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "v1",
                "admin",
                "builds"
              ],
              "query": [
                {
                  "key": "limit",
                  "value": "50",
                  "description": "Default: 50, Max: 100"
                },
                {
                  "key": "offset",
                  "value": "0",
                  "description": "Default: 0",
                  "disabled": true
                },
                {
                  "key": "status",
                  "value": "failed",
                  "description": "Filter by build status"
                },
                {
                  "key": "userId",
                  "value": "",
                  "description": "Filter by user ID",
                  "disabled": true
                },
                {
                  "key": "projectId",
                  "value": "",
                  "description": "Filter by project ID",
                  "disabled": true
                }
              ]
            }
          },
          "response": []
        }
      ]
    }
  ]
}